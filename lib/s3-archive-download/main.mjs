import { createRequire } from "module";const require = createRequire(import.meta.url);
var w_=Object.create;var Qi=Object.defineProperty;var x_=Object.getOwnPropertyDescriptor;var C_=Object.getOwnPropertyNames;var S_=Object.getPrototypeOf,b_=Object.prototype.hasOwnProperty;var I=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var ge=(t,e)=>()=>(t&&(e=t(t=0)),e);var N=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ys=(t,e)=>{for(var r in e)Qi(t,r,{get:e[r],enumerable:!0})},am=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of C_(e))!b_.call(t,s)&&s!==r&&Qi(t,s,{get:()=>e[s],enumerable:!(n=x_(e,s))||n.enumerable});return t};var Fr=(t,e,r)=>(r=t!=null?w_(S_(t)):{},am(e||!t||!t.__esModule?Qi(r,"default",{value:t,enumerable:!0}):r,t)),gs=t=>am(Qi({},"__esModule",{value:!0}),t);var Zi=N(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.toCommandProperties=Es.toCommandValue=void 0;function __(t){return t==null?"":typeof t=="string"||t instanceof String?t:JSON.stringify(t)}Es.toCommandValue=__;function R_(t){return Object.keys(t).length?{title:t.title,file:t.file,line:t.startLine,endLine:t.endLine,col:t.startColumn,endColumn:t.endColumn}:{}}Es.toCommandProperties=R_});var fm=N(ut=>{"use strict";var A_=ut&&ut.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),k_=ut&&ut.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),T_=ut&&ut.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&A_(e,t,r);return k_(e,t),e};Object.defineProperty(ut,"__esModule",{value:!0});ut.issue=ut.issueCommand=void 0;var N_=T_(I("os")),dm=Zi();function lm(t,e,r){let n=new Md(t,e,r);process.stdout.write(n.toString()+N_.EOL)}ut.issueCommand=lm;function O_(t,e=""){lm(t,{},e)}ut.issue=O_;var cm="::",Md=class{constructor(e,r,n){e||(e="missing.command"),this.command=e,this.properties=r,this.message=n}toString(){let e=cm+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let s=this.properties[n];s&&(r?r=!1:e+=",",e+=`${n}=${v_(s)}`)}}return e+=`${cm}${I_(this.message)}`,e}};function I_(t){return dm.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function v_(t){return dm.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});import P_ from"crypto";function Uo(){return Ji>ea.length-16&&(P_.randomFillSync(ea),Ji=0),ea.slice(Ji,Ji+=16)}var ea,Ji,Fd=ge(()=>{ea=new Uint8Array(256),Ji=ea.length});var um,hm=ge(()=>{um=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function D_(t){return typeof t=="string"&&um.test(t)}var Lr,zo=ge(()=>{hm();Lr=D_});function B_(t,e=0){let r=(Oe[t[e+0]]+Oe[t[e+1]]+Oe[t[e+2]]+Oe[t[e+3]]+"-"+Oe[t[e+4]]+Oe[t[e+5]]+"-"+Oe[t[e+6]]+Oe[t[e+7]]+"-"+Oe[t[e+8]]+Oe[t[e+9]]+"-"+Oe[t[e+10]]+Oe[t[e+11]]+Oe[t[e+12]]+Oe[t[e+13]]+Oe[t[e+14]]+Oe[t[e+15]]).toLowerCase();if(!Lr(r))throw TypeError("Stringified UUID is invalid");return r}var Oe,Ur,$o=ge(()=>{zo();Oe=[];for(let t=0;t<256;++t)Oe.push((t+256).toString(16).substr(1));Ur=B_});function M_(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let o=t.node||mm,i=t.clockseq!==void 0?t.clockseq:Ld;if(o==null||i==null){let h=t.random||(t.rng||Uo)();o==null&&(o=mm=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),i==null&&(i=Ld=(h[6]<<8|h[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),d=t.nsecs!==void 0?t.nsecs:zd+1,c=a-Ud+(d-zd)/1e4;if(c<0&&t.clockseq===void 0&&(i=i+1&16383),(c<0||a>Ud)&&t.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ud=a,zd=d,Ld=i,a+=122192928e5;let l=((a&268435455)*1e4+d)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=l&255;let u=a/4294967296*1e4&268435455;s[n++]=u>>>8&255,s[n++]=u&255,s[n++]=u>>>24&15|16,s[n++]=u>>>16&255,s[n++]=i>>>8|128,s[n++]=i&255;for(let h=0;h<6;++h)s[n+h]=o[h];return e||Ur(s)}var mm,Ld,Ud,zd,pm,ym=ge(()=>{Fd();$o();Ud=0,zd=0;pm=M_});function F_(t){if(!Lr(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var ta,$d=ge(()=>{zo();ta=F_});function L_(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function ra(t,e,r){function n(s,o,i,a){if(typeof s=="string"&&(s=L_(s)),typeof o=="string"&&(o=ta(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+s.length);if(d.set(o),d.set(s,o.length),d=r(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,i){a=a||0;for(let c=0;c<16;++c)i[a+c]=d[c];return i}return Ur(d)}try{n.name=t}catch{}return n.DNS=U_,n.URL=z_,n}var U_,z_,qd=ge(()=>{$o();$d();U_="6ba7b810-9dad-11d1-80b4-00c04fd430c8",z_="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import $_ from"crypto";function q_(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),$_.createHash("md5").update(t).digest()}var gm,Em=ge(()=>{gm=q_});var j_,wm,xm=ge(()=>{qd();Em();j_=ra("v3",48,gm),wm=j_});function G_(t,e,r){t=t||{};let n=t.random||(t.rng||Uo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return Ur(n)}var na,Cm=ge(()=>{Fd();$o();na=G_});import K_ from"crypto";function H_(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),K_.createHash("sha1").update(t).digest()}var Sm,bm=ge(()=>{Sm=H_});var V_,_m,Rm=ge(()=>{qd();bm();V_=ra("v5",80,Sm),_m=V_});var Am,km=ge(()=>{Am="00000000-0000-0000-0000-000000000000"});function W_(t){if(!Lr(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var Tm,Nm=ge(()=>{zo();Tm=W_});var Om={};ys(Om,{NIL:()=>Am,parse:()=>ta,stringify:()=>Ur,v1:()=>pm,v3:()=>wm,v4:()=>na,v5:()=>_m,validate:()=>Lr,version:()=>Tm});var jd=ge(()=>{ym();xm();Cm();Rm();km();Nm();zo();$o();$d()});var Dm=N(ht=>{"use strict";var Y_=ht&&ht.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),X_=ht&&ht.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vm=ht&&ht.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Y_(e,t,r);return X_(e,t),e};Object.defineProperty(ht,"__esModule",{value:!0});ht.prepareKeyValueMessage=ht.issueFileCommand=void 0;var Im=vm(I("fs")),Gd=vm(I("os")),Q_=(jd(),gs(Om)),Pm=Zi();function Z_(t,e){let r=process.env[`GITHUB_${t}`];if(!r)throw new Error(`Unable to find environment variable for file command ${t}`);if(!Im.existsSync(r))throw new Error(`Missing file at path: ${r}`);Im.appendFileSync(r,`${Pm.toCommandValue(e)}${Gd.EOL}`,{encoding:"utf8"})}ht.issueFileCommand=Z_;function J_(t,e){let r=`ghadelimiter_${Q_.v4()}`,n=Pm.toCommandValue(e);if(t.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${t}<<${r}${Gd.EOL}${n}${Gd.EOL}${r}`}ht.prepareKeyValueMessage=J_});var Mm=N(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.checkBypass=ws.getProxyUrl=void 0;function eR(t){let e=t.protocol==="https:";if(Bm(t))return;let r=(()=>e?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}ws.getProxyUrl=eR;function Bm(t){if(!t.hostname)return!1;let e=t.hostname;if(tR(e))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;t.port?n=Number(t.port):t.protocol==="http:"?n=80:t.protocol==="https:"&&(n=443);let s=[t.hostname.toUpperCase()];typeof n=="number"&&s.push(`${s[0]}:${n}`);for(let o of r.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(o==="*"||s.some(i=>i===o||i.endsWith(`.${o}`)||o.startsWith(".")&&i.endsWith(`${o}`)))return!0;return!1}ws.checkBypass=Bm;function tR(t){let e=t.toLowerCase();return e==="localhost"||e.startsWith("127.")||e.startsWith("[::1]")||e.startsWith("[0:0:0:0:0:0:0:1]")}});var zm=N(xs=>{"use strict";var L1=I("net"),rR=I("tls"),Kd=I("http"),Fm=I("https"),nR=I("events"),U1=I("assert"),sR=I("util");xs.httpOverHttp=oR;xs.httpsOverHttp=iR;xs.httpOverHttps=aR;xs.httpsOverHttps=cR;function oR(t){var e=new cr(t);return e.request=Kd.request,e}function iR(t){var e=new cr(t);return e.request=Kd.request,e.createSocket=Lm,e.defaultPort=443,e}function aR(t){var e=new cr(t);return e.request=Fm.request,e}function cR(t){var e=new cr(t);return e.request=Fm.request,e.createSocket=Lm,e.defaultPort=443,e}function cr(t){var e=this;e.options=t||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||Kd.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(n,s,o,i){for(var a=Um(s,o,i),d=0,c=e.requests.length;d<c;++d){var l=e.requests[d];if(l.host===a.host&&l.port===a.port){e.requests.splice(d,1),l.request.onSocket(n);return}}n.destroy(),e.removeSocket(n)})}sR.inherits(cr,nR.EventEmitter);cr.prototype.addRequest=function(e,r,n,s){var o=this,i=Hd({request:e},o.options,Um(r,n,s));if(o.sockets.length>=this.maxSockets){o.requests.push(i);return}o.createSocket(i,function(a){a.on("free",d),a.on("close",c),a.on("agentRemove",c),e.onSocket(a);function d(){o.emit("free",a,i)}function c(l){o.removeSocket(a),a.removeListener("free",d),a.removeListener("close",c),a.removeListener("agentRemove",c)}})};cr.prototype.createSocket=function(e,r){var n=this,s={};n.sockets.push(s);var o=Hd({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(o.localAddress=e.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),zr("making CONNECT request");var i=n.request(o);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",d),i.once("connect",c),i.once("error",l),i.end();function a(u){u.upgrade=!0}function d(u,h,w){process.nextTick(function(){c(u,h,w)})}function c(u,h,w){if(i.removeAllListeners(),h.removeAllListeners(),u.statusCode!==200){zr("tunneling socket could not be established, statusCode=%d",u.statusCode),h.destroy();var S=new Error("tunneling socket could not be established, statusCode="+u.statusCode);S.code="ECONNRESET",e.request.emit("error",S),n.removeSocket(s);return}if(w.length>0){zr("got illegal response body from proxy"),h.destroy();var S=new Error("got illegal response body from proxy");S.code="ECONNRESET",e.request.emit("error",S),n.removeSocket(s);return}return zr("tunneling connection has established"),n.sockets[n.sockets.indexOf(s)]=h,r(h)}function l(u){i.removeAllListeners(),zr(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var h=new Error("tunneling socket could not be established, cause="+u.message);h.code="ECONNRESET",e.request.emit("error",h),n.removeSocket(s)}};cr.prototype.removeSocket=function(e){var r=this.sockets.indexOf(e);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(s){n.request.onSocket(s)})}};function Lm(t,e){var r=this;cr.prototype.createSocket.call(r,t,function(n){var s=t.request.getHeader("host"),o=Hd({},r.options,{socket:n,servername:s?s.replace(/:.*$/,""):t.host}),i=rR.connect(0,o);r.sockets[r.sockets.indexOf(n)]=i,e(i)})}function Um(t,e,r){return typeof t=="string"?{host:t,port:e,localAddress:r}:t}function Hd(t){for(var e=1,r=arguments.length;e<r;++e){var n=arguments[e];if(typeof n=="object")for(var s=Object.keys(n),o=0,i=s.length;o<i;++o){var a=s[o];n[a]!==void 0&&(t[a]=n[a])}}return t}var zr;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?zr=function(){var t=Array.prototype.slice.call(arguments);typeof t[0]=="string"?t[0]="TUNNEL: "+t[0]:t.unshift("TUNNEL:"),console.error.apply(console,t)}:zr=function(){};xs.debug=zr});var qm=N(($1,$m)=>{$m.exports=zm()});var Gm=N(re=>{"use strict";var dR=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lR=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ca=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&dR(e,t,r);return lR(e,t),e},Ce=re&&re.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(re,"__esModule",{value:!0});re.HttpClient=re.isHttps=re.HttpClientResponse=re.HttpClientError=re.getProxyUrl=re.MediaTypes=re.Headers=re.HttpCodes=void 0;var sa=ca(I("http")),Vd=ca(I("https")),jm=ca(Mm()),oa=ca(qm()),Nt;(function(t){t[t.OK=200]="OK",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.ResourceMoved=302]="ResourceMoved",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.SwitchProxy=306]="SwitchProxy",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.TooManyRequests=429]="TooManyRequests",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout"})(Nt=re.HttpCodes||(re.HttpCodes={}));var Ke;(function(t){t.Accept="accept",t.ContentType="content-type"})(Ke=re.Headers||(re.Headers={}));var $r;(function(t){t.ApplicationJson="application/json"})($r=re.MediaTypes||(re.MediaTypes={}));function fR(t){let e=jm.getProxyUrl(new URL(t));return e?e.href:""}re.getProxyUrl=fR;var uR=[Nt.MovedPermanently,Nt.ResourceMoved,Nt.SeeOther,Nt.TemporaryRedirect,Nt.PermanentRedirect],hR=[Nt.BadGateway,Nt.ServiceUnavailable,Nt.GatewayTimeout],mR=["OPTIONS","GET","DELETE","HEAD"],pR=10,yR=5,Cs=class extends Error{constructor(e,r){super(e),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,Cs.prototype)}};re.HttpClientError=Cs;var aa=class{constructor(e){this.message=e}readBody(){return Ce(this,void 0,void 0,function*(){return new Promise(e=>Ce(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{e(r.toString())})}))})}};re.HttpClientResponse=aa;function gR(t){return new URL(t).protocol==="https:"}re.isHttps=gR;var Wd=class{constructor(e,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(e,r){return Ce(this,void 0,void 0,function*(){return this.request("OPTIONS",e,null,r||{})})}get(e,r){return Ce(this,void 0,void 0,function*(){return this.request("GET",e,null,r||{})})}del(e,r){return Ce(this,void 0,void 0,function*(){return this.request("DELETE",e,null,r||{})})}post(e,r,n){return Ce(this,void 0,void 0,function*(){return this.request("POST",e,r,n||{})})}patch(e,r,n){return Ce(this,void 0,void 0,function*(){return this.request("PATCH",e,r,n||{})})}put(e,r,n){return Ce(this,void 0,void 0,function*(){return this.request("PUT",e,r,n||{})})}head(e,r){return Ce(this,void 0,void 0,function*(){return this.request("HEAD",e,null,r||{})})}sendStream(e,r,n,s){return Ce(this,void 0,void 0,function*(){return this.request(e,r,n,s)})}getJson(e,r={}){return Ce(this,void 0,void 0,function*(){r[Ke.Accept]=this._getExistingOrDefaultHeader(r,Ke.Accept,$r.ApplicationJson);let n=yield this.get(e,r);return this._processResponse(n,this.requestOptions)})}postJson(e,r,n={}){return Ce(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[Ke.Accept]=this._getExistingOrDefaultHeader(n,Ke.Accept,$r.ApplicationJson),n[Ke.ContentType]=this._getExistingOrDefaultHeader(n,Ke.ContentType,$r.ApplicationJson);let o=yield this.post(e,s,n);return this._processResponse(o,this.requestOptions)})}putJson(e,r,n={}){return Ce(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[Ke.Accept]=this._getExistingOrDefaultHeader(n,Ke.Accept,$r.ApplicationJson),n[Ke.ContentType]=this._getExistingOrDefaultHeader(n,Ke.ContentType,$r.ApplicationJson);let o=yield this.put(e,s,n);return this._processResponse(o,this.requestOptions)})}patchJson(e,r,n={}){return Ce(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[Ke.Accept]=this._getExistingOrDefaultHeader(n,Ke.Accept,$r.ApplicationJson),n[Ke.ContentType]=this._getExistingOrDefaultHeader(n,Ke.ContentType,$r.ApplicationJson);let o=yield this.patch(e,s,n);return this._processResponse(o,this.requestOptions)})}request(e,r,n,s){return Ce(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(r),i=this._prepareRequest(e,o,s),a=this._allowRetries&&mR.includes(e)?this._maxRetries+1:1,d=0,c;do{if(c=yield this.requestRaw(i,n),c&&c.message&&c.message.statusCode===Nt.Unauthorized){let u;for(let h of this.handlers)if(h.canHandleAuthentication(c)){u=h;break}return u?u.handleAuthentication(this,i,n):c}let l=this._maxRedirects;for(;c.message.statusCode&&uR.includes(c.message.statusCode)&&this._allowRedirects&&l>0;){let u=c.message.headers.location;if(!u)break;let h=new URL(u);if(o.protocol==="https:"&&o.protocol!==h.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield c.readBody(),h.hostname!==o.hostname)for(let w in s)w.toLowerCase()==="authorization"&&delete s[w];i=this._prepareRequest(e,h,s),c=yield this.requestRaw(i,n),l--}if(!c.message.statusCode||!hR.includes(c.message.statusCode))return c;d+=1,d<a&&(yield c.readBody(),yield this._performExponentialBackoff(d))}while(d<a);return c})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,r){return Ce(this,void 0,void 0,function*(){return new Promise((n,s)=>{function o(i,a){i?s(i):a?n(a):s(new Error("Unknown error"))}this.requestRawWithCallback(e,r,o)})})}requestRawWithCallback(e,r,n){typeof r=="string"&&(e.options.headers||(e.options.headers={}),e.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let s=!1;function o(d,c){s||(s=!0,n(d,c))}let i=e.httpModule.request(e.options,d=>{let c=new aa(d);o(void 0,c)}),a;i.on("socket",d=>{a=d}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),o(new Error(`Request timeout: ${e.options.path}`))}),i.on("error",function(d){o(d)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(e){let r=new URL(e);return this._getAgent(r)}_prepareRequest(e,r,n){let s={};s.parsedUrl=r;let o=s.parsedUrl.protocol==="https:";s.httpModule=o?Vd:sa;let i=o?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):i,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=e,s.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(s.options);return s}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},ia(this.requestOptions.headers),ia(e||{})):ia(e||{})}_getExistingOrDefaultHeader(e,r,n){let s;return this.requestOptions&&this.requestOptions.headers&&(s=ia(this.requestOptions.headers)[r]),e[r]||s||n}_getAgent(e){let r,n=jm.getProxyUrl(e),s=n&&n.hostname;if(this._keepAlive&&s&&(r=this._proxyAgent),this._keepAlive&&!s&&(r=this._agent),r)return r;let o=e.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||sa.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},d,c=n.protocol==="https:";o?d=c?oa.httpsOverHttps:oa.httpsOverHttp:d=c?oa.httpOverHttps:oa.httpOverHttp,r=d(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=o?new Vd.Agent(a):new sa.Agent(a),this._agent=r}return r||(r=o?Vd.globalAgent:sa.globalAgent),o&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(e){return Ce(this,void 0,void 0,function*(){e=Math.min(pR,e);let r=yR*Math.pow(2,e);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(e,r){return Ce(this,void 0,void 0,function*(){return new Promise((n,s)=>Ce(this,void 0,void 0,function*(){let o=e.message.statusCode||0,i={statusCode:o,result:null,headers:{}};o===Nt.NotFound&&n(i);function a(l,u){if(typeof u=="string"){let h=new Date(u);if(!isNaN(h.valueOf()))return h}return u}let d,c;try{c=yield e.readBody(),c&&c.length>0&&(r&&r.deserializeDates?d=JSON.parse(c,a):d=JSON.parse(c),i.result=d),i.headers=e.message.headers}catch{}if(o>299){let l;d&&d.message?l=d.message:c&&c.length>0?l=c:l=`Failed request: (${o})`;let u=new Cs(l,o);u.result=i.result,s(u)}else n(i)}))})}};re.HttpClient=Wd;var ia=t=>Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{})});var Km=N(Mt=>{"use strict";var Zd=Mt&&Mt.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.PersonalAccessTokenCredentialHandler=Mt.BearerCredentialHandler=Mt.BasicCredentialHandler=void 0;var Yd=class{constructor(e,r){this.username=e,this.password=r}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Zd(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Mt.BasicCredentialHandler=Yd;var Xd=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Zd(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Mt.BearerCredentialHandler=Xd;var Qd=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Zd(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Mt.PersonalAccessTokenCredentialHandler=Qd});var Wm=N(Ss=>{"use strict";var Hm=Ss&&Ss.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.OidcClient=void 0;var ER=Gm(),wR=Km(),Vm=Jd(),qr=class{static createHttpClient(e=!0,r=10){let n={allowRetries:e,maxRetries:r};return new ER.HttpClient("actions/oidc-client",[new wR.BearerCredentialHandler(qr.getRequestToken())],n)}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var r;return Hm(this,void 0,void 0,function*(){let o=(r=(yield qr.createHttpClient().getJson(e).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(e){return Hm(this,void 0,void 0,function*(){try{let r=qr.getIDTokenUrl();if(e){let s=encodeURIComponent(e);r=`${r}&audience=${s}`}Vm.debug(`ID token url is ${r}`);let n=yield qr.getCall(r);return Vm.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Ss.OidcClient=qr});var nl=N(He=>{"use strict";var el=He&&He.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(He,"__esModule",{value:!0});He.summary=He.markdownSummary=He.SUMMARY_DOCS_URL=He.SUMMARY_ENV_VAR=void 0;var xR=I("os"),tl=I("fs"),{access:CR,appendFile:SR,writeFile:bR}=tl.promises;He.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";He.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var rl=class{constructor(){this._buffer=""}filePath(){return el(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let e=process.env[He.SUMMARY_ENV_VAR];if(!e)throw new Error(`Unable to find environment variable for $${He.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield CR(e,tl.constants.R_OK|tl.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}return this._filePath=e,this._filePath})}wrap(e,r,n={}){let s=Object.entries(n).map(([o,i])=>` ${o}="${i}"`).join("");return r?`<${e}${s}>${r}</${e}>`:`<${e}${s}>`}write(e){return el(this,void 0,void 0,function*(){let r=!!(e!=null&&e.overwrite),n=yield this.filePath();return yield(r?bR:SR)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return el(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(e,r=!1){return this._buffer+=e,r?this.addEOL():this}addEOL(){return this.addRaw(xR.EOL)}addCodeBlock(e,r){let n=Object.assign({},r&&{lang:r}),s=this.wrap("pre",this.wrap("code",e),n);return this.addRaw(s).addEOL()}addList(e,r=!1){let n=r?"ol":"ul",s=e.map(i=>this.wrap("li",i)).join(""),o=this.wrap(n,s);return this.addRaw(o).addEOL()}addTable(e){let r=e.map(s=>{let o=s.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:d,colspan:c,rowspan:l}=i,u=a?"th":"td",h=Object.assign(Object.assign({},c&&{colspan:c}),l&&{rowspan:l});return this.wrap(u,d,h)}).join("");return this.wrap("tr",o)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(e,r){let n=this.wrap("details",this.wrap("summary",e)+r);return this.addRaw(n).addEOL()}addImage(e,r,n){let{width:s,height:o}=n||{},i=Object.assign(Object.assign({},s&&{width:s}),o&&{height:o}),a=this.wrap("img",null,Object.assign({src:e,alt:r},i));return this.addRaw(a).addEOL()}addHeading(e,r){let n=`h${r}`,s=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",o=this.wrap(s,e);return this.addRaw(o).addEOL()}addSeparator(){let e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){let e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,r){let n=Object.assign({},r&&{cite:r}),s=this.wrap("blockquote",e,n);return this.addRaw(s).addEOL()}addLink(e,r){let n=this.wrap("a",e,{href:r});return this.addRaw(n).addEOL()}},Ym=new rl;He.markdownSummary=Ym;He.summary=Ym});var Xm=N(Ve=>{"use strict";var _R=Ve&&Ve.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),RR=Ve&&Ve.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AR=Ve&&Ve.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&_R(e,t,r);return RR(e,t),e};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.toPlatformPath=Ve.toWin32Path=Ve.toPosixPath=void 0;var kR=AR(I("path"));function TR(t){return t.replace(/[\\]/g,"/")}Ve.toPosixPath=TR;function NR(t){return t.replace(/[/]/g,"\\")}Ve.toWin32Path=NR;function OR(t){return t.replace(/[/\\]/g,kR.sep)}Ve.toPlatformPath=OR});var Jd=N(P=>{"use strict";var IR=P&&P.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vR=P&&P.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qm=P&&P.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&IR(e,t,r);return vR(e,t),e},Zm=P&&P.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(P,"__esModule",{value:!0});P.getIDToken=P.getState=P.saveState=P.group=P.endGroup=P.startGroup=P.info=P.notice=P.warning=P.error=P.debug=P.isDebug=P.setFailed=P.setCommandEcho=P.setOutput=P.getBooleanInput=P.getMultilineInput=P.getInput=P.addPath=P.setSecret=P.exportVariable=P.ExitCode=void 0;var mt=fm(),qn=Dm(),bs=Zi(),Jm=Qm(I("os")),PR=Qm(I("path")),DR=Wm(),ep;(function(t){t[t.Success=0]="Success",t[t.Failure=1]="Failure"})(ep=P.ExitCode||(P.ExitCode={}));function BR(t,e){let r=bs.toCommandValue(e);if(process.env[t]=r,process.env.GITHUB_ENV||"")return qn.issueFileCommand("ENV",qn.prepareKeyValueMessage(t,e));mt.issueCommand("set-env",{name:t},r)}P.exportVariable=BR;function MR(t){mt.issueCommand("add-mask",{},t)}P.setSecret=MR;function FR(t){process.env.GITHUB_PATH||""?qn.issueFileCommand("PATH",t):mt.issueCommand("add-path",{},t),process.env.PATH=`${t}${PR.delimiter}${process.env.PATH}`}P.addPath=FR;function sl(t,e){let r=process.env[`INPUT_${t.replace(/ /g,"_").toUpperCase()}`]||"";if(e&&e.required&&!r)throw new Error(`Input required and not supplied: ${t}`);return e&&e.trimWhitespace===!1?r:r.trim()}P.getInput=sl;function LR(t,e){let r=sl(t,e).split(`
`).filter(n=>n!=="");return e&&e.trimWhitespace===!1?r:r.map(n=>n.trim())}P.getMultilineInput=LR;function UR(t,e){let r=["true","True","TRUE"],n=["false","False","FALSE"],s=sl(t,e);if(r.includes(s))return!0;if(n.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${t}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}P.getBooleanInput=UR;function zR(t,e){if(process.env.GITHUB_OUTPUT||"")return qn.issueFileCommand("OUTPUT",qn.prepareKeyValueMessage(t,e));process.stdout.write(Jm.EOL),mt.issueCommand("set-output",{name:t},bs.toCommandValue(e))}P.setOutput=zR;function $R(t){mt.issue("echo",t?"on":"off")}P.setCommandEcho=$R;function qR(t){process.exitCode=ep.Failure,tp(t)}P.setFailed=qR;function jR(){return process.env.RUNNER_DEBUG==="1"}P.isDebug=jR;function GR(t){mt.issueCommand("debug",{},t)}P.debug=GR;function tp(t,e={}){mt.issueCommand("error",bs.toCommandProperties(e),t instanceof Error?t.toString():t)}P.error=tp;function KR(t,e={}){mt.issueCommand("warning",bs.toCommandProperties(e),t instanceof Error?t.toString():t)}P.warning=KR;function HR(t,e={}){mt.issueCommand("notice",bs.toCommandProperties(e),t instanceof Error?t.toString():t)}P.notice=HR;function VR(t){process.stdout.write(t+Jm.EOL)}P.info=VR;function rp(t){mt.issue("group",t)}P.startGroup=rp;function np(){mt.issue("endgroup")}P.endGroup=np;function WR(t,e){return Zm(this,void 0,void 0,function*(){rp(t);let r;try{r=yield e()}finally{np()}return r})}P.group=WR;function YR(t,e){if(process.env.GITHUB_STATE||"")return qn.issueFileCommand("STATE",qn.prepareKeyValueMessage(t,e));mt.issueCommand("save-state",{name:t},bs.toCommandValue(e))}P.saveState=YR;function XR(t){return process.env[`STATE_${t}`]||""}P.getState=XR;function QR(t){return Zm(this,void 0,void 0,function*(){return yield DR.OidcClient.getIDToken(t)})}P.getIDToken=QR;var ZR=nl();Object.defineProperty(P,"summary",{enumerable:!0,get:function(){return ZR.summary}});var JR=nl();Object.defineProperty(P,"markdownSummary",{enumerable:!0,get:function(){return JR.markdownSummary}});var ol=Xm();Object.defineProperty(P,"toPosixPath",{enumerable:!0,get:function(){return ol.toPosixPath}});Object.defineProperty(P,"toWin32Path",{enumerable:!0,get:function(){return ol.toWin32Path}});Object.defineProperty(P,"toPlatformPath",{enumerable:!0,get:function(){return ol.toPlatformPath}})});var pl=N(dr=>{"use strict";var _p=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",vA=_p+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Rp="["+_p+"]["+vA+"]*",PA=new RegExp("^"+Rp+"$"),DA=function(t,e){let r=[],n=e.exec(t);for(;n;){let s=[];s.startIndex=e.lastIndex-n[0].length;let o=n.length;for(let i=0;i<o;i++)s.push(n[i]);r.push(s),n=e.exec(t)}return r},BA=function(t){let e=PA.exec(t);return!(e===null||typeof e>"u")};dr.isExist=function(t){return typeof t<"u"};dr.isEmptyObject=function(t){return Object.keys(t).length===0};dr.merge=function(t,e,r){if(e){let n=Object.keys(e),s=n.length;for(let o=0;o<s;o++)r==="strict"?t[n[o]]=[e[n[o]]]:t[n[o]]=e[n[o]]}};dr.getValue=function(t){return dr.isExist(t)?t:""};dr.isName=BA;dr.getAllMatches=DA;dr.nameRegexp=Rp});var gl=N(Op=>{"use strict";var yl=pl(),MA={allowBooleanAttributes:!1,unpairedTags:[]};Op.validate=function(t,e){e=Object.assign({},MA,e);let r=[],n=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=kp(t,o),o.err)return o}else if(t[o]==="<"){let i=o;if(o++,t[o]==="!"){o=Tp(t,o);continue}else{let a=!1;t[o]==="/"&&(a=!0,o++);let d="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)d+=t[o];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),o--),!GA(d)){let u;return d.trim().length===0?u="Invalid space after '<'.":u="Tag '"+d+"' is an invalid name.",we("InvalidTag",u,Ye(t,o))}let c=UA(t,o);if(c===!1)return we("InvalidAttr","Attributes for '"+d+"' have open quote.",Ye(t,o));let l=c.value;if(o=c.index,l[l.length-1]==="/"){let u=o-l.length;l=l.substring(0,l.length-1);let h=Np(l,e);if(h===!0)n=!0;else return we(h.err.code,h.err.msg,Ye(t,u+h.err.line))}else if(a)if(c.tagClosed){if(l.trim().length>0)return we("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",Ye(t,i));{let u=r.pop();if(d!==u.tagName){let h=Ye(t,u.tagStartPos);return we("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+d+"'.",Ye(t,i))}r.length==0&&(s=!0)}}else return we("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",Ye(t,o));else{let u=Np(l,e);if(u!==!0)return we(u.err.code,u.err.msg,Ye(t,o-l.length+u.err.line));if(s===!0)return we("InvalidXml","Multiple possible root nodes found.",Ye(t,o));e.unpairedTags.indexOf(d)!==-1||r.push({tagName:d,tagStartPos:i}),n=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=Tp(t,o);continue}else if(t[o+1]==="?"){if(o=kp(t,++o),o.err)return o}else break;else if(t[o]==="&"){let u=qA(t,o);if(u==-1)return we("InvalidChar","char '&' is not expected.",Ye(t,o));o=u}else if(s===!0&&!Ap(t[o]))return we("InvalidXml","Extra text at the end",Ye(t,o));t[o]==="<"&&o--}}else{if(Ap(t[o]))continue;return we("InvalidChar","char '"+t[o]+"' is not expected.",Ye(t,o))}if(n){if(r.length==1)return we("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Ye(t,r[0].tagStartPos));if(r.length>0)return we("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return we("InvalidXml","Start tag expected.",1);return!0};function Ap(t){return t===" "||t==="	"||t===`
`||t==="\r"}function kp(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let n=t.substr(r,e-r);if(e>5&&n==="xml")return we("InvalidXml","XML declaration allowed only at the start of the document.",Ye(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Tp(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var FA='"',LA="'";function UA(t,e){let r="",n="",s=!1;for(;e<t.length;e++){if(t[e]===FA||t[e]===LA)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){s=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:s}}var zA=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Np(t,e){let r=yl.getAllMatches(t,zA),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return we("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Wo(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return we("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Wo(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return we("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Wo(r[s]));let o=r[s][2];if(!jA(o))return we("InvalidAttr","Attribute '"+o+"' is an invalid name.",Wo(r[s]));if(!n.hasOwnProperty(o))n[o]=1;else return we("InvalidAttr","Attribute '"+o+"' is repeated.",Wo(r[s]))}return!0}function $A(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function qA(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,$A(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function we(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function jA(t){return yl.isName(t)}function GA(t){return yl.isName(t)}function Ye(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Wo(t){return t.startIndex+t[1].length}});var vp=N(El=>{var Ip={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},KA=function(t){return Object.assign({},Ip,t)};El.buildOptions=KA;El.defaultOptions=Ip});var Dp=N((cF,Pp)=>{"use strict";var wl=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}};Pp.exports=wl});var Mp=N((dF,Bp)=>{function HA(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,s=!1,o=!1,i=!1,a="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y")e+=7,o=!0;else if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N")e+=9;else if(t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-")i=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,n--):(o&&(WA(a,r),o=!1),n--),n===0)break}else t[e]==="["?s=!0:a+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}var VA=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function WA(t,e){let r=VA.exec(t);r&&(e[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}Bp.exports=HA});var Lp=N((lF,Fp)=>{var YA=/^[-+]?0x[a-fA-F0-9]+$/,XA=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var QA={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ZA(t,e={}){if(e=Object.assign({},QA,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&YA.test(r))return Number.parseInt(r,16);{let n=XA.exec(r);if(n){let s=n[1],o=n[2],i=JA(n[3]),a=n[4]||n[6];if(!e.leadingZeros&&o.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&o.length>0&&!s&&r[1]!==".")return t;{let d=Number(r),c=""+d;return c.search(/[eE]/)!==-1||a?e.eNotation?d:t:r.indexOf(".")!==-1?c==="0"&&i===""||c===i||s&&c==="-"+i?d:t:o?i===c||s+i===c?d:t:r===c||r===s+c?d:t}}else return t}}function JA(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}Fp.exports=ZA});var zp=N((uF,Up)=>{"use strict";var bl=pl(),Yo=Dp(),ek=Mp(),tk=Lp(),fF="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,bl.nameRegexp),xl=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=rk,this.parseXml=ak,this.parseTextData=nk,this.resolveNameSpace=sk,this.buildAttributesMap=ik,this.isItStopNode=lk,this.replaceEntitiesValue=ck,this.readStopNodeData=uk,this.saveTextToParentTag=dk}};function rk(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function nk(t,e,r,n,s,o,i){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){i||(t=this.replaceEntitiesValue(t));let a=this.options.tagValueProcessor(e,t,r,s,o);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?Sl(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Sl(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function sk(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var ok=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ik(t,e){if(!this.options.ignoreAttributes&&typeof t=="string"){let r=bl.getAllMatches(t,ok),n=r.length,s={};for(let o=0;o<n;o++){let i=this.resolveNameSpace(r[o][1]),a=r[o][4],d=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);let c=this.options.attributeValueProcessor(i,a,e);c==null?s[d]=a:typeof c!=typeof a||c!==a?s[d]=c:s[d]=Sl(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=s,o}return s}}var ak=function(t){t=t.replace(/\r\n?/g,`
`);let e=new Yo("!xml"),r=e,n="",s="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){let a=Kn(t,">",o,"Closing Tag is not closed."),d=t.substring(o+2,a).trim();if(this.options.removeNSPrefix){let c=d.indexOf(":");c!==-1&&(d=d.substr(c+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&(n=this.saveTextToParentTag(n,r,s)),s=s.substr(0,s.lastIndexOf(".")),r=this.tagsNodeStack.pop(),n="",o=a}else if(t[o+1]==="?"){let a=Cl(t,o,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let d=new Yo(a.tagName);d.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(d[":@"]=this.buildAttributesMap(a.tagExp,s)),r.addChild(d)}o=a.closeIndex+1}else if(t.substr(o+1,3)==="!--"){let a=Kn(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let d=t.substring(o+4,a-2);n=this.saveTextToParentTag(n,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}o=a}else if(t.substr(o+1,2)==="!D"){let a=ek(t,o);this.docTypeEntities=a.entities,o=a.i}else if(t.substr(o+1,2)==="!["){let a=Kn(t,"]]>",o,"CDATA is not closed.")-2,d=t.substring(o+9,a);if(n=this.saveTextToParentTag(n,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]);else{let c=this.parseTextData(d,r.tagname,s,!0,!1,!0);c==null&&(c=""),r.add(this.options.textNodeName,c)}o=a+2}else{let a=Cl(t,o,this.options.removeNSPrefix),d=a.tagName,c=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,s,!1)),d!==e.tagname&&(s+=s?"."+d:d);let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,s,d)){let w="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)o=a.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)o=a.closeIndex;else{let b=this.readStopNodeData(t,d,u+1);if(!b)throw new Error(`Unexpected end of ${d}`);o=b.i,w=b.tagContent}let S=new Yo(d);d!==c&&l&&(S[":@"]=this.buildAttributesMap(c,s)),w&&(w=this.parseTextData(w,d,s,!0,l,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),S.add(this.options.textNodeName,w),r.addChild(S)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),c=d):c=c.substr(0,c.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));let w=new Yo(d);d!==c&&l&&(w[":@"]=this.buildAttributesMap(c,s)),s=s.substr(0,s.lastIndexOf(".")),r.addChild(w)}else{let w=new Yo(d);this.tagsNodeStack.push(r),d!==c&&l&&(w[":@"]=this.buildAttributesMap(c,s)),r.addChild(w),r=w}n="",o=u}}else n+=t[o];return e.child},ck=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function dk(t,e,r,n){return t&&(n===void 0&&(n=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function lk(t,e,r){let n="*."+r;for(let s in t){let o=t[s];if(n===o||e===o)return!0}return!1}function fk(t,e,r=">"){let n,s="";for(let o=e;o<t.length;o++){let i=t[o];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(t[o+1]===r[1])return{data:s,index:o}}else return{data:s,index:o};else i==="	"&&(i=" ");s+=i}}function Kn(t,e,r,n){let s=t.indexOf(e,r);if(s===-1)throw new Error(n);return s+e.length-1}function Cl(t,e,r,n=">"){let s=fk(t,e+1,n);if(!s)return;let o=s.data,i=s.index,a=o.search(/\s/),d=o,c=!0;if(a!==-1&&(d=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),r){let l=d.indexOf(":");l!==-1&&(d=d.substr(l+1),c=d!==s.data.substr(l+1))}return{tagName:d,tagExp:o,closeIndex:i,attrExpPresent:c}}function uk(t,e,r){let n=r,s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let o=Kn(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(s--,s===0))return{tagContent:t.substring(n,r),i:o};r=o}else if(t[r+1]==="?")r=Kn(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=Kn(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=Kn(t,"]]>",r,"StopNode is not closed.")-2;else{let o=Cl(t,r,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,r=o.closeIndex)}}function Sl(t,e,r){if(e&&typeof t=="string"){let n=t.trim();return n==="true"?!0:n==="false"?!1:tk(t,r)}else return bl.isExist(t)?t:""}Up.exports=xl});var jp=N(qp=>{"use strict";function hk(t,e){return $p(t,e)}function $p(t,e,r){let n,s={};for(let o=0;o<t.length;o++){let i=t[o],a=mk(i),d="";if(r===void 0?d=a:d=r+"."+a,a===e.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let c=$p(i[a],e,d),l=yk(c,e);i[":@"]?pk(c,i[":@"],d,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(c)):e.isArray(a,d,l)?s[a]=[c]:s[a]=c}}}return typeof n=="string"?n.length>0&&(s[e.textNodeName]=n):n!==void 0&&(s[e.textNodeName]=n),s}function mk(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function pk(t,e,r,n){if(e){let s=Object.keys(e),o=s.length;for(let i=0;i<o;i++){let a=s[i];n.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function yk(t,e){let r=Object.keys(t).length;return!!(r===0||r===1&&t[e.textNodeName])}qp.prettify=hk});var Kp=N((mF,Gp)=>{var{buildOptions:gk}=vp(),Ek=zp(),{prettify:wk}=jp(),xk=gl(),_l=class{constructor(e){this.externalEntities={},this.options=gk(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=xk.validate(e,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let n=new Ek(this.options);n.addExternalEntities(this.externalEntities);let s=n.parseXml(e);return this.options.preserveOrder||s===void 0?s:wk(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};Gp.exports=_l});var Xp=N((pF,Yp)=>{var Ck=`
`;function Sk(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=Ck),Vp(t,e,"",r)}function Vp(t,e,r,n){let s="",o=!1;for(let i=0;i<t.length;i++){let a=t[i],d=bk(a),c="";if(r.length===0?c=d:c=`${r}.${d}`,d===e.textNodeName){let S=a[d];_k(c,e)||(S=e.tagValueProcessor(d,S),S=Wp(S,e)),o&&(s+=n),s+=S,o=!1;continue}else if(d===e.cdataPropName){o&&(s+=n),s+=`<![CDATA[${a[d][0][e.textNodeName]}]]>`,o=!1;continue}else if(d===e.commentPropName){s+=n+`<!--${a[d][0][e.textNodeName]}-->`,o=!0;continue}else if(d[0]==="?"){let S=Hp(a[":@"],e),b=d==="?xml"?"":n,R=a[d][0][e.textNodeName];R=R.length!==0?" "+R:"",s+=b+`<${d}${R}${S}?>`,o=!0;continue}let l=n;l!==""&&(l+=e.indentBy);let u=Hp(a[":@"],e),h=n+`<${d}${u}`,w=Vp(a[d],e,c,l);e.unpairedTags.indexOf(d)!==-1?e.suppressUnpairedNode?s+=h+">":s+=h+"/>":(!w||w.length===0)&&e.suppressEmptyNode?s+=h+"/>":w&&w.endsWith(">")?s+=h+`>${w}${n}</${d}>`:(s+=h+">",w&&n!==""&&(w.includes("/>")||w.includes("</"))?s+=n+e.indentBy+w+n:s+=w,s+=`</${d}>`),o=!0}return s}function bk(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function Hp(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){let s=e.attributeValueProcessor(n,t[n]);s=Wp(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function _k(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function Wp(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let n=e.entities[r];t=t.replace(n.regex,n.val)}return t}Yp.exports=Sk});var Zp=N((yF,Qp)=>{"use strict";var Rk=Xp(),Ak={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Wr(t){this.options=Object.assign({},Ak,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Nk),this.processTextOrObjNode=kk,this.options.format?(this.indentate=Tk,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Wr.prototype.build=function(t){return this.options.preserveOrder?Rk(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Wr.prototype.j2x=function(t,e){let r="",n="";for(let s in t)if(!(typeof t[s]>"u"))if(t[s]===null)s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)n+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){let o=this.isAttribute(s);if(o)r+=this.buildAttrPairStr(o,""+t[s]);else if(s===this.options.textNodeName){let i=this.options.tagValueProcessor(s,""+t[s]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){let o=t[s].length;for(let i=0;i<o;i++){let a=t[s][i];typeof a>"u"||(a===null?s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof a=="object"?n+=this.processTextOrObjNode(a,s,e):n+=this.buildTextValNode(a,s,"",e))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){let o=Object.keys(t[s]),i=o.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(o[a],""+t[s][o[a]])}else n+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:n}};Wr.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function kk(t,e,r){let n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}Wr.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),r&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+o+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+o+this.tagEndChar+t+this.indentate(n)+s}};Wr.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Wr.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}};Wr.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function Tk(t){return this.options.indentBy.repeat(t)}function Nk(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}Qp.exports=Wr});var Rl=N((gF,Jp)=>{"use strict";var Ok=gl(),Ik=Kp(),vk=Zp();Jp.exports={XMLParser:Ik,XMLValidator:Ok,XMLBuilder:vk}});var Ml={};ys(Ml,{__assign:()=>Dl,__asyncDelegator:()=>sT,__asyncGenerator:()=>nT,__asyncValues:()=>oT,__await:()=>Qo,__awaiter:()=>Qk,__classPrivateFieldGet:()=>dT,__classPrivateFieldSet:()=>lT,__createBinding:()=>Jk,__decorate:()=>Wk,__exportStar:()=>eT,__extends:()=>Hk,__generator:()=>Zk,__importDefault:()=>cT,__importStar:()=>aT,__makeTemplateObject:()=>iT,__metadata:()=>Xk,__param:()=>Yk,__read:()=>uy,__rest:()=>Vk,__spread:()=>tT,__spreadArrays:()=>rT,__values:()=>Bl});function Hk(t,e){Pl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Vk(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Wk(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function Yk(t,e){return function(r,n){e(r,n,t)}}function Xk(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Qk(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})}function Zk(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],s=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Jk(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function eT(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Bl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uy(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function tT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(uy(arguments[e]));return t}function rT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function Qo(t){return this instanceof Qo?(this.v=t,this):new Qo(t)}function nT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(h){n[h]&&(s[h]=function(w){return new Promise(function(S,b){o.push([h,w,S,b])>1||a(h,w)})})}function a(h,w){try{d(n[h](w))}catch(S){u(o[0][3],S)}}function d(h){h.value instanceof Qo?Promise.resolve(h.value.v).then(c,l):u(o[0][2],h)}function c(h){a("next",h)}function l(h){a("throw",h)}function u(h,w){h(w),o.shift(),o.length&&a(o[0][0],o[0][1])}}function sT(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:Qo(t[s](i)),done:s==="return"}:o?o(i):i}:o}}function oT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Bl=="function"?Bl(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,d){i=t[o](i),s(a,d,i.done,i.value)})}}function s(o,i,a,d){Promise.resolve(d).then(function(c){o({value:c,done:a})},i)}}function iT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function aT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function cT(t){return t&&t.__esModule?t:{default:t}}function dT(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function lT(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Pl,Dl,Fl=ge(()=>{Pl=function(t,e){return Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Pl(t,e)};Dl=function(){return Dl=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Dl.apply(this,arguments)}});var hy,my,py=ge(()=>{hy=t=>{let e=[];for(let r=0,n=t.length;r<n;r++){let s=t.charCodeAt(r);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192,s&63|128);else if(r+1<t.length&&(s&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320){let o=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023);e.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else e.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(e)},my=t=>{let e="";for(let r=0,n=t.length;r<n;r++){let s=t[r];if(s<128)e+=String.fromCharCode(s);else if(192<=s&&s<224){let o=t[++r];e+=String.fromCharCode((s&31)<<6|o&63)}else if(240<=s&&s<365){let i="%"+[s,t[++r],t[++r],t[++r]].map(a=>a.toString(16)).join("%");e+=decodeURIComponent(i)}else e+=String.fromCharCode((s&15)<<12|(t[++r]&63)<<6|t[++r]&63)}return e}});function yy(t){return new TextEncoder().encode(t)}function gy(t){return new TextDecoder("utf-8").decode(t)}var Ey=ge(()=>{});var wy={};ys(wy,{fromUtf8:()=>fT,toUtf8:()=>uT});var fT,uT,xy=ge(()=>{py();Ey();fT=t=>typeof TextEncoder=="function"?yy(t):hy(t),uT=t=>typeof TextDecoder=="function"?gy(t):my(t)});var Cy=N(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.convertToBuffer=void 0;var hT=(xy(),gs(wy)),mT=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:hT.fromUtf8;function pT(t){return t instanceof Uint8Array?t:typeof t=="string"?mT(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}ya.convertToBuffer=pT});var Sy=N(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.isEmptyData=void 0;function yT(t){return typeof t=="string"?t.length===0:t.byteLength===0}ga.isEmptyData=yT});var by=N(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.numToUint8=void 0;function gT(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}Ea.numToUint8=gT});var _y=N(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.uint32ArrayFrom=void 0;function ET(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}wa.uint32ArrayFrom=ET});var Zo=N($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.uint32ArrayFrom=$t.numToUint8=$t.isEmptyData=$t.convertToBuffer=void 0;var wT=Cy();Object.defineProperty($t,"convertToBuffer",{enumerable:!0,get:function(){return wT.convertToBuffer}});var xT=Sy();Object.defineProperty($t,"isEmptyData",{enumerable:!0,get:function(){return xT.isEmptyData}});var CT=by();Object.defineProperty($t,"numToUint8",{enumerable:!0,get:function(){return CT.numToUint8}});var ST=_y();Object.defineProperty($t,"uint32ArrayFrom",{enumerable:!0,get:function(){return ST.uint32ArrayFrom}})});var ky=N(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.AwsCrc32=void 0;var Ry=(Fl(),gs(Ml)),Ll=Zo(),Ay=Jo(),bT=function(){function t(){this.crc32=new Ay.Crc32}return t.prototype.update=function(e){(0,Ll.isEmptyData)(e)||this.crc32.update((0,Ll.convertToBuffer)(e))},t.prototype.digest=function(){return Ry.__awaiter(this,void 0,void 0,function(){return Ry.__generator(this,function(e){return[2,(0,Ll.numToUint8)(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new Ay.Crc32},t}();xa.AwsCrc32=bT});var Jo=N(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.AwsCrc32=Yr.Crc32=Yr.crc32=void 0;var _T=(Fl(),gs(Ml)),RT=Zo();function AT(t){return new Ty().update(t).digest()}Yr.crc32=AT;var Ty=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=_T.__values(e),o=s.next();!o.done;o=s.next()){var i=o.value;this.checksum=this.checksum>>>8^TT[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();Yr.Crc32=Ty;var kT=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],TT=(0,RT.uint32ArrayFrom)(kT),NT=ky();Object.defineProperty(Yr,"AwsCrc32",{enumerable:!0,get:function(){return NT.AwsCrc32}})});var ql={};ys(ql,{__assign:()=>zl,__asyncDelegator:()=>qT,__asyncGenerator:()=>$T,__asyncValues:()=>jT,__await:()=>ei,__awaiter:()=>BT,__classPrivateFieldGet:()=>VT,__classPrivateFieldSet:()=>WT,__createBinding:()=>FT,__decorate:()=>vT,__exportStar:()=>LT,__extends:()=>OT,__generator:()=>MT,__importDefault:()=>HT,__importStar:()=>KT,__makeTemplateObject:()=>GT,__metadata:()=>DT,__param:()=>PT,__read:()=>Ny,__rest:()=>IT,__spread:()=>UT,__spreadArrays:()=>zT,__values:()=>$l});function OT(t,e){Ul(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function IT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function vT(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function PT(t,e){return function(r,n){e(r,n,t)}}function DT(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function BT(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})}function MT(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],s=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function FT(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function LT(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function $l(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ny(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function UT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ny(arguments[e]));return t}function zT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function ei(t){return this instanceof ei?(this.v=t,this):new ei(t)}function $T(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(h){n[h]&&(s[h]=function(w){return new Promise(function(S,b){o.push([h,w,S,b])>1||a(h,w)})})}function a(h,w){try{d(n[h](w))}catch(S){u(o[0][3],S)}}function d(h){h.value instanceof ei?Promise.resolve(h.value.v).then(c,l):u(o[0][2],h)}function c(h){a("next",h)}function l(h){a("throw",h)}function u(h,w){h(w),o.shift(),o.length&&a(o[0][0],o[0][1])}}function qT(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:ei(t[s](i)),done:s==="return"}:o?o(i):i}:o}}function jT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof $l=="function"?$l(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,d){i=t[o](i),s(a,d,i.done,i.value)})}}function s(o,i,a,d){Promise.resolve(d).then(function(c){o({value:c,done:a})},i)}}function GT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function KT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function HT(t){return t&&t.__esModule?t:{default:t}}function VT(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function WT(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Ul,zl,jl=ge(()=>{Ul=function(t,e){return Ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Ul(t,e)};zl=function(){return zl=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zl.apply(this,arguments)}});var vy=N(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.AwsCrc32c=void 0;var Oy=(jl(),gs(ql)),Gl=Zo(),Iy=Kl(),YT=function(){function t(){this.crc32c=new Iy.Crc32c}return t.prototype.update=function(e){(0,Gl.isEmptyData)(e)||this.crc32c.update((0,Gl.convertToBuffer)(e))},t.prototype.digest=function(){return Oy.__awaiter(this,void 0,void 0,function(){return Oy.__generator(this,function(e){return[2,(0,Gl.numToUint8)(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new Iy.Crc32c},t}();Ca.AwsCrc32c=YT});var Kl=N(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.AwsCrc32c=Xr.Crc32c=Xr.crc32c=void 0;var XT=(jl(),gs(ql)),QT=Zo();function ZT(t){return new Py().update(t).digest()}Xr.crc32c=ZT;var Py=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=XT.__values(e),o=s.next();!o.done;o=s.next()){var i=o.value;this.checksum=this.checksum>>>8^eN[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();Xr.Crc32c=Py;var JT=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],eN=(0,QT.uint32ArrayFrom)(JT),tN=vy();Object.defineProperty(Xr,"AwsCrc32c",{enumerable:!0,get:function(){return tN.AwsCrc32c}})});var mo=N((SX,aS)=>{"use strict";var iS=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);aS.exports=t=>t?Object.keys(t).map(e=>[iS.has(e)?iS.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var Ic=N((bX,gS)=>{"use strict";var cS=typeof process=="object"&&process?process:{stdout:null,stderr:null},sP=I("events"),dS=I("stream"),oP=I("string_decoder"),lS=oP.StringDecoder,xr=Symbol("EOF"),Cr=Symbol("maybeEmitEnd"),kn=Symbol("emittedEnd"),Rc=Symbol("emittingEnd"),ki=Symbol("emittedError"),Ac=Symbol("closed"),fS=Symbol("read"),kc=Symbol("flush"),uS=Symbol("flushChunk"),tt=Symbol("encoding"),Sr=Symbol("decoder"),Tc=Symbol("flowing"),Ti=Symbol("paused"),po=Symbol("resume"),pe=Symbol("buffer"),tr=Symbol("pipes"),Ae=Symbol("bufferLength"),pu=Symbol("bufferPush"),yu=Symbol("bufferShift"),Be=Symbol("objectMode"),ye=Symbol("destroyed"),gu=Symbol("error"),Eu=Symbol("emitData"),hS=Symbol("emitEnd"),wu=Symbol("emitEnd2"),br=Symbol("async"),xu=Symbol("abort"),Nc=Symbol("aborted"),ns=Symbol("signal"),Ni=t=>Promise.resolve().then(t),yS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",mS=yS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),pS=yS&&Symbol.iterator||Symbol("iterator not implemented"),iP=t=>t==="end"||t==="finish"||t==="prefinish",aP=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,cP=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Oc=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[po](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Cu=class extends Oc{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}},Oi=class extends dS{constructor(e){super(),this[Tc]=!1,this[Ti]=!1,this[tr]=[],this[pe]=[],this[Be]=e&&e.objectMode||!1,this[Be]?this[tt]=null:this[tt]=e&&e.encoding||null,this[tt]==="buffer"&&(this[tt]=null),this[br]=e&&!!e.async||!1,this[Sr]=this[tt]?new lS(this[tt]):null,this[xr]=!1,this[kn]=!1,this[Rc]=!1,this[Ac]=!1,this[ki]=null,this.writable=!0,this.readable=!0,this[Ae]=0,this[ye]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[pe]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[tr]}),this[ns]=e&&e.signal,this[Nc]=!1,this[ns]&&(this[ns].addEventListener("abort",()=>this[xu]()),this[ns].aborted&&this[xu]())}get bufferLength(){return this[Ae]}get encoding(){return this[tt]}set encoding(e){if(this[Be])throw new Error("cannot set encoding in objectMode");if(this[tt]&&e!==this[tt]&&(this[Sr]&&this[Sr].lastNeed||this[Ae]))throw new Error("cannot change encoding");this[tt]!==e&&(this[Sr]=e?new lS(e):null,this[pe].length&&(this[pe]=this[pe].map(r=>this[Sr].write(r)))),this[tt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Be]}set objectMode(e){this[Be]=this[Be]||!!e}get async(){return this[br]}set async(e){this[br]=this[br]||!!e}[xu](){this[Nc]=!0,this.emit("abort",this[ns].reason),this.destroy(this[ns].reason)}get aborted(){return this[Nc]}set aborted(e){}write(e,r,n){if(this[Nc])return!1;if(this[xr])throw new Error("write after end");if(this[ye])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[br]?Ni:o=>o();return!this[Be]&&!Buffer.isBuffer(e)&&(cP(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):aP(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Be]?(this.flowing&&this[Ae]!==0&&this[kc](!0),this.flowing?this.emit("data",e):this[pu](e),this[Ae]!==0&&this.emit("readable"),n&&s(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[tt]&&!this[Sr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[tt]&&(e=this[Sr].write(e)),this.flowing&&this[Ae]!==0&&this[kc](!0),this.flowing?this.emit("data",e):this[pu](e),this[Ae]!==0&&this.emit("readable"),n&&s(n),this.flowing):(this[Ae]!==0&&this.emit("readable"),n&&s(n),this.flowing)}read(e){if(this[ye])return null;if(this[Ae]===0||e===0||e>this[Ae])return this[Cr](),null;this[Be]&&(e=null),this[pe].length>1&&!this[Be]&&(this.encoding?this[pe]=[this[pe].join("")]:this[pe]=[Buffer.concat(this[pe],this[Ae])]);let r=this[fS](e||null,this[pe][0]);return this[Cr](),r}[fS](e,r){return e===r.length||e===null?this[yu]():(this[pe][0]=r.slice(e),r=r.slice(0,e),this[Ae]-=e),this.emit("data",r),!this[pe].length&&!this[xr]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[xr]=!0,this.writable=!1,(this.flowing||!this[Ti])&&this[Cr](),this}[po](){this[ye]||(this[Ti]=!1,this[Tc]=!0,this.emit("resume"),this[pe].length?this[kc]():this[xr]?this[Cr]():this.emit("drain"))}resume(){return this[po]()}pause(){this[Tc]=!1,this[Ti]=!0}get destroyed(){return this[ye]}get flowing(){return this[Tc]}get paused(){return this[Ti]}[pu](e){this[Be]?this[Ae]+=1:this[Ae]+=e.length,this[pe].push(e)}[yu](){return this[Be]?this[Ae]-=1:this[Ae]-=this[pe][0].length,this[pe].shift()}[kc](e){do;while(this[uS](this[yu]())&&this[pe].length);!e&&!this[pe].length&&!this[xr]&&this.emit("drain")}[uS](e){return this.emit("data",e),this.flowing}pipe(e,r){if(this[ye])return;let n=this[kn];return r=r||{},e===cS.stdout||e===cS.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[tr].push(r.proxyErrors?new Cu(this,e,r):new Oc(this,e,r)),this[br]?Ni(()=>this[po]()):this[po]()),e}unpipe(e){let r=this[tr].find(n=>n.dest===e);r&&(this[tr].splice(this[tr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this[tr].length&&!this.flowing?this[po]():e==="readable"&&this[Ae]!==0?super.emit("readable"):iP(e)&&this[kn]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[ki]&&(this[br]?Ni(()=>r.call(this,this[ki])):r.call(this,this[ki])),n}get emittedEnd(){return this[kn]}[Cr](){!this[Rc]&&!this[kn]&&!this[ye]&&this[pe].length===0&&this[xr]&&(this[Rc]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ac]&&this.emit("close"),this[Rc]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==ye&&this[ye])return;if(e==="data")return!this[Be]&&!r?!1:this[br]?Ni(()=>this[Eu](r)):this[Eu](r);if(e==="end")return this[hS]();if(e==="close"){if(this[Ac]=!0,!this[kn]&&!this[ye])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[ki]=r,super.emit(gu,r);let o=!this[ns]||this.listeners("error").length?super.emit("error",r):!1;return this[Cr](),o}else if(e==="resume"){let o=super.emit("resume");return this[Cr](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let s=super.emit(e,r,...n);return this[Cr](),s}[Eu](e){for(let n of this[tr])n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Cr](),r}[hS](){this[kn]||(this[kn]=!0,this.readable=!1,this[br]?Ni(()=>this[wu]()):this[wu]())}[wu](){if(this[Sr]){let r=this[Sr].end();if(r){for(let n of this[tr])n.dest.write(r);super.emit("data",r)}}for(let r of this[tr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Be]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Be]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Be]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Be]?Promise.reject(new Error("cannot concat in objectMode")):this[tt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(ye,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[mS](){let e=!1,r=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return r();let s=this.read();if(s!==null)return Promise.resolve({done:!1,value:s});if(this[xr])return r();let o=null,i=null,a=u=>{this.removeListener("data",d),this.removeListener("end",c),this.removeListener(ye,l),r(),i(u)},d=u=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(ye,l),this.pause(),o({value:u,done:!!this[xr]})},c=()=>{this.removeListener("error",a),this.removeListener("data",d),this.removeListener(ye,l),r(),o({done:!0})},l=()=>a(new Error("stream destroyed"));return new Promise((u,h)=>{i=h,o=u,this.once(ye,l),this.once("error",a),this.once("end",c),this.once("data",d)})},throw:r,return:r,[mS](){return this}}}[pS](){let e=!1,r=()=>(this.pause(),this.removeListener(gu,r),this.removeListener(ye,r),this.removeListener("end",r),e=!0,{done:!0}),n=()=>{if(e)return r();let s=this.read();return s===null?r():{value:s}};return this.once("end",r),this.once(gu,r),this.once(ye,r),{next:n,throw:r,return:r,[pS](){return this}}}destroy(e){return this[ye]?(e?this.emit("error",e):this.emit(ye),this):(this[ye]=!0,this[pe].length=0,this[Ae]=0,typeof this.close=="function"&&!this[Ac]&&this.close(),e?this.emit("error",e):this.emit(ye),this)}static isStream(e){return!!e&&(e instanceof Oi||e instanceof dS||e instanceof sP&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};gS.exports=Oi});var wS=N((_X,ES)=>{var dP=I("zlib").constants||{ZLIB_VERNUM:4736};ES.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},dP))});var NS=N((RX,TS)=>{"use strict";var xS=typeof process=="object"&&process?process:{stdout:null,stderr:null},lP=I("events"),CS=I("stream"),SS=I("string_decoder").StringDecoder,_r=Symbol("EOF"),Rr=Symbol("maybeEmitEnd"),Tn=Symbol("emittedEnd"),vc=Symbol("emittingEnd"),Ii=Symbol("emittedError"),Pc=Symbol("closed"),bS=Symbol("read"),Dc=Symbol("flush"),_S=Symbol("flushChunk"),rt=Symbol("encoding"),Ar=Symbol("decoder"),Bc=Symbol("flowing"),vi=Symbol("paused"),yo=Symbol("resume"),ke=Symbol("bufferLength"),Su=Symbol("bufferPush"),bu=Symbol("bufferShift"),ze=Symbol("objectMode"),$e=Symbol("destroyed"),_u=Symbol("emitData"),RS=Symbol("emitEnd"),Ru=Symbol("emitEnd2"),kr=Symbol("async"),Pi=t=>Promise.resolve().then(t),AS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",fP=AS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),uP=AS&&Symbol.iterator||Symbol("iterator not implemented"),hP=t=>t==="end"||t==="finish"||t==="prefinish",mP=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,pP=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Mc=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[yo](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Au=class extends Mc{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}};TS.exports=class kS extends CS{constructor(e){super(),this[Bc]=!1,this[vi]=!1,this.pipes=[],this.buffer=[],this[ze]=e&&e.objectMode||!1,this[ze]?this[rt]=null:this[rt]=e&&e.encoding||null,this[rt]==="buffer"&&(this[rt]=null),this[kr]=e&&!!e.async||!1,this[Ar]=this[rt]?new SS(this[rt]):null,this[_r]=!1,this[Tn]=!1,this[vc]=!1,this[Pc]=!1,this[Ii]=null,this.writable=!0,this.readable=!0,this[ke]=0,this[$e]=!1}get bufferLength(){return this[ke]}get encoding(){return this[rt]}set encoding(e){if(this[ze])throw new Error("cannot set encoding in objectMode");if(this[rt]&&e!==this[rt]&&(this[Ar]&&this[Ar].lastNeed||this[ke]))throw new Error("cannot change encoding");this[rt]!==e&&(this[Ar]=e?new SS(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Ar].write(r)))),this[rt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[ze]}set objectMode(e){this[ze]=this[ze]||!!e}get async(){return this[kr]}set async(e){this[kr]=this[kr]||!!e}write(e,r,n){if(this[_r])throw new Error("write after end");if(this[$e])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[kr]?Pi:o=>o();return!this[ze]&&!Buffer.isBuffer(e)&&(pP(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):mP(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[ze]?(this.flowing&&this[ke]!==0&&this[Dc](!0),this.flowing?this.emit("data",e):this[Su](e),this[ke]!==0&&this.emit("readable"),n&&s(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[rt]&&!this[Ar].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[rt]&&(e=this[Ar].write(e)),this.flowing&&this[ke]!==0&&this[Dc](!0),this.flowing?this.emit("data",e):this[Su](e),this[ke]!==0&&this.emit("readable"),n&&s(n),this.flowing):(this[ke]!==0&&this.emit("readable"),n&&s(n),this.flowing)}read(e){if(this[$e])return null;if(this[ke]===0||e===0||e>this[ke])return this[Rr](),null;this[ze]&&(e=null),this.buffer.length>1&&!this[ze]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[ke])]);let r=this[bS](e||null,this.buffer[0]);return this[Rr](),r}[bS](e,r){return e===r.length||e===null?this[bu]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[ke]-=e),this.emit("data",r),!this.buffer.length&&!this[_r]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[_r]=!0,this.writable=!1,(this.flowing||!this[vi])&&this[Rr](),this}[yo](){this[$e]||(this[vi]=!1,this[Bc]=!0,this.emit("resume"),this.buffer.length?this[Dc]():this[_r]?this[Rr]():this.emit("drain"))}resume(){return this[yo]()}pause(){this[Bc]=!1,this[vi]=!0}get destroyed(){return this[$e]}get flowing(){return this[Bc]}get paused(){return this[vi]}[Su](e){this[ze]?this[ke]+=1:this[ke]+=e.length,this.buffer.push(e)}[bu](){return this.buffer.length&&(this[ze]?this[ke]-=1:this[ke]-=this.buffer[0].length),this.buffer.shift()}[Dc](e){do;while(this[_S](this[bu]()));!e&&!this.buffer.length&&!this[_r]&&this.emit("drain")}[_S](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[$e])return;let n=this[Tn];return r=r||{},e===xS.stdout||e===xS.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this.pipes.push(r.proxyErrors?new Au(this,e,r):new Mc(this,e,r)),this[kr]?Pi(()=>this[yo]()):this[yo]()),e}unpipe(e){let r=this.pipes.find(n=>n.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[yo]():e==="readable"&&this[ke]!==0?super.emit("readable"):hP(e)&&this[Tn]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Ii]&&(this[kr]?Pi(()=>r.call(this,this[Ii])):r.call(this,this[Ii])),n}get emittedEnd(){return this[Tn]}[Rr](){!this[vc]&&!this[Tn]&&!this[$e]&&this.buffer.length===0&&this[_r]&&(this[vc]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Pc]&&this.emit("close"),this[vc]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==$e&&this[$e])return;if(e==="data")return r?this[kr]?Pi(()=>this[_u](r)):this[_u](r):!1;if(e==="end")return this[RS]();if(e==="close"){if(this[Pc]=!0,!this[Tn]&&!this[$e])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[Ii]=r;let o=super.emit("error",r);return this[Rr](),o}else if(e==="resume"){let o=super.emit("resume");return this[Rr](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let s=super.emit(e,r,...n);return this[Rr](),s}[_u](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Rr](),r}[RS](){this[Tn]||(this[Tn]=!0,this.readable=!1,this[kr]?Pi(()=>this[Ru]()):this[Ru]())}[Ru](){if(this[Ar]){let r=this[Ar].end();if(r){for(let n of this.pipes)n.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[ze]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[ze]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[ze]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[ze]?Promise.reject(new Error("cannot concat in objectMode")):this[rt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on($e,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[fP](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[_r])return Promise.resolve({done:!0});let n=null,s=null,o=c=>{this.removeListener("data",i),this.removeListener("end",a),s(c)},i=c=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:c,done:!!this[_r]})},a=()=>{this.removeListener("error",o),this.removeListener("data",i),n({done:!0})},d=()=>o(new Error("stream destroyed"));return new Promise((c,l)=>{s=l,n=c,this.once($e,d),this.once("error",o),this.once("end",a),this.once("data",i)})}}}[uP](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[$e]?(e?this.emit("error",e):this.emit($e),this):(this[$e]=!0,this.buffer.length=0,this[ke]=0,typeof this.close=="function"&&!this[Pc]&&this.close(),e?this.emit("error",e):this.emit($e),this)}static isStream(e){return!!e&&(e instanceof kS||e instanceof CS||e instanceof lP&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var qu=N(at=>{"use strict";var Iu=I("assert"),Nn=I("buffer").Buffer,vS=I("zlib"),ss=at.constants=wS(),yP=NS(),OS=Nn.concat,os=Symbol("_superWrite"),Eo=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},gP=Symbol("opts"),Di=Symbol("flushFlag"),IS=Symbol("finishFlushFlag"),$u=Symbol("fullFlushFlag"),ae=Symbol("handle"),Fc=Symbol("onError"),go=Symbol("sawError"),ku=Symbol("level"),Tu=Symbol("strategy"),Nu=Symbol("ended"),AX=Symbol("_defaultFullFlush"),Lc=class extends yP{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[go]=!1,this[Nu]=!1,this[gP]=e,this[Di]=e.flush,this[IS]=e.finishFlush;try{this[ae]=new vS[r](e)}catch(n){throw new Eo(n)}this[Fc]=n=>{this[go]||(this[go]=!0,this.close(),this.emit("error",n))},this[ae].on("error",n=>this[Fc](new Eo(n))),this.once("end",()=>this.close)}close(){this[ae]&&(this[ae].close(),this[ae]=null,this.emit("close"))}reset(){if(!this[go])return Iu(this[ae],"zlib binding closed"),this[ae].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[$u]),this.write(Object.assign(Nn.alloc(0),{[Di]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[IS]),this[Nu]=!0,super.end(null,null,n)}get ended(){return this[Nu]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=Nn.from(e,r)),this[go])return;Iu(this[ae],"zlib binding closed");let s=this[ae]._handle,o=s.close;s.close=()=>{};let i=this[ae].close;this[ae].close=()=>{},Nn.concat=c=>c;let a;try{let c=typeof e[Di]=="number"?e[Di]:this[Di];a=this[ae]._processChunk(e,c),Nn.concat=OS}catch(c){Nn.concat=OS,this[Fc](new Eo(c))}finally{this[ae]&&(this[ae]._handle=s,s.close=o,this[ae].close=i,this[ae].removeAllListeners("error"))}this[ae]&&this[ae].on("error",c=>this[Fc](new Eo(c)));let d;if(a)if(Array.isArray(a)&&a.length>0){d=this[os](Nn.from(a[0]));for(let c=1;c<a.length;c++)d=this[os](a[c])}else d=this[os](Nn.from(a));return n&&n(),d}[os](e){return super.write(e)}},Tr=class extends Lc{constructor(e,r){e=e||{},e.flush=e.flush||ss.Z_NO_FLUSH,e.finishFlush=e.finishFlush||ss.Z_FINISH,super(e,r),this[$u]=ss.Z_FULL_FLUSH,this[ku]=e.level,this[Tu]=e.strategy}params(e,r){if(!this[go]){if(!this[ae])throw new Error("cannot switch params when binding is closed");if(!this[ae].params)throw new Error("not supported in this implementation");if(this[ku]!==e||this[Tu]!==r){this.flush(ss.Z_SYNC_FLUSH),Iu(this[ae],"zlib binding closed");let n=this[ae].flush;this[ae].flush=(s,o)=>{this.flush(s),o()};try{this[ae].params(e,r)}finally{this[ae].flush=n}this[ae]&&(this[ku]=e,this[Tu]=r)}}}},vu=class extends Tr{constructor(e){super(e,"Deflate")}},Pu=class extends Tr{constructor(e){super(e,"Inflate")}},Ou=Symbol("_portable"),Du=class extends Tr{constructor(e){super(e,"Gzip"),this[Ou]=e&&!!e.portable}[os](e){return this[Ou]?(this[Ou]=!1,e[9]=255,super[os](e)):super[os](e)}},Bu=class extends Tr{constructor(e){super(e,"Gunzip")}},Mu=class extends Tr{constructor(e){super(e,"DeflateRaw")}},Fu=class extends Tr{constructor(e){super(e,"InflateRaw")}},Lu=class extends Tr{constructor(e){super(e,"Unzip")}},Uc=class extends Lc{constructor(e,r){e=e||{},e.flush=e.flush||ss.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||ss.BROTLI_OPERATION_FINISH,super(e,r),this[$u]=ss.BROTLI_OPERATION_FLUSH}},Uu=class extends Uc{constructor(e){super(e,"BrotliCompress")}},zu=class extends Uc{constructor(e){super(e,"BrotliDecompress")}};at.Deflate=vu;at.Inflate=Pu;at.Gzip=Du;at.Gunzip=Bu;at.DeflateRaw=Mu;at.InflateRaw=Fu;at.Unzip=Lu;typeof vS.BrotliCompress=="function"?(at.BrotliCompress=Uu,at.BrotliDecompress=zu):at.BrotliCompress=at.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var wo=N((NX,PS)=>{var EP=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;PS.exports=EP!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var zc=N((IX,DS)=>{"use strict";var wP=Ic(),ju=wo(),Gu=Symbol("slurp");DS.exports=class extends wP{constructor(e,r,n){switch(super(),this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=ju(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=ju(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Gu](r),n&&this[Gu](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,s=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,s-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[Gu](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?ju(e[n]):e[n])}}});var Ku=N($c=>{"use strict";$c.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);$c.code=new Map(Array.from($c.name).map(t=>[t[1],t[0]]))});var LS=N((PX,FS)=>{"use strict";var xP=(t,e)=>{if(Number.isSafeInteger(t))t<0?SP(t,e):CP(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},CP=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},SP=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var s=t&255;t=Math.floor(t/256),r?e[n-1]=BS(s):s===0?e[n-1]=0:(r=!0,e[n-1]=MS(s))}},bP=t=>{let e=t[0],r=e===128?RP(t.slice(1,t.length)):e===255?_P(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},_P=t=>{for(var e=t.length,r=0,n=!1,s=e-1;s>-1;s--){var o=t[s],i;n?i=BS(o):o===0?i=o:(n=!0,i=MS(o)),i!==0&&(r-=i*Math.pow(256,e-s-1))}return r},RP=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var s=t[n];s!==0&&(r+=s*Math.pow(256,e-n-1))}return r},BS=t=>(255^t)&255,MS=t=>(255^t)+1&255;FS.exports={encode:xP,parse:bP}});var Co=N((DX,zS)=>{"use strict";var Hu=Ku(),xo=I("path").posix,US=LS(),Vu=Symbol("slurp"),ct=Symbol("type"),Xu=class{constructor(e,r,n,s){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[ct]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,s):e&&this.set(e)}decode(e,r,n,s){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=is(e,r,100),this.mode=On(e,r+100,8),this.uid=On(e,r+108,8),this.gid=On(e,r+116,8),this.size=On(e,r+124,12),this.mtime=Wu(e,r+136,12),this.cksum=On(e,r+148,12),this[Vu](n),this[Vu](s,!0),this[ct]=is(e,r+156,1),this[ct]===""&&(this[ct]="0"),this[ct]==="0"&&this.path.slice(-1)==="/"&&(this[ct]="5"),this[ct]==="5"&&(this.size=0),this.linkpath=is(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=is(e,r+265,32),this.gname=is(e,r+297,32),this.devmaj=On(e,r+329,8),this.devmin=On(e,r+337,8),e[r+475]!==0){let i=is(e,r+345,155);this.path=i+"/"+this.path}else{let i=is(e,r+345,130);i&&(this.path=i+"/"+this.path),this.atime=Wu(e,r+476,12),this.ctime=Wu(e,r+488,12)}let o=8*32;for(let i=r;i<r+148;i++)o+=e[i];for(let i=r+156;i<r+512;i++)o+=e[i];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[Vu](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,s=AP(this.path||"",n),o=s[0],i=s[1];this.needPax=s[2],this.needPax=as(e,r,100,o)||this.needPax,this.needPax=In(e,r+100,8,this.mode)||this.needPax,this.needPax=In(e,r+108,8,this.uid)||this.needPax,this.needPax=In(e,r+116,8,this.gid)||this.needPax,this.needPax=In(e,r+124,12,this.size)||this.needPax,this.needPax=Yu(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[ct].charCodeAt(0),this.needPax=as(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=as(e,r+265,32,this.uname)||this.needPax,this.needPax=as(e,r+297,32,this.gname)||this.needPax,this.needPax=In(e,r+329,8,this.devmaj)||this.needPax,this.needPax=In(e,r+337,8,this.devmin)||this.needPax,this.needPax=as(e,r+345,n,i)||this.needPax,e[r+475]!==0?this.needPax=as(e,r+345,155,i)||this.needPax:(this.needPax=as(e,r+345,130,i)||this.needPax,this.needPax=Yu(e,r+476,12,this.atime)||this.needPax,this.needPax=Yu(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let d=r;d<r+148;d++)a+=e[d];for(let d=r+156;d<r+512;d++)a+=e[d];return this.cksum=a,In(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return Hu.name.get(this[ct])||this[ct]}get typeKey(){return this[ct]}set type(e){Hu.code.has(e)?this[ct]=Hu.code.get(e):this[ct]=e}},AP=(t,e)=>{let n=t,s="",o,i=xo.parse(t).root||".";if(Buffer.byteLength(n)<100)o=[n,s,!1];else{s=xo.dirname(n),n=xo.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(s)<=e?o=[n,s,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(s)<=e?o=[n.slice(0,100-1),s,!0]:(n=xo.join(xo.basename(s),n),s=xo.dirname(s));while(s!==i&&!o);o||(o=[t.slice(0,100-1),"",!0])}return o},is=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),Wu=(t,e,r)=>kP(On(t,e,r)),kP=t=>t===null?null:new Date(t*1e3),On=(t,e,r)=>t[e]&128?US.parse(t.slice(e,e+r)):NP(t,e,r),TP=t=>isNaN(t)?null:t,NP=(t,e,r)=>TP(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),OP={12:8589934591,8:2097151},In=(t,e,r,n)=>n===null?!1:n>OP[r]||n<0?(US.encode(n,t.slice(e,e+r)),!0):(IP(t,e,r,n),!1),IP=(t,e,r,n)=>t.write(vP(n,r),e,r,"ascii"),vP=(t,e)=>PP(Math.floor(t).toString(8),e),PP=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",Yu=(t,e,r,n)=>n===null?!1:In(t,e,r,n.getTime()/1e3),DP=new Array(156).join("\0"),as=(t,e,r,n)=>n===null?!1:(t.write(n+DP,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);zS.exports=Xu});var qc=N((BX,$S)=>{"use strict";var BP=Co(),MP=I("path"),Bi=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),s=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)s[o]=0;new BP({path:("PaxHeader/"+MP.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(s),s.write(e,512,r,"utf8");for(let o=r+512;o<s.length;o++)s[o]=0;return s}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,s=Buffer.byteLength(n),o=Math.floor(Math.log(s)/Math.log(10))+1;return s+o>=Math.pow(10,o)&&(o+=1),o+s+n}};Bi.parse=(t,e,r)=>new Bi(FP(LP(t),e),r);var FP=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,LP=t=>t.replace(/\n$/,"").split(`
`).reduce(UP,Object.create(null)),UP=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.slice((r+" ").length);let n=e.split("="),s=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!s)return t;let o=n.join("=");return t[s]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(s)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};$S.exports=Bi});var So=N((MX,qS)=>{qS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var jc=N((FX,jS)=>{"use strict";jS.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var Zu=N((UX,GS)=>{"use strict";var Gc=["|","<",">","?",":"],Qu=Gc.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),zP=new Map(Gc.map((t,e)=>[t,Qu[e]])),$P=new Map(Qu.map((t,e)=>[t,Gc[e]]));GS.exports={encode:t=>Gc.reduce((e,r)=>e.split(r).join(zP.get(r)),t),decode:t=>Qu.reduce((e,r)=>e.split(r).join($P.get(r)),t)}});var Ju=N((zX,HS)=>{var{isAbsolute:qP,parse:KS}=I("path").win32;HS.exports=t=>{let e="",r=KS(t);for(;qP(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.slice(n.length),e+=n,r=KS(t)}return[e,t]}});var WS=N(($X,VS)=>{"use strict";VS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var dh=N((GX,cb)=>{"use strict";var tb=Ic(),rb=qc(),nb=Co(),nr=I("fs"),YS=I("path"),rr=wo(),jP=So(),sb=(t,e)=>e?(t=rr(t).replace(/^\.(\/|$)/,""),jP(e)+"/"+t):rr(t),GP=16*1024*1024,XS=Symbol("process"),QS=Symbol("file"),ZS=Symbol("directory"),th=Symbol("symlink"),JS=Symbol("hardlink"),Mi=Symbol("header"),Kc=Symbol("read"),rh=Symbol("lstat"),Hc=Symbol("onlstat"),nh=Symbol("onread"),sh=Symbol("onreadlink"),oh=Symbol("openfile"),ih=Symbol("onopenfile"),vn=Symbol("close"),Vc=Symbol("mode"),ah=Symbol("awaitDrain"),eh=Symbol("ondrain"),sr=Symbol("prefix"),eb=Symbol("hadError"),ob=jc(),KP=Zu(),ib=Ju(),ab=WS(),Wc=ob(class extends tb{constructor(e,r){if(r=r||{},super(r),typeof e!="string")throw new TypeError("path is required");this.path=rr(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||GP,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=rr(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?rr(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[s,o]=ib(this.path);s&&(this.path=o,n=s)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=KP.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=rr(r.absolute||YS.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[Hc](this.statCache.get(this.absolute)):this[rh]()}emit(e,...r){return e==="error"&&(this[eb]=!0),super.emit(e,...r)}[rh](){nr.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Hc](r)})}[Hc](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=VP(e),this.emit("stat",e),this[XS]()}[XS](){switch(this.type){case"File":return this[QS]();case"Directory":return this[ZS]();case"SymbolicLink":return this[th]();default:return this.end()}}[Vc](e){return ab(e,this.type==="Directory",this.portable)}[sr](e){return sb(e,this.prefix)}[Mi](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new nb({path:this[sr](this.path),linkpath:this.type==="Link"?this[sr](this.linkpath):this.linkpath,mode:this[Vc](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new rb({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[sr](this.path),linkpath:this.type==="Link"?this[sr](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[ZS](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Mi](),this.end()}[th](){nr.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[sh](r)})}[sh](e){this.linkpath=rr(e),this[Mi](),this.end()}[JS](e){this.type="Link",this.linkpath=rr(YS.relative(this.cwd,e)),this.stat.size=0,this[Mi](),this.end()}[QS](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[JS](r)}this.linkCache.set(e,this.absolute)}if(this[Mi](),this.stat.size===0)return this.end();this[oh]()}[oh](){nr.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[ih](r)})}[ih](e){if(this.fd=e,this[eb])return this[vn]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Kc]()}[Kc](){let{fd:e,buf:r,offset:n,length:s,pos:o}=this;nr.read(e,r,n,s,o,(i,a)=>{if(i)return this[vn](()=>this.emit("error",i));this[nh](a)})}[vn](e){nr.close(this.fd,e)}[nh](e){if(e<=0&&this.remain>0){let s=new Error("encountered unexpected EOF");return s.path=this.absolute,s.syscall="read",s.code="EOF",this[vn](()=>this.emit("error",s))}if(e>this.remain){let s=new Error("did not encounter expected EOF");return s.path=this.absolute,s.syscall="read",s.code="EOF",this[vn](()=>this.emit("error",s))}if(e===this.remain)for(let s=e;s<this.length&&e<this.blockRemain;s++)this.buf[s+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[eh]():this[ah](()=>this[eh]())}[ah](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[eh](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[vn](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Kc]()}}),ch=class extends Wc{[rh](){this[Hc](nr.lstatSync(this.absolute))}[th](){this[sh](nr.readlinkSync(this.absolute))}[oh](){this[ih](nr.openSync(this.absolute,"r"))}[Kc](){let e=!0;try{let{fd:r,buf:n,offset:s,length:o,pos:i}=this,a=nr.readSync(r,n,s,o,i);this[nh](a),e=!1}finally{if(e)try{this[vn](()=>{})}catch{}}}[ah](e){e()}[vn](e){nr.closeSync(this.fd),e()}},HP=ob(class extends tb{constructor(e,r){r=r||{},super(r),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=rr(e.path),this.mode=this[Vc](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=rr(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[s,o]=ib(this.path);s&&(this.path=o,n=s)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new nb({path:this[sr](this.path),linkpath:this.type==="Link"?this[sr](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new rb({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[sr](this.path),linkpath:this.type==="Link"?this[sr](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[sr](e){return sb(e,this.prefix)}[Vc](e){return ab(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Wc.Sync=ch;Wc.Tar=HP;var VP=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";cb.exports=Wc});var lb=N((KX,db)=>{"use strict";db.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var lh=N((HX,fb)=>{"use strict";fb.exports=X;X.Node=cs;X.create=X;function X(t){var e=this;if(e instanceof X||(e=new X),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}X.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};X.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};X.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};X.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)YP(this,arguments[t]);return this.length};X.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)XP(this,arguments[t]);return this.length};X.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};X.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};X.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};X.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};X.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};X.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};X.prototype.map=function(t,e){e=e||this;for(var r=new X,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};X.prototype.mapReverse=function(t,e){e=e||this;for(var r=new X,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};X.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=t(r,n.value,s),n=n.next;return r};X.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=t(r,n.value,s),n=n.prev;return r};X.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};X.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};X.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new X;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)r.push(s.value);return r};X.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new X;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>t;n--,s=s.prev)r.push(s.value);return r};X.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(var o=[],n=0;s&&n<e;n++)o.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=WP(this,s,r[n]);return o};X.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function WP(t,e,r){var n=e===t.head?new cs(r,null,e,t):new cs(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function YP(t,e){t.tail=new cs(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function XP(t,e){t.head=new cs(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function cs(t,e,r,n){if(!(this instanceof cs))return new cs(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{lb()(X)}catch{}});var nd=N((WX,Eb)=>{"use strict";var td=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},QP=Ic(),ZP=qu(),JP=zc(),wh=dh(),eD=wh.Sync,tD=wh.Tar,rD=lh(),ub=Buffer.alloc(1024),Qc=Symbol("onStat"),Yc=Symbol("ended"),or=Symbol("queue"),bo=Symbol("current"),ds=Symbol("process"),Xc=Symbol("processing"),hb=Symbol("processJob"),ir=Symbol("jobs"),fh=Symbol("jobDone"),Zc=Symbol("addFSEntry"),mb=Symbol("addTarEntry"),ph=Symbol("stat"),yh=Symbol("readdir"),Jc=Symbol("onreaddir"),ed=Symbol("pipe"),pb=Symbol("entry"),uh=Symbol("entryOpt"),gh=Symbol("writeEntryClass"),gb=Symbol("write"),hh=Symbol("ondrain"),rd=I("fs"),yb=I("path"),nD=jc(),mh=wo(),xh=nD(class extends QP{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=mh(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[gh]=wh,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new ZP.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[hh]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[hh]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[or]=new rD,this[ir]=0,this.jobs=+e.jobs||4,this[Xc]=!1,this[Yc]=!1}[gb](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Yc]=!0,this[ds](),this}write(e){if(this[Yc])throw new Error("write after end");return e instanceof JP?this[mb](e):this[Zc](e),this.flowing}[mb](e){let r=mh(yb.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new td(e.path,r,!1);n.entry=new tD(e,this[uh](n)),n.entry.on("end",s=>this[fh](n)),this[ir]+=1,this[or].push(n)}this[ds]()}[Zc](e){let r=mh(yb.resolve(this.cwd,e));this[or].push(new td(e,r)),this[ds]()}[ph](e){e.pending=!0,this[ir]+=1;let r=this.follow?"stat":"lstat";rd[r](e.absolute,(n,s)=>{e.pending=!1,this[ir]-=1,n?this.emit("error",n):this[Qc](e,s)})}[Qc](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[ds]()}[yh](e){e.pending=!0,this[ir]+=1,rd.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[ir]-=1,r)return this.emit("error",r);this[Jc](e,n)})}[Jc](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[ds]()}[ds](){if(!this[Xc]){this[Xc]=!0;for(let e=this[or].head;e!==null&&this[ir]<this.jobs;e=e.next)if(this[hb](e.value),e.value.ignore){let r=e.next;this[or].removeNode(e),e.next=r}this[Xc]=!1,this[Yc]&&!this[or].length&&this[ir]===0&&(this.zip?this.zip.end(ub):(super.write(ub),super.end()))}}get[bo](){return this[or]&&this[or].head&&this[or].head.value}[fh](e){this[or].shift(),this[ir]-=1,this[ds]()}[hb](e){if(!e.pending){if(e.entry){e===this[bo]&&!e.piped&&this[ed](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Qc](e,this.statCache.get(e.absolute)):this[ph](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Jc](e,this.readdirCache.get(e.absolute)):this[yh](e),!e.readdir))){if(e.entry=this[pb](e),!e.entry){e.ignore=!0;return}e===this[bo]&&!e.piped&&this[ed](e)}}}[uh](e){return{onwarn:(r,n,s)=>this.warn(r,n,s),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[pb](e){this[ir]+=1;try{return new this[gh](e.path,this[uh](e)).on("end",()=>this[fh](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[hh](){this[bo]&&this[bo].entry&&this[bo].entry.resume()}[ed](e){e.piped=!0,e.readdir&&e.readdir.forEach(s=>{let o=e.path,i=o==="./"?"":o.replace(/\/*$/,"/");this[Zc](i+s)});let r=e.entry,n=this.zip;n?r.on("data",s=>{n.write(s)||r.pause()}):r.on("data",s=>{super.write(s)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Eh=class extends xh{constructor(e){super(e),this[gh]=eD}pause(){}resume(){}[ph](e){let r=this.follow?"statSync":"lstatSync";this[Qc](e,rd[r](e.absolute))}[yh](e,r){this[Jc](e,rd.readdirSync(e.absolute))}[ed](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(s=>{let o=e.path,i=o==="./"?"":o.replace(/\/*$/,"/");this[Zc](i+s)}),n?r.on("data",s=>{n.write(s)}):r.on("data",s=>{super[gb](s)})}};xh.Sync=Eh;Eb.exports=xh});var Tb=N((YX,kb)=>{"use strict";var wb=typeof process=="object"&&process?process:{stdout:null,stderr:null},sD=I("events"),xb=I("stream"),Cb=I("string_decoder").StringDecoder,Nr=Symbol("EOF"),Or=Symbol("maybeEmitEnd"),Pn=Symbol("emittedEnd"),sd=Symbol("emittingEnd"),Fi=Symbol("emittedError"),od=Symbol("closed"),Sb=Symbol("read"),id=Symbol("flush"),bb=Symbol("flushChunk"),nt=Symbol("encoding"),Ir=Symbol("decoder"),ad=Symbol("flowing"),Li=Symbol("paused"),_o=Symbol("resume"),Te=Symbol("bufferLength"),Ch=Symbol("bufferPush"),Sh=Symbol("bufferShift"),qe=Symbol("objectMode"),je=Symbol("destroyed"),bh=Symbol("emitData"),_b=Symbol("emitEnd"),_h=Symbol("emitEnd2"),vr=Symbol("async"),Ui=t=>Promise.resolve().then(t),Rb=global._MP_NO_ITERATOR_SYMBOLS_!=="1",oD=Rb&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),iD=Rb&&Symbol.iterator||Symbol("iterator not implemented"),aD=t=>t==="end"||t==="finish"||t==="prefinish",cD=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,dD=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),cd=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[_o](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Rh=class extends cd{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}};kb.exports=class Ab extends xb{constructor(e){super(),this[ad]=!1,this[Li]=!1,this.pipes=[],this.buffer=[],this[qe]=e&&e.objectMode||!1,this[qe]?this[nt]=null:this[nt]=e&&e.encoding||null,this[nt]==="buffer"&&(this[nt]=null),this[vr]=e&&!!e.async||!1,this[Ir]=this[nt]?new Cb(this[nt]):null,this[Nr]=!1,this[Pn]=!1,this[sd]=!1,this[od]=!1,this[Fi]=null,this.writable=!0,this.readable=!0,this[Te]=0,this[je]=!1}get bufferLength(){return this[Te]}get encoding(){return this[nt]}set encoding(e){if(this[qe])throw new Error("cannot set encoding in objectMode");if(this[nt]&&e!==this[nt]&&(this[Ir]&&this[Ir].lastNeed||this[Te]))throw new Error("cannot change encoding");this[nt]!==e&&(this[Ir]=e?new Cb(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Ir].write(r)))),this[nt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[qe]}set objectMode(e){this[qe]=this[qe]||!!e}get async(){return this[vr]}set async(e){this[vr]=this[vr]||!!e}write(e,r,n){if(this[Nr])throw new Error("write after end");if(this[je])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[vr]?Ui:o=>o();return!this[qe]&&!Buffer.isBuffer(e)&&(dD(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):cD(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[qe]?(this.flowing&&this[Te]!==0&&this[id](!0),this.flowing?this.emit("data",e):this[Ch](e),this[Te]!==0&&this.emit("readable"),n&&s(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[nt]&&!this[Ir].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[nt]&&(e=this[Ir].write(e)),this.flowing&&this[Te]!==0&&this[id](!0),this.flowing?this.emit("data",e):this[Ch](e),this[Te]!==0&&this.emit("readable"),n&&s(n),this.flowing):(this[Te]!==0&&this.emit("readable"),n&&s(n),this.flowing)}read(e){if(this[je])return null;if(this[Te]===0||e===0||e>this[Te])return this[Or](),null;this[qe]&&(e=null),this.buffer.length>1&&!this[qe]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Te])]);let r=this[Sb](e||null,this.buffer[0]);return this[Or](),r}[Sb](e,r){return e===r.length||e===null?this[Sh]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[Te]-=e),this.emit("data",r),!this.buffer.length&&!this[Nr]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[Nr]=!0,this.writable=!1,(this.flowing||!this[Li])&&this[Or](),this}[_o](){this[je]||(this[Li]=!1,this[ad]=!0,this.emit("resume"),this.buffer.length?this[id]():this[Nr]?this[Or]():this.emit("drain"))}resume(){return this[_o]()}pause(){this[ad]=!1,this[Li]=!0}get destroyed(){return this[je]}get flowing(){return this[ad]}get paused(){return this[Li]}[Ch](e){this[qe]?this[Te]+=1:this[Te]+=e.length,this.buffer.push(e)}[Sh](){return this.buffer.length&&(this[qe]?this[Te]-=1:this[Te]-=this.buffer[0].length),this.buffer.shift()}[id](e){do;while(this[bb](this[Sh]()));!e&&!this.buffer.length&&!this[Nr]&&this.emit("drain")}[bb](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[je])return;let n=this[Pn];return r=r||{},e===wb.stdout||e===wb.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this.pipes.push(r.proxyErrors?new Rh(this,e,r):new cd(this,e,r)),this[vr]?Ui(()=>this[_o]()):this[_o]()),e}unpipe(e){let r=this.pipes.find(n=>n.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[_o]():e==="readable"&&this[Te]!==0?super.emit("readable"):aD(e)&&this[Pn]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Fi]&&(this[vr]?Ui(()=>r.call(this,this[Fi])):r.call(this,this[Fi])),n}get emittedEnd(){return this[Pn]}[Or](){!this[sd]&&!this[Pn]&&!this[je]&&this.buffer.length===0&&this[Nr]&&(this[sd]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[od]&&this.emit("close"),this[sd]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==je&&this[je])return;if(e==="data")return r?this[vr]?Ui(()=>this[bh](r)):this[bh](r):!1;if(e==="end")return this[_b]();if(e==="close"){if(this[od]=!0,!this[Pn]&&!this[je])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[Fi]=r;let o=super.emit("error",r);return this[Or](),o}else if(e==="resume"){let o=super.emit("resume");return this[Or](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let s=super.emit(e,r,...n);return this[Or](),s}[bh](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Or](),r}[_b](){this[Pn]||(this[Pn]=!0,this.readable=!1,this[vr]?Ui(()=>this[_h]()):this[_h]())}[_h](){if(this[Ir]){let r=this[Ir].end();if(r){for(let n of this.pipes)n.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[qe]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[qe]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[qe]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[qe]?Promise.reject(new Error("cannot concat in objectMode")):this[nt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(je,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[oD](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Nr])return Promise.resolve({done:!0});let n=null,s=null,o=c=>{this.removeListener("data",i),this.removeListener("end",a),s(c)},i=c=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:c,done:!!this[Nr]})},a=()=>{this.removeListener("error",o),this.removeListener("data",i),n({done:!0})},d=()=>o(new Error("stream destroyed"));return new Promise((c,l)=>{s=l,n=c,this.once(je,d),this.once("error",o),this.once("end",a),this.once("data",i)})}}}[iD](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[je]?(e?this.emit("error",e):this.emit(je),this):(this[je]=!0,this.buffer.length=0,this[Te]=0,typeof this.close=="function"&&!this[od]&&this.close(),e?this.emit("error",e):this.emit(je),this)}static isStream(e){return!!e&&(e instanceof Ab||e instanceof xb||e instanceof sD&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var vo=N($i=>{"use strict";var lD=Tb(),fD=I("events").EventEmitter,st=I("fs"),Th=st.writev;if(!Th){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Th=(r,n,s,o)=>{let i=(d,c)=>o(d,c,n),a=new e;a.oncomplete=i,t.writeBuffers(r,n,s,a)}}var Oo=Symbol("_autoClose"),Pt=Symbol("_close"),zi=Symbol("_ended"),oe=Symbol("_fd"),Nb=Symbol("_finished"),Bn=Symbol("_flags"),Ah=Symbol("_flush"),Nh=Symbol("_handleChunk"),Oh=Symbol("_makeBuf"),hd=Symbol("_mode"),dd=Symbol("_needDrain"),To=Symbol("_onerror"),Io=Symbol("_onopen"),kh=Symbol("_onread"),Ao=Symbol("_onwrite"),Mn=Symbol("_open"),Pr=Symbol("_path"),ls=Symbol("_pos"),ar=Symbol("_queue"),ko=Symbol("_read"),Ob=Symbol("_readSize"),Dn=Symbol("_reading"),ld=Symbol("_remain"),Ib=Symbol("_size"),fd=Symbol("_write"),Ro=Symbol("_writing"),ud=Symbol("_defaultFlag"),No=Symbol("_errored"),md=class extends lD{constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[No]=!1,this[oe]=typeof r.fd=="number"?r.fd:null,this[Pr]=e,this[Ob]=r.readSize||16*1024*1024,this[Dn]=!1,this[Ib]=typeof r.size=="number"?r.size:1/0,this[ld]=this[Ib],this[Oo]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[oe]=="number"?this[ko]():this[Mn]()}get fd(){return this[oe]}get path(){return this[Pr]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Mn](){st.open(this[Pr],"r",(e,r)=>this[Io](e,r))}[Io](e,r){e?this[To](e):(this[oe]=r,this.emit("open",r),this[ko]())}[Oh](){return Buffer.allocUnsafe(Math.min(this[Ob],this[ld]))}[ko](){if(!this[Dn]){this[Dn]=!0;let e=this[Oh]();if(e.length===0)return process.nextTick(()=>this[kh](null,0,e));st.read(this[oe],e,0,e.length,null,(r,n,s)=>this[kh](r,n,s))}}[kh](e,r,n){this[Dn]=!1,e?this[To](e):this[Nh](r,n)&&this[ko]()}[Pt](){if(this[Oo]&&typeof this[oe]=="number"){let e=this[oe];this[oe]=null,st.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[To](e){this[Dn]=!0,this[Pt](),this.emit("error",e)}[Nh](e,r){let n=!1;return this[ld]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[ld]<=0)&&(n=!1,this[Pt](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[oe]=="number"&&this[ko]();break;case"error":return this[No]?void 0:(this[No]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Ih=class extends md{[Mn](){let e=!0;try{this[Io](null,st.openSync(this[Pr],"r")),e=!1}finally{e&&this[Pt]()}}[ko](){let e=!0;try{if(!this[Dn]){this[Dn]=!0;do{let r=this[Oh](),n=r.length===0?0:st.readSync(this[oe],r,0,r.length,null);if(!this[Nh](n,r))break}while(!0);this[Dn]=!1}e=!1}finally{e&&this[Pt]()}}[Pt](){if(this[Oo]&&typeof this[oe]=="number"){let e=this[oe];this[oe]=null,st.closeSync(e),this.emit("close")}}},pd=class extends fD{constructor(e,r){r=r||{},super(r),this.readable=!1,this.writable=!0,this[No]=!1,this[Ro]=!1,this[zi]=!1,this[dd]=!1,this[ar]=[],this[Pr]=e,this[oe]=typeof r.fd=="number"?r.fd:null,this[hd]=r.mode===void 0?438:r.mode,this[ls]=typeof r.start=="number"?r.start:null,this[Oo]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[ls]!==null?"r+":"w";this[ud]=r.flags===void 0,this[Bn]=this[ud]?n:r.flags,this[oe]===null&&this[Mn]()}emit(e,r){if(e==="error"){if(this[No])return;this[No]=!0}return super.emit(e,r)}get fd(){return this[oe]}get path(){return this[Pr]}[To](e){this[Pt](),this[Ro]=!0,this.emit("error",e)}[Mn](){st.open(this[Pr],this[Bn],this[hd],(e,r)=>this[Io](e,r))}[Io](e,r){this[ud]&&this[Bn]==="r+"&&e&&e.code==="ENOENT"?(this[Bn]="w",this[Mn]()):e?this[To](e):(this[oe]=r,this.emit("open",r),this[Ah]())}end(e,r){return e&&this.write(e,r),this[zi]=!0,!this[Ro]&&!this[ar].length&&typeof this[oe]=="number"&&this[Ao](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[zi]?(this.emit("error",new Error("write() after end()")),!1):this[oe]===null||this[Ro]||this[ar].length?(this[ar].push(e),this[dd]=!0,!1):(this[Ro]=!0,this[fd](e),!0)}[fd](e){st.write(this[oe],e,0,e.length,this[ls],(r,n)=>this[Ao](r,n))}[Ao](e,r){e?this[To](e):(this[ls]!==null&&(this[ls]+=r),this[ar].length?this[Ah]():(this[Ro]=!1,this[zi]&&!this[Nb]?(this[Nb]=!0,this[Pt](),this.emit("finish")):this[dd]&&(this[dd]=!1,this.emit("drain"))))}[Ah](){if(this[ar].length===0)this[zi]&&this[Ao](null,0);else if(this[ar].length===1)this[fd](this[ar].pop());else{let e=this[ar];this[ar]=[],Th(this[oe],e,this[ls],(r,n)=>this[Ao](r,n))}}[Pt](){if(this[Oo]&&typeof this[oe]=="number"){let e=this[oe];this[oe]=null,st.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},vh=class extends pd{[Mn](){let e;if(this[ud]&&this[Bn]==="r+")try{e=st.openSync(this[Pr],this[Bn],this[hd])}catch(r){if(r.code==="ENOENT")return this[Bn]="w",this[Mn]();throw r}else e=st.openSync(this[Pr],this[Bn],this[hd]);this[Io](null,e)}[Pt](){if(this[Oo]&&typeof this[oe]=="number"){let e=this[oe];this[oe]=null,st.closeSync(e),this.emit("close")}}[fd](e){let r=!0;try{this[Ao](null,st.writeSync(this[oe],e,0,e.length,this[ls])),r=!1}finally{if(r)try{this[Pt]()}catch{}}}};$i.ReadStream=md;$i.ReadStreamSync=Ih;$i.WriteStream=pd;$i.WriteStreamSync=vh});var Sd=N((ZX,Ub)=>{"use strict";var uD=jc(),hD=Co(),mD=I("events"),pD=lh(),yD=1024*1024,gD=zc(),vb=qc(),ED=qu(),{nextTick:wD}=I("process"),Ph=Buffer.from([31,139]),_t=Symbol("state"),fs=Symbol("writeEntry"),Dr=Symbol("readEntry"),Dh=Symbol("nextEntry"),Pb=Symbol("processEntry"),Rt=Symbol("extendedHeader"),qi=Symbol("globalExtendedHeader"),Fn=Symbol("meta"),Db=Symbol("emitMeta"),le=Symbol("buffer"),Br=Symbol("queue"),us=Symbol("ended"),Bb=Symbol("emittedEnd"),hs=Symbol("emit"),ot=Symbol("unzip"),yd=Symbol("consumeChunk"),gd=Symbol("consumeChunkSub"),Bh=Symbol("consumeBody"),Mb=Symbol("consumeMeta"),Fb=Symbol("consumeHeader"),Ed=Symbol("consuming"),Mh=Symbol("bufferConcat"),Fh=Symbol("maybeEnd"),ji=Symbol("writing"),Ln=Symbol("aborted"),wd=Symbol("onDone"),ms=Symbol("sawValidEntry"),xd=Symbol("sawNullBlock"),Cd=Symbol("sawEOF"),Lb=Symbol("closeStream"),xD=t=>!0;Ub.exports=uD(class extends mD{constructor(e){e=e||{},super(e),this.file=e.file||"",this[ms]=null,this.on(wd,r=>{(this[_t]==="begin"||this[ms]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(wd,e.ondone):this.on(wd,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||yD,this.filter=typeof e.filter=="function"?e.filter:xD,this.writable=!0,this.readable=!1,this[Br]=new pD,this[le]=null,this[Dr]=null,this[fs]=null,this[_t]="begin",this[Fn]="",this[Rt]=null,this[qi]=null,this[us]=!1,this[ot]=null,this[Ln]=!1,this[xd]=!1,this[Cd]=!1,this.on("end",()=>this[Lb]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Fb](e,r){this[ms]===null&&(this[ms]=!1);let n;try{n=new hD(e,r,this[Rt],this[qi])}catch(s){return this.warn("TAR_ENTRY_INVALID",s)}if(n.nullBlock)this[xd]?(this[Cd]=!0,this[_t]==="begin"&&(this[_t]="header"),this[hs]("eof")):(this[xd]=!0,this[hs]("nullBlock"));else if(this[xd]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let s=n.type;if(/^(Symbolic)?Link$/.test(s)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(s)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[fs]=new gD(n,this[Rt],this[qi]);if(!this[ms])if(o.remain){let i=()=>{o.invalid||(this[ms]=!0)};o.on("end",i)}else this[ms]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[hs]("ignoredEntry",o),this[_t]="ignore",o.resume()):o.size>0&&(this[Fn]="",o.on("data",i=>this[Fn]+=i),this[_t]="meta"):(this[Rt]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[hs]("ignoredEntry",o),this[_t]=o.remain?"ignore":"header",o.resume()):(o.remain?this[_t]="body":(this[_t]="header",o.end()),this[Dr]?this[Br].push(o):(this[Br].push(o),this[Dh]())))}}}[Lb](){wD(()=>this.emit("close"))}[Pb](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Dr]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[Dh]()),r=!1)):(this[Dr]=null,r=!1),r}[Dh](){do;while(this[Pb](this[Br].shift()));if(!this[Br].length){let e=this[Dr];!e||e.flowing||e.size===e.remain?this[ji]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[Bh](e,r){let n=this[fs],s=n.blockRemain,o=s>=e.length&&r===0?e:e.slice(r,r+s);return n.write(o),n.blockRemain||(this[_t]="header",this[fs]=null,n.end()),o.length}[Mb](e,r){let n=this[fs],s=this[Bh](e,r);return this[fs]||this[Db](n),s}[hs](e,r,n){!this[Br].length&&!this[Dr]?this.emit(e,r,n):this[Br].push([e,r,n])}[Db](e){switch(this[hs]("meta",this[Fn]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Rt]=vb.parse(this[Fn],this[Rt],!1);break;case"GlobalExtendedHeader":this[qi]=vb.parse(this[Fn],this[qi],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Rt]=this[Rt]||Object.create(null),this[Rt].path=this[Fn].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Rt]=this[Rt]||Object.create(null),this[Rt].linkpath=this[Fn].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Ln]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Ln])return;if(this[ot]===null&&e){if(this[le]&&(e=Buffer.concat([this[le],e]),this[le]=null),e.length<Ph.length)return this[le]=e,!0;for(let n=0;this[ot]===null&&n<Ph.length;n++)e[n]!==Ph[n]&&(this[ot]=!1);if(this[ot]===null){let n=this[us];this[us]=!1,this[ot]=new ED.Unzip,this[ot].on("data",o=>this[yd](o)),this[ot].on("error",o=>this.abort(o)),this[ot].on("end",o=>{this[us]=!0,this[yd]()}),this[ji]=!0;let s=this[ot][n?"end":"write"](e);return this[ji]=!1,s}}this[ji]=!0,this[ot]?this[ot].write(e):this[yd](e),this[ji]=!1;let r=this[Br].length?!1:this[Dr]?this[Dr].flowing:!0;return!r&&!this[Br].length&&this[Dr].once("drain",n=>this.emit("drain")),r}[Mh](e){e&&!this[Ln]&&(this[le]=this[le]?Buffer.concat([this[le],e]):e)}[Fh](){if(this[us]&&!this[Bb]&&!this[Ln]&&!this[Ed]){this[Bb]=!0;let e=this[fs];if(e&&e.blockRemain){let r=this[le]?this[le].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[le]&&e.write(this[le]),e.end()}this[hs](wd)}}[yd](e){if(this[Ed])this[Mh](e);else if(!e&&!this[le])this[Fh]();else{if(this[Ed]=!0,this[le]){this[Mh](e);let r=this[le];this[le]=null,this[gd](r)}else this[gd](e);for(;this[le]&&this[le].length>=512&&!this[Ln]&&!this[Cd];){let r=this[le];this[le]=null,this[gd](r)}this[Ed]=!1}(!this[le]||this[us])&&this[Fh]()}[gd](e){let r=0,n=e.length;for(;r+512<=n&&!this[Ln]&&!this[Cd];)switch(this[_t]){case"begin":case"header":this[Fb](e,r),r+=512;break;case"ignore":case"body":r+=this[Bh](e,r);break;case"meta":r+=this[Mb](e,r);break;default:throw new Error("invalid state: "+this[_t])}r<n&&(this[le]?this[le]=Buffer.concat([e.slice(r),this[le]]):this[le]=e.slice(r))}end(e){this[Ln]||(this[ot]?this[ot].end(e):(this[us]=!0,this.write(e)))}})});var bd=N((JX,jb)=>{"use strict";var CD=mo(),$b=Sd(),Po=I("fs"),SD=vo(),zb=I("path"),Lh=So();jb.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=CD(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&_D(n,e),n.noResume||bD(n),n.file&&n.sync?RD(n):n.file?AD(n,r):qb(n)};var bD=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},_D=(t,e)=>{let r=new Map(e.map(o=>[Lh(o),!0])),n=t.filter,s=(o,i)=>{let a=i||zb.parse(o).root||".",d=o===a?!1:r.has(o)?r.get(o):s(zb.dirname(o),a);return r.set(o,d),d};t.filter=n?(o,i)=>n(o,i)&&s(Lh(o)):o=>s(Lh(o))},RD=t=>{let e=qb(t),r=t.file,n=!0,s;try{let o=Po.statSync(r),i=t.maxReadSize||16*1024*1024;if(o.size<i)e.end(Po.readFileSync(r));else{let a=0,d=Buffer.allocUnsafe(i);for(s=Po.openSync(r,"r");a<o.size;){let c=Po.readSync(s,d,0,i,a);a+=c,e.write(d.slice(0,c))}e.end()}n=!1}finally{if(n&&s)try{Po.closeSync(s)}catch{}}},AD=(t,e)=>{let r=new $b(t),n=t.maxReadSize||16*1024*1024,s=t.file,o=new Promise((i,a)=>{r.on("error",a),r.on("end",i),Po.stat(s,(d,c)=>{if(d)a(d);else{let l=new SD.ReadStream(s,{readSize:n,size:c.size});l.on("error",a),l.pipe(r)}})});return e?o.then(e,e):o},qb=t=>new $b(t)});var Yb=N((eQ,Wb)=>{"use strict";var kD=mo(),_d=nd(),Gb=vo(),Kb=bd(),Hb=I("path");Wb.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=kD(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?TD(n,e):n.file?ND(n,e,r):n.sync?OD(n,e):ID(n,e)};var TD=(t,e)=>{let r=new _d.Sync(t),n=new Gb.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),Vb(r,e)},ND=(t,e,r)=>{let n=new _d(t),s=new Gb.WriteStream(t.file,{mode:t.mode||438});n.pipe(s);let o=new Promise((i,a)=>{s.on("error",a),s.on("close",i),n.on("error",a)});return Uh(n,e),r?o.then(r,r):o},Vb=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Kb({file:Hb.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Uh=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Kb({file:Hb.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Uh(t,e));t.add(r)}t.end()},OD=(t,e)=>{let r=new _d.Sync(t);return Vb(r,e),r},ID=(t,e)=>{let r=new _d(t);return Uh(r,e),r}});var zh=N((tQ,r0)=>{"use strict";var vD=mo(),Xb=nd(),dt=I("fs"),Qb=vo(),Zb=bd(),Jb=I("path"),e0=Co();r0.exports=(t,e,r)=>{let n=vD(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?PD(n,e):BD(n,e,r)};var PD=(t,e)=>{let r=new Xb.Sync(t),n=!0,s,o;try{try{s=dt.openSync(t.file,"r+")}catch(d){if(d.code==="ENOENT")s=dt.openSync(t.file,"w+");else throw d}let i=dt.fstatSync(s),a=Buffer.alloc(512);e:for(o=0;o<i.size;o+=512){for(let l=0,u=0;l<512;l+=u){if(u=dt.readSync(s,a,l,a.length-l,o+l),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!u)break e}let d=new e0(a);if(!d.cksumValid)break;let c=512*Math.ceil(d.size/512);if(o+c+512>i.size)break;o+=c,t.mtimeCache&&t.mtimeCache.set(d.path,d.mtime)}n=!1,DD(t,r,o,s,e)}finally{if(n)try{dt.closeSync(s)}catch{}}},DD=(t,e,r,n,s)=>{let o=new Qb.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),MD(e,s)},BD=(t,e,r)=>{e=Array.from(e);let n=new Xb(t),s=(i,a,d)=>{let c=(S,b)=>{S?dt.close(i,R=>d(S)):d(null,b)},l=0;if(a===0)return c(null,0);let u=0,h=Buffer.alloc(512),w=(S,b)=>{if(S)return c(S);if(u+=b,u<512&&b)return dt.read(i,h,u,h.length-u,l+u,w);if(l===0&&h[0]===31&&h[1]===139)return c(new Error("cannot append to compressed archives"));if(u<512)return c(null,l);let R=new e0(h);if(!R.cksumValid)return c(null,l);let K=512*Math.ceil(R.size/512);if(l+K+512>a||(l+=K+512,l>=a))return c(null,l);t.mtimeCache&&t.mtimeCache.set(R.path,R.mtime),u=0,dt.read(i,h,0,512,l,w)};dt.read(i,h,0,512,l,w)},o=new Promise((i,a)=>{n.on("error",a);let d="r+",c=(l,u)=>{if(l&&l.code==="ENOENT"&&d==="r+")return d="w+",dt.open(t.file,d,c);if(l)return a(l);dt.fstat(u,(h,w)=>{if(h)return dt.close(u,()=>a(h));s(u,w.size,(S,b)=>{if(S)return a(S);let R=new Qb.WriteStream(t.file,{fd:u,start:b});n.pipe(R),R.on("error",a),R.on("close",i),t0(n,e)})})};dt.open(t.file,d,c)});return r?o.then(r,r):o},MD=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Zb({file:Jb.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},t0=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Zb({file:Jb.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>t0(t,e));t.add(r)}t.end()}});var s0=N((rQ,n0)=>{"use strict";var FD=mo(),LD=zh();n0.exports=(t,e,r)=>{let n=FD(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),UD(n),LD(n,e,r)};var UD=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var a0=N((nQ,i0)=>{var{promisify:o0}=I("util"),Un=I("fs"),zD=t=>{if(!t)t={mode:511,fs:Un};else if(typeof t=="object")t={mode:511,fs:Un,...t};else if(typeof t=="number")t={mode:t,fs:Un};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Un};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Un.mkdir,t.mkdirAsync=o0(t.mkdir),t.stat=t.stat||t.fs.stat||Un.stat,t.statAsync=o0(t.stat),t.statSync=t.statSync||t.fs.statSync||Un.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Un.mkdirSync,t};i0.exports=zD});var d0=N((sQ,c0)=>{var $D=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:qD,parse:jD}=I("path"),GD=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=qD(t),$D==="win32"){let e=/[*|"<>?:]/,{root:r}=jD(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};c0.exports=GD});var m0=N((oQ,h0)=>{var{dirname:l0}=I("path"),f0=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?f0(t,l0(e),e):void 0),u0=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?u0(t,l0(e),e):void 0}};h0.exports={findMade:f0,findMadeSync:u0}});var jh=N((iQ,y0)=>{var{dirname:p0}=I("path"),$h=(t,e,r)=>{e.recursive=!1;let n=p0(t);return n===t?e.mkdirAsync(t,e).catch(s=>{if(s.code!=="EISDIR")throw s}):e.mkdirAsync(t,e).then(()=>r||t,s=>{if(s.code==="ENOENT")return $h(n,e).then(o=>$h(t,e,o));if(s.code!=="EEXIST"&&s.code!=="EROFS")throw s;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw s},()=>{throw s})})},qh=(t,e,r)=>{let n=p0(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(s){if(s.code!=="EISDIR")throw s;return}try{return e.mkdirSync(t,e),r||t}catch(s){if(s.code==="ENOENT")return qh(t,e,qh(n,e,r));if(s.code!=="EEXIST"&&s.code!=="EROFS")throw s;try{if(!e.statSync(t).isDirectory())throw s}catch{throw s}}};y0.exports={mkdirpManual:$h,mkdirpManualSync:qh}});var w0=N((aQ,E0)=>{var{dirname:g0}=I("path"),{findMade:KD,findMadeSync:HD}=m0(),{mkdirpManual:VD,mkdirpManualSync:WD}=jh(),YD=(t,e)=>(e.recursive=!0,g0(t)===t?e.mkdirAsync(t,e):KD(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(s=>{if(s.code==="ENOENT")return VD(t,e);throw s}))),XD=(t,e)=>{if(e.recursive=!0,g0(t)===t)return e.mkdirSync(t,e);let n=HD(e,t);try{return e.mkdirSync(t,e),n}catch(s){if(s.code==="ENOENT")return WD(t,e);throw s}};E0.exports={mkdirpNative:YD,mkdirpNativeSync:XD}});var b0=N((cQ,S0)=>{var x0=I("fs"),QD=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Gh=QD.replace(/^v/,"").split("."),C0=+Gh[0]>10||+Gh[0]==10&&+Gh[1]>=12,ZD=C0?t=>t.mkdir===x0.mkdir:()=>!1,JD=C0?t=>t.mkdirSync===x0.mkdirSync:()=>!1;S0.exports={useNative:ZD,useNativeSync:JD}});var N0=N((dQ,T0)=>{var Do=a0(),Bo=d0(),{mkdirpNative:_0,mkdirpNativeSync:R0}=w0(),{mkdirpManual:A0,mkdirpManualSync:k0}=jh(),{useNative:eB,useNativeSync:tB}=b0(),Mo=(t,e)=>(t=Bo(t),e=Do(e),eB(e)?_0(t,e):A0(t,e)),rB=(t,e)=>(t=Bo(t),e=Do(e),tB(e)?R0(t,e):k0(t,e));Mo.sync=rB;Mo.native=(t,e)=>_0(Bo(t),Do(e));Mo.manual=(t,e)=>A0(Bo(t),Do(e));Mo.nativeSync=(t,e)=>R0(Bo(t),Do(e));Mo.manualSync=(t,e)=>k0(Bo(t),Do(e));T0.exports=Mo});var M0=N((lQ,B0)=>{"use strict";var At=I("fs"),ps=I("path"),nB=At.lchown?"lchown":"chown",sB=At.lchownSync?"lchownSync":"chownSync",I0=At.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),O0=(t,e,r)=>{try{return At[sB](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},oB=(t,e,r)=>{try{return At.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},iB=I0?(t,e,r,n)=>s=>{!s||s.code!=="EISDIR"?n(s):At.chown(t,e,r,n)}:(t,e,r,n)=>n,Kh=I0?(t,e,r)=>{try{return O0(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;oB(t,e,r)}}:(t,e,r)=>O0(t,e,r),aB=process.version,v0=(t,e,r)=>At.readdir(t,e,r),cB=(t,e)=>At.readdirSync(t,e);/^v4\./.test(aB)&&(v0=(t,e,r)=>At.readdir(t,r));var Rd=(t,e,r,n)=>{At[nB](t,e,r,iB(t,e,r,s=>{n(s&&s.code!=="ENOENT"?s:null)}))},P0=(t,e,r,n,s)=>{if(typeof e=="string")return At.lstat(ps.resolve(t,e),(o,i)=>{if(o)return s(o.code!=="ENOENT"?o:null);i.name=e,P0(t,i,r,n,s)});if(e.isDirectory())Hh(ps.resolve(t,e.name),r,n,o=>{if(o)return s(o);let i=ps.resolve(t,e.name);Rd(i,r,n,s)});else{let o=ps.resolve(t,e.name);Rd(o,r,n,s)}},Hh=(t,e,r,n)=>{v0(t,{withFileTypes:!0},(s,o)=>{if(s){if(s.code==="ENOENT")return n();if(s.code!=="ENOTDIR"&&s.code!=="ENOTSUP")return n(s)}if(s||!o.length)return Rd(t,e,r,n);let i=o.length,a=null,d=c=>{if(!a){if(c)return n(a=c);if(--i===0)return Rd(t,e,r,n)}};o.forEach(c=>P0(t,c,e,r,d))})},dB=(t,e,r,n)=>{if(typeof e=="string")try{let s=At.lstatSync(ps.resolve(t,e));s.name=e,e=s}catch(s){if(s.code==="ENOENT")return;throw s}e.isDirectory()&&D0(ps.resolve(t,e.name),r,n),Kh(ps.resolve(t,e.name),r,n)},D0=(t,e,r)=>{let n;try{n=cB(t,{withFileTypes:!0})}catch(s){if(s.code==="ENOENT")return;if(s.code==="ENOTDIR"||s.code==="ENOTSUP")return Kh(t,e,r);throw s}return n&&n.length&&n.forEach(s=>dB(t,s,e,r)),Kh(t,e,r)};B0.exports=Hh;Hh.sync=D0});var z0=N((fQ,Vh)=>{"use strict";var F0=N0(),kt=I("fs"),Ad=I("path"),L0=M0(),Dt=wo(),kd=class extends Error{constructor(e,r){super("Cannot extract through symbolic link"),this.path=r,this.symlink=e}get name(){return"SylinkError"}},Td=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'"),this.path=e,this.code=r}get name(){return"CwdError"}},Nd=(t,e)=>t.get(Dt(e)),Gi=(t,e,r)=>t.set(Dt(e),r),lB=(t,e)=>{kt.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Td(t,r&&r.code||"ENOTDIR")),e(r)})};Vh.exports=(t,e,r)=>{t=Dt(t);let n=e.umask,s=e.mode|448,o=(s&n)!==0,i=e.uid,a=e.gid,d=typeof i=="number"&&typeof a=="number"&&(i!==e.processUid||a!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,h=Dt(e.cwd),w=(R,K)=>{R?r(R):(Gi(u,t,!0),K&&d?L0(K,i,a,Bt=>w(Bt)):o?kt.chmod(t,s,r):r())};if(u&&Nd(u,t)===!0)return w();if(t===h)return lB(t,w);if(c)return F0(t,{mode:s}).then(R=>w(null,R),w);let b=Dt(Ad.relative(h,t)).split("/");Od(h,b,s,u,l,h,null,w)};var Od=(t,e,r,n,s,o,i,a)=>{if(!e.length)return a(null,i);let d=e.shift(),c=Dt(Ad.resolve(t+"/"+d));if(Nd(n,c))return Od(c,e,r,n,s,o,i,a);kt.mkdir(c,r,U0(c,e,r,n,s,o,i,a))},U0=(t,e,r,n,s,o,i,a)=>d=>{d?kt.lstat(t,(c,l)=>{if(c)c.path=c.path&&Dt(c.path),a(c);else if(l.isDirectory())Od(t,e,r,n,s,o,i,a);else if(s)kt.unlink(t,u=>{if(u)return a(u);kt.mkdir(t,r,U0(t,e,r,n,s,o,i,a))});else{if(l.isSymbolicLink())return a(new kd(t,t+"/"+e.join("/")));a(d)}}):(i=i||t,Od(t,e,r,n,s,o,i,a))},fB=t=>{let e=!1,r="ENOTDIR";try{e=kt.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Td(t,r)}};Vh.exports.sync=(t,e)=>{t=Dt(t);let r=e.umask,n=e.mode|448,s=(n&r)!==0,o=e.uid,i=e.gid,a=typeof o=="number"&&typeof i=="number"&&(o!==e.processUid||i!==e.processGid),d=e.preserve,c=e.unlink,l=e.cache,u=Dt(e.cwd),h=R=>{Gi(l,t,!0),R&&a&&L0.sync(R,o,i),s&&kt.chmodSync(t,n)};if(l&&Nd(l,t)===!0)return h();if(t===u)return fB(u),h();if(d)return h(F0.sync(t,n));let S=Dt(Ad.relative(u,t)).split("/"),b=null;for(let R=S.shift(),K=u;R&&(K+="/"+R);R=S.shift())if(K=Dt(Ad.resolve(K)),!Nd(l,K))try{kt.mkdirSync(K,n),b=b||K,Gi(l,K,!0)}catch{let Ne=kt.lstatSync(K);if(Ne.isDirectory()){Gi(l,K,!0);continue}else if(c){kt.unlinkSync(K),kt.mkdirSync(K,n),b=b||K,Gi(l,K,!0);continue}else if(Ne.isSymbolicLink())return new kd(K,K+"/"+S.join("/"))}return h(b)}});var Yh=N((uQ,$0)=>{var Wh=Object.create(null),{hasOwnProperty:uB}=Object.prototype;$0.exports=t=>(uB.call(Wh,t)||(Wh[t]=t.normalize("NFKD")),Wh[t])});var K0=N((hQ,G0)=>{var q0=I("assert"),hB=Yh(),mB=So(),{join:j0}=I("path"),pB=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,yB=pB==="win32";G0.exports=()=>{let t=new Map,e=new Map,r=c=>c.split("/").slice(0,-1).reduce((u,h)=>(u.length&&(h=j0(u[u.length-1],h)),u.push(h||"/"),u),[]),n=new Set,s=c=>{let l=e.get(c);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(u=>t.get(u)),dirs:[...l.dirs].map(u=>t.get(u))}},o=c=>{let{paths:l,dirs:u}=s(c);return l.every(h=>h[0]===c)&&u.every(h=>h[0]instanceof Set&&h[0].has(c))},i=c=>n.has(c)||!o(c)?!1:(n.add(c),c(()=>a(c)),!0),a=c=>{if(!n.has(c))return!1;let{paths:l,dirs:u}=e.get(c),h=new Set;return l.forEach(w=>{let S=t.get(w);q0.equal(S[0],c),S.length===1?t.delete(w):(S.shift(),typeof S[0]=="function"?h.add(S[0]):S[0].forEach(b=>h.add(b)))}),u.forEach(w=>{let S=t.get(w);q0(S[0]instanceof Set),S[0].size===1&&S.length===1?t.delete(w):S[0].size===1?(S.shift(),h.add(S[0])):S[0].delete(c)}),n.delete(c),h.forEach(w=>i(w)),!0};return{check:o,reserve:(c,l)=>{c=yB?["win32 parallelization disabled"]:c.map(h=>hB(mB(j0(h))).toLowerCase());let u=new Set(c.map(h=>r(h)).reduce((h,w)=>h.concat(w)));return e.set(l,{dirs:u,paths:c}),c.forEach(h=>{let w=t.get(h);w?w.push(l):t.set(h,[l])}),u.forEach(h=>{let w=t.get(h);w?w[w.length-1]instanceof Set?w[w.length-1].add(l):w.push(new Set([l])):t.set(h,[new Set([l])])}),i(l)}}}});var W0=N((mQ,V0)=>{var gB=process.env.__FAKE_PLATFORM__||process.platform,EB=gB==="win32",wB=global.__FAKE_TESTING_FS__||I("fs"),{O_CREAT:xB,O_TRUNC:CB,O_WRONLY:SB,UV_FS_O_FILEMAP:H0=0}=wB.constants,bB=EB&&!!H0,_B=512*1024,RB=H0|CB|xB|SB;V0.exports=bB?t=>t<_B?RB:"w":()=>"w"});var sm=N((pQ,c_)=>{"use strict";var AB=I("assert"),kB=Sd(),Q=I("fs"),TB=vo(),Mr=I("path"),o_=z0(),Y0=Zu(),NB=K0(),OB=Ju(),lt=wo(),IB=So(),vB=Yh(),X0=Symbol("onEntry"),Zh=Symbol("checkFs"),Q0=Symbol("checkFs2"),Pd=Symbol("pruneCache"),Jh=Symbol("isReusable"),Tt=Symbol("makeFs"),em=Symbol("file"),tm=Symbol("directory"),Dd=Symbol("link"),Z0=Symbol("symlink"),J0=Symbol("hardlink"),e_=Symbol("unsupported"),t_=Symbol("checkPath"),zn=Symbol("mkdir"),Ge=Symbol("onError"),Id=Symbol("pending"),r_=Symbol("pend"),Fo=Symbol("unpend"),Xh=Symbol("ended"),Qh=Symbol("maybeClose"),rm=Symbol("skip"),Ki=Symbol("doChown"),Hi=Symbol("uid"),Vi=Symbol("gid"),Wi=Symbol("checkedCwd"),i_=I("crypto"),a_=W0(),PB=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Yi=PB==="win32",DB=(t,e)=>{if(!Yi)return Q.unlink(t,e);let r=t+".DELETE."+i_.randomBytes(16).toString("hex");Q.rename(t,r,n=>{if(n)return e(n);Q.unlink(r,e)})},BB=t=>{if(!Yi)return Q.unlinkSync(t);let e=t+".DELETE."+i_.randomBytes(16).toString("hex");Q.renameSync(t,e),Q.unlinkSync(e)},n_=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,s_=t=>vB(IB(lt(t))).toLowerCase(),MB=(t,e)=>{e=s_(e);for(let r of t.keys()){let n=s_(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},FB=t=>{for(let e of t.keys())t.delete(e)},Xi=class extends kB{constructor(e){if(e||(e={}),e.ondone=r=>{this[Xh]=!0,this[Qh]()},super(e),this[Wi]=!1,this.reservations=NB(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Id]=0,this[Xh]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Yi,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=lt(Mr.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[X0](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[Qh](){this[Xh]&&this[Id]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[t_](e){if(this.strip){let r=lt(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=lt(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=lt(e.path),n=r.split("/");if(n.includes("..")||Yi&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[s,o]=OB(r);s&&(e.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:e,path:r}))}if(Mr.isAbsolute(e.path)?e.absolute=lt(Mr.resolve(e.path)):e.absolute=lt(Mr.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:lt(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Mr.win32.parse(e.absolute);e.absolute=r+Y0.encode(e.absolute.slice(r.length));let{root:n}=Mr.win32.parse(e.path);e.path=n+Y0.encode(e.path.slice(n.length))}return!0}[X0](e){if(!this[t_](e))return e.resume();switch(AB.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Zh](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[e_](e)}}[Ge](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Fo](),r.resume())}[zn](e,r,n){o_(lt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Ki](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Hi](e){return n_(this.uid,e.uid,this.processUid)}[Vi](e){return n_(this.gid,e.gid,this.processGid)}[em](e,r){let n=e.mode&4095||this.fmode,s=new TB.WriteStream(e.absolute,{flags:a_(e.size),mode:n,autoClose:!1});s.on("error",d=>{s.fd&&Q.close(s.fd,()=>{}),s.write=()=>!0,this[Ge](d,e),r()});let o=1,i=d=>{if(d){s.fd&&Q.close(s.fd,()=>{}),this[Ge](d,e),r();return}--o===0&&Q.close(s.fd,c=>{c?this[Ge](c,e):this[Fo](),r()})};s.on("finish",d=>{let c=e.absolute,l=s.fd;if(e.mtime&&!this.noMtime){o++;let u=e.atime||new Date,h=e.mtime;Q.futimes(l,u,h,w=>w?Q.utimes(c,u,h,S=>i(S&&w)):i())}if(this[Ki](e)){o++;let u=this[Hi](e),h=this[Vi](e);Q.fchown(l,u,h,w=>w?Q.chown(c,u,h,S=>i(S&&w)):i())}i()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",d=>{this[Ge](d,e),r()}),e.pipe(a)),a.pipe(s)}[tm](e,r){let n=e.mode&4095||this.dmode;this[zn](e.absolute,n,s=>{if(s){this[Ge](s,e),r();return}let o=1,i=a=>{--o===0&&(r(),this[Fo](),e.resume())};e.mtime&&!this.noMtime&&(o++,Q.utimes(e.absolute,e.atime||new Date,e.mtime,i)),this[Ki](e)&&(o++,Q.chown(e.absolute,this[Hi](e),this[Vi](e),i)),i()})}[e_](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Z0](e,r){this[Dd](e,e.linkpath,"symlink",r)}[J0](e,r){let n=lt(Mr.resolve(this.cwd,e.linkpath));this[Dd](e,n,"link",r)}[r_](){this[Id]++}[Fo](){this[Id]--,this[Qh]()}[rm](e){this[Fo](),e.resume()}[Jh](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Yi}[Zh](e){this[r_]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[Q0](e,n))}[Pd](e){e.type==="SymbolicLink"?FB(this.dirCache):e.type!=="Directory"&&MB(this.dirCache,e.absolute)}[Q0](e,r){this[Pd](e);let n=a=>{this[Pd](e),r(a)},s=()=>{this[zn](this.cwd,this.dmode,a=>{if(a){this[Ge](a,e),n();return}this[Wi]=!0,o()})},o=()=>{if(e.absolute!==this.cwd){let a=lt(Mr.dirname(e.absolute));if(a!==this.cwd)return this[zn](a,this.dmode,d=>{if(d){this[Ge](d,e),n();return}i()})}i()},i=()=>{Q.lstat(e.absolute,(a,d)=>{if(d&&(this.keep||this.newer&&d.mtime>e.mtime)){this[rm](e),n();return}if(a||this[Jh](e,d))return this[Tt](null,e,n);if(d.isDirectory()){if(e.type==="Directory"){let c=!this.noChmod&&e.mode&&(d.mode&4095)!==e.mode,l=u=>this[Tt](u,e,n);return c?Q.chmod(e.absolute,e.mode,l):l()}if(e.absolute!==this.cwd)return Q.rmdir(e.absolute,c=>this[Tt](c,e,n))}if(e.absolute===this.cwd)return this[Tt](null,e,n);DB(e.absolute,c=>this[Tt](c,e,n))})};this[Wi]?o():s()}[Tt](e,r,n){if(e){this[Ge](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[em](r,n);case"Link":return this[J0](r,n);case"SymbolicLink":return this[Z0](r,n);case"Directory":case"GNUDumpDir":return this[tm](r,n)}}[Dd](e,r,n,s){Q[n](r,e.absolute,o=>{o?this[Ge](o,e):(this[Fo](),e.resume()),s()})}},vd=t=>{try{return[null,t()]}catch(e){return[e,null]}},nm=class extends Xi{[Tt](e,r){return super[Tt](e,r,()=>{})}[Zh](e){if(this[Pd](e),!this[Wi]){let o=this[zn](this.cwd,this.dmode);if(o)return this[Ge](o,e);this[Wi]=!0}if(e.absolute!==this.cwd){let o=lt(Mr.dirname(e.absolute));if(o!==this.cwd){let i=this[zn](o,this.dmode);if(i)return this[Ge](i,e)}}let[r,n]=vd(()=>Q.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[rm](e);if(r||this[Jh](e,n))return this[Tt](null,e);if(n.isDirectory()){if(e.type==="Directory"){let i=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=i?vd(()=>{Q.chmodSync(e.absolute,e.mode)}):[];return this[Tt](a,e)}let[o]=vd(()=>Q.rmdirSync(e.absolute));this[Tt](o,e)}let[s]=e.absolute===this.cwd?[]:vd(()=>BB(e.absolute));this[Tt](s,e)}[em](e,r){let n=e.mode&4095||this.fmode,s=a=>{let d;try{Q.closeSync(o)}catch(c){d=c}(a||d)&&this[Ge](a||d,e),r()},o;try{o=Q.openSync(e.absolute,a_(e.size),n)}catch(a){return s(a)}let i=this.transform&&this.transform(e)||e;i!==e&&(i.on("error",a=>this[Ge](a,e)),e.pipe(i)),i.on("data",a=>{try{Q.writeSync(o,a,0,a.length)}catch(d){s(d)}}),i.on("end",a=>{let d=null;if(e.mtime&&!this.noMtime){let c=e.atime||new Date,l=e.mtime;try{Q.futimesSync(o,c,l)}catch(u){try{Q.utimesSync(e.absolute,c,l)}catch{d=u}}}if(this[Ki](e)){let c=this[Hi](e),l=this[Vi](e);try{Q.fchownSync(o,c,l)}catch(u){try{Q.chownSync(e.absolute,c,l)}catch{d=d||u}}}s(d)})}[tm](e,r){let n=e.mode&4095||this.dmode,s=this[zn](e.absolute,n);if(s){this[Ge](s,e),r();return}if(e.mtime&&!this.noMtime)try{Q.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Ki](e))try{Q.chownSync(e.absolute,this[Hi](e),this[Vi](e))}catch{}r(),e.resume()}[zn](e,r){try{return o_.sync(lt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Dd](e,r,n,s){try{Q[n+"Sync"](r,e.absolute),s(),e.resume()}catch(o){return this[Ge](o,e)}}};Xi.Sync=nm;c_.exports=Xi});var h_=N((yQ,u_)=>{"use strict";var LB=mo(),Bd=sm(),l_=I("fs"),f_=vo(),d_=I("path"),om=So();u_.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=LB(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&UB(n,e),n.file&&n.sync?zB(n):n.file?$B(n,r):n.sync?qB(n):jB(n)};var UB=(t,e)=>{let r=new Map(e.map(o=>[om(o),!0])),n=t.filter,s=(o,i)=>{let a=i||d_.parse(o).root||".",d=o===a?!1:r.has(o)?r.get(o):s(d_.dirname(o),a);return r.set(o,d),d};t.filter=n?(o,i)=>n(o,i)&&s(om(o)):o=>s(om(o))},zB=t=>{let e=new Bd.Sync(t),r=t.file,n=l_.statSync(r),s=t.maxReadSize||16*1024*1024;new f_.ReadStreamSync(r,{readSize:s,size:n.size}).pipe(e)},$B=(t,e)=>{let r=new Bd(t),n=t.maxReadSize||16*1024*1024,s=t.file,o=new Promise((i,a)=>{r.on("error",a),r.on("close",i),l_.stat(s,(d,c)=>{if(d)a(d);else{let l=new f_.ReadStream(s,{readSize:n,size:c.size});l.on("error",a),l.pipe(r)}})});return e?o.then(e,e):o},qB=t=>new Bd.Sync(t),jB=t=>new Bd(t)});var m_=N(be=>{"use strict";be.c=be.create=Yb();be.r=be.replace=zh();be.t=be.list=bd();be.u=be.update=s0();be.x=be.extract=h_();be.Pack=nd();be.Unpack=sm();be.Parse=Sd();be.ReadEntry=zc();be.WriteEntry=dh();be.Header=Co();be.Pax=qc();be.types=Ku()});var ft=Fr(Jd(),1);import{posix as GB}from"node:path";import{setInterval as KB,clearInterval as HB}from"node:timers";var Ft=class{trace(){}debug(){}info(){}warn(){}error(){}};var _s=()=>{let t=[],e=[],r=new Set,n=l=>l.sort((u,h)=>sp[h.step]-sp[u.step]||op[h.priority||"normal"]-op[u.priority||"normal"]),s=l=>{let u=!1,h=w=>w.name&&w.name===l?(u=!0,r.delete(l),!1):!0;return t=t.filter(h),e=e.filter(h),u},o=l=>{let u=!1,h=w=>w.middleware===l?(u=!0,w.name&&r.delete(w.name),!1):!0;return t=t.filter(h),e=e.filter(h),u},i=l=>(t.forEach(u=>{l.add(u.middleware,{...u})}),e.forEach(u=>{l.addRelativeTo(u.middleware,{...u})}),l),a=l=>{let u=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...a(h))}),u.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...a(h))}),u},d=(l=!1)=>{let u=[],h=[],w={};return t.forEach(b=>{let R={...b,before:[],after:[]};R.name&&(w[R.name]=R),u.push(R)}),e.forEach(b=>{let R={...b,before:[],after:[]};R.name&&(w[R.name]=R),h.push(R)}),h.forEach(b=>{if(b.toMiddleware){let R=w[b.toMiddleware];if(R===void 0){if(l)return;throw new Error(`${b.toMiddleware} is not found when adding ${b.name||"anonymous"} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&R.after.push(b),b.relation==="before"&&R.before.push(b)}}),n(u).map(a).reduce((b,R)=>(b.push(...R),b),[])},c={add:(l,u={})=>{let{name:h,override:w}=u,S={step:"initialize",priority:"normal",middleware:l,...u};if(h){if(r.has(h)){if(!w)throw new Error(`Duplicate middleware name '${h}'`);let b=t.findIndex(K=>K.name===h),R=t[b];if(R.step!==S.step||R.priority!==S.priority)throw new Error(`"${h}" middleware with ${R.priority} priority in ${R.step} step cannot be overridden by same-name middleware with ${S.priority} priority in ${S.step} step.`);t.splice(b,1)}r.add(h)}t.push(S)},addRelativeTo:(l,u)=>{let{name:h,override:w}=u,S={middleware:l,...u};if(h){if(r.has(h)){if(!w)throw new Error(`Duplicate middleware name '${h}'`);let b=e.findIndex(K=>K.name===h),R=e[b];if(R.toMiddleware!==S.toMiddleware||R.relation!==S.relation)throw new Error(`"${h}" middleware ${R.relation} "${R.toMiddleware}" middleware cannot be overridden by same-name middleware ${S.relation} "${S.toMiddleware}" middleware.`);e.splice(b,1)}r.add(h)}e.push(S)},clone:()=>i(_s()),use:l=>{l.applyToStack(c)},remove:l=>typeof l=="string"?s(l):o(l),removeByTag:l=>{let u=!1,h=w=>{let{tags:S,name:b}=w;return S&&S.includes(l)?(b&&r.delete(b),u=!0,!1):!0};return t=t.filter(h),e=e.filter(h),u},concat:l=>{let u=i(_s());return u.use(l),u},applyToStack:i,identify:()=>d(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,u)=>{for(let h of d().map(w=>w.middleware).reverse())l=h(l,u);return l}};return c},sp={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},op={high:3,normal:2,low:1};var Lt=class{constructor(e){this.middlewareStack=_s(),this.config=e}send(e,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)i(e).then(a=>o(null,a.output),a=>o(a)).catch(()=>{});else return i(e).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var pt=class{constructor(){this.middlewareStack=_s()}};var jn="***SensitiveInformation***";var il=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}};var eA=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&hp.warn(up(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},tA=Math.ceil(34028234663852886e22),ip=t=>{let e=eA(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>tA)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},da=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}};var la=t=>al(t,32),ap=t=>al(t,16),cp=t=>al(t,8),al=(t,e)=>{let r=da(t);if(r!==void 0&&rA(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},rA=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},yt=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},qo=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},D=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return hp.warn(up(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}};var dp=t=>ip(typeof t=="string"?jo(t):t),nA=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,jo=t=>{let e=t.match(nA);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)};var lp=t=>da(typeof t=="string"?jo(t):t);var Gn=t=>la(typeof t=="string"?jo(t):t),Go=t=>ap(typeof t=="string"?jo(t):t),fp=t=>cp(typeof t=="string"?jo(t):t),up=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),hp={warn:console.warn};var sA=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ua(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),i=t.getUTCMinutes(),a=t.getUTCSeconds(),d=s<10?`0${s}`:`${s}`,c=o<10?`0${o}`:`${o}`,l=i<10?`0${i}`:`${i}`,u=a<10?`0${a}`:`${a}`;return`${sA[n]}, ${d} ${dl[r]} ${e} ${c}:${l}:${u} GMT`}var aM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var oA=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),ha=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=oA.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,d,c,l]=e,u=Go(Ko(n)),h=jr(s,"month",1,12),w=jr(o,"day",1,31),S=fa(u,h,w,{hours:i,minutes:a,seconds:d,fractionalMilliseconds:c});return l.toUpperCase()!="Z"&&S.setTime(S.getTime()-yA(l)),S},iA=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),aA=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),cA=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),ll=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=iA.exec(t);if(e){let[r,n,s,o,i,a,d,c]=e;return fa(Go(Ko(o)),cl(s),jr(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:c})}if(e=aA.exec(t),e){let[r,n,s,o,i,a,d,c]=e;return fA(fa(dA(o),cl(s),jr(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:c}))}if(e=cA.exec(t),e){let[r,n,s,o,i,a,d,c]=e;return fa(Go(Ko(c)),cl(n),jr(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:d})}throw new TypeError("Invalid RFC-7231 date-time value")};var fa=(t,e,r,n)=>{let s=e-1;return hA(t,s,r),new Date(Date.UTC(t,s,r,jr(n.hours,"hour",0,23),jr(n.minutes,"minute",0,59),jr(n.seconds,"seconds",0,60),pA(n.fractionalMilliseconds)))},dA=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Go(Ko(t));return r<e?r+100:r},lA=50*365*24*60*60*1e3,fA=t=>t.getTime()-new Date().getTime()>lA?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,cl=t=>{let e=dl.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},uA=[31,28,31,30,31,30,31,31,30,31,30,31],hA=(t,e,r)=>{let n=uA[e];if(e===1&&mA(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${dl[e]} in ${t}: ${r}`)},mA=t=>t%4===0&&(t%100!==0||t%400===0),jr=(t,e,r,n)=>{let s=fp(Ko(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},pA=t=>t==null?0:dp("0."+t)*1e3,yA=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},Ko=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)};var gt=class extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,gt.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}},te=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t};var gA=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=EA(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:(e==null?void 0:e.code)||(e==null?void 0:e.Code)||n||o||"UnknownError",$fault:"client",$metadata:s});throw te(i,e)},Gr=t=>({output:e,parsedBody:r,errorCode:n})=>{gA({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},EA=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]});var Kr=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var mp=!1,Hr=t=>{t&&!mp&&parseInt(t.substring(1,t.indexOf(".")))<14&&(mp=!0)};function Rs(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Ho=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=Ho(t[r]));return t};var fl=function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r};fl.prototype=Object.create(String.prototype,{constructor:{value:fl,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(fl,String);function se(t,e,r){let n,s,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return s=e,o=r,wA(n,s,o);o=e}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}pp(n,null,o,i)}return n}var Ee=(t,e)=>{let r={};for(let n in e)pp(r,t,e,n);return r},wA=(t,e,r)=>se(t,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[e,o()]:n[s]=[e,o],n),{})),pp=(t,e,r,n)=>{if(e!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=xA,d=CA,c=n]=i;(typeof a=="function"&&a(e[c])||typeof a!="function"&&a)&&(t[n]=d(e[c]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,d=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=i:d&&(t[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(t[n]=o)}},xA=t=>t!=null,CA=t=>t;var ul=(t,e,r,n,s,o)=>{if(e!=null&&e[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?i.split("/").map(a=>Rs(a)).join("/"):Rs(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return t};var Vo=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=Vo(t[r]));return e}return t};var yp=async t=>{let e=(t==null?void 0:t.Bucket)||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),AA(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!RA(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},SA=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,bA=/(\d+\.){3}\d+/,_A=/\.\./;var RA=t=>SA.test(t)&&!bA.test(t)&&!_A.test(t),AA=t=>{let[e,r,n,s,o,i]=t.split(":"),a=e==="arn"&&t.split(":").length>=6,d=[e,r,n,o,i].filter(Boolean).length===5;if(a&&!d)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return e==="arn"&&!!r&&!!n&&!!o&&!!i};var gp=(t,e,r)=>{let n=async()=>{let s=r[t]??r[e];return typeof s=="function"?s():s};return t==="endpoint"||e==="endpoint"?async()=>{let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:o,hostname:i,port:a,path:d}=s;return`${o}//${i}${a?":"+a:""}${d}`}}return s}:n};var Ep=async(t,e,r,n)=>{let s=await kA(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},kA=async(t,e,r)=>{var o;let n={},s=((o=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:o.call(e))||{};for(let[i,a]of Object.entries(s))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=t[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await gp(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await yp(n),n};function wp(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}var We=t=>{if(typeof t=="string")return We(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:o}=t,i;return o&&(i=wp(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};var xp=t=>typeof t=="object"?"url"in t?We(t.url):t:We(t);var Cp=({config:t,instructions:e})=>(r,n)=>async s=>{var a,d;let o=await Ep(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=o,n.authSchemes=(a=o.properties)==null?void 0:a.authSchemes;let i=(d=n.authSchemes)==null?void 0:d[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...s})};var Sp=(t,e)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var bp=(t,e)=>(r,n)=>async s=>{var a;let o=(a=n.endpointV2)!=null&&a.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let i=await e(s.input,{...t,endpoint:o});return r({...s,request:i})};var TA={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},hl={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ut(t,e,r){return{applyToStack:n=>{n.add(Sp(t,r),TA),n.add(bp(t,e),hl)}}}var NA={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:hl.name},zt=(t,e)=>({applyToStack:r=>{r.addRelativeTo(Cp({config:t,instructions:e}),NA)}});var Ie=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};var Vr=t=>{let e=t.tls??!0,{endpoint:r}=t,n=r!=null?async()=>xp(await Ie(r)()):void 0;return{...t,endpoint:n,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Ie(t.useDualstackEndpoint??!1),useFipsEndpoint:Ie(t.useFipsEndpoint??!1)}};var ml;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(ml||(ml={}));var V=class{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new V({...this,headers:{...this.headers}});return e.query&&(e.query=OA(e.query)),e}};function OA(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var Ot=class{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var ry=Fr(Rl());var lr=class extends gt{constructor(e){super(e),Object.setPrototypeOf(this,lr.prototype)}};var Al;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(Al||(Al={}));var kl;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(e.ObjectSizeGreaterThan):e.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(e.ObjectSizeLessThan):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(kl||(kl={}));var Tl;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.AccessPointArn!==void 0?r.AccessPointArn(e.AccessPointArn):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(Tl||(Tl={}));var Nl;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(Nl||(Nl={}));var As=class extends lr{constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,As.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}},ks=class extends lr{constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,ks.prototype)}};var ey=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:jn}}),ty=t=>({...t,...t.SSECustomerKey&&{SSECustomerKey:jn}});var ny=async(t,e)=>{let{hostname:r,protocol:n="https",port:s,path:o}=await e.endpoint(),i=se({},Ol,{"if-match":t.IfMatch,"if-modified-since":[()=>Ol(t.IfModifiedSince),()=>ua(t.IfModifiedSince).toString()],"if-none-match":t.IfNoneMatch,"if-unmodified-since":[()=>Ol(t.IfUnmodifiedSince),()=>ua(t.IfUnmodifiedSince).toString()],range:t.Range,"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":t.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5,"x-amz-request-payer":t.RequestPayer,"x-amz-expected-bucket-owner":t.ExpectedBucketOwner,"x-amz-checksum-mode":t.ChecksumMode}),a=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;a=ul(a,t,"Bucket",()=>t.Bucket,"{Bucket}",!1),a=ul(a,t,"Key",()=>t.Key,"{Key+}",!0);let d=se({"x-id":[,"GetObject"],"response-cache-control":[,t.ResponseCacheControl],"response-content-disposition":[,t.ResponseContentDisposition],"response-content-encoding":[,t.ResponseContentEncoding],"response-content-language":[,t.ResponseContentLanguage],"response-content-type":[,t.ResponseContentType],"response-expires":[()=>t.ResponseExpires!==void 0,()=>ua(t.ResponseExpires).toString()],versionId:[,t.VersionId],partNumber:[()=>t.PartNumber!==void 0,()=>t.PartNumber.toString()]}),c;return new V({protocol:n,hostname:r,port:s,method:"GET",headers:i,path:a,query:d,body:c})};var sy=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Pk(t,e);let r=se({$metadata:Il(t),DeleteMarker:[()=>t.headers["x-amz-delete-marker"]!==void 0,()=>il(t.headers["x-amz-delete-marker"])],AcceptRanges:[,t.headers["accept-ranges"]],Expiration:[,t.headers["x-amz-expiration"]],Restore:[,t.headers["x-amz-restore"]],LastModified:[()=>t.headers["last-modified"]!==void 0,()=>yt(ll(t.headers["last-modified"]))],ContentLength:[()=>t.headers["content-length"]!==void 0,()=>lp(t.headers["content-length"])],ETag:[,t.headers.etag],ChecksumCRC32:[,t.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,t.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,t.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,t.headers["x-amz-checksum-sha256"]],MissingMeta:[()=>t.headers["x-amz-missing-meta"]!==void 0,()=>Gn(t.headers["x-amz-missing-meta"])],VersionId:[,t.headers["x-amz-version-id"]],CacheControl:[,t.headers["cache-control"]],ContentDisposition:[,t.headers["content-disposition"]],ContentEncoding:[,t.headers["content-encoding"]],ContentLanguage:[,t.headers["content-language"]],ContentRange:[,t.headers["content-range"]],ContentType:[,t.headers["content-type"]],Expires:[()=>t.headers.expires!==void 0,()=>yt(ll(t.headers.expires))],WebsiteRedirectLocation:[,t.headers["x-amz-website-redirect-location"]],ServerSideEncryption:[,t.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,t.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,t.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,t.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>t.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>il(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])],StorageClass:[,t.headers["x-amz-storage-class"]],RequestCharged:[,t.headers["x-amz-request-charged"]],ReplicationStatus:[,t.headers["x-amz-replication-status"]],PartsCount:[()=>t.headers["x-amz-mp-parts-count"]!==void 0,()=>Gn(t.headers["x-amz-mp-parts-count"])],TagCount:[()=>t.headers["x-amz-tagging-count"]!==void 0,()=>Gn(t.headers["x-amz-tagging-count"])],ObjectLockMode:[,t.headers["x-amz-object-lock-mode"]],ObjectLockRetainUntilDate:[()=>t.headers["x-amz-object-lock-retain-until-date"]!==void 0,()=>yt(ha(t.headers["x-amz-object-lock-retain-until-date"]))],ObjectLockLegalHoldStatus:[,t.headers["x-amz-object-lock-legal-hold"]],Metadata:[,Object.keys(t.headers).filter(s=>s.startsWith("x-amz-meta-")).reduce((s,o)=>(s[o.substring(11)]=t.headers[o],s),{})]}),n=t.body;return e.sdkStreamMixin(n),r.Body=n,r},Pk=async(t,e)=>{let r={...t,body:await zk(t.body,e)},n=$k(t,r.body);switch(n){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Bk(r,e);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Mk(r,e);default:let s=r.body;return Dk({output:t,parsedBody:s,errorCode:n})}};var Dk=Gr(lr);var Bk=async(t,e)=>{let r=se({}),n=t.body;n.AccessTier!==void 0&&(r.AccessTier=D(n.AccessTier)),n.StorageClass!==void 0&&(r.StorageClass=D(n.StorageClass));let s=new As({$metadata:Il(t),...r});return te(s,t.body)};var Mk=async(t,e)=>{let r=se({}),n=t.body,s=new ks({$metadata:Il(t),...r});return te(s,t.body)};var Il=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Fk=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),Lk=(t,e)=>Fk(t,e).then(r=>e.utf8Encoder(r)),Ol=t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),Uk=(t,e)=>Lk(t,e).then(r=>{if(r.length){let n=new ry.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(d,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let s=n.parse(r),o="#text",i=Object.keys(s)[0],a=s[i];return a[o]&&(a[i]=a[o],delete a[o]),Ho(a)}return{}}),zk=async(t,e)=>{let r=await Uk(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},$k=(t,e)=>{if((e==null?void 0:e.Code)!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};var oy=t=>({...t,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1});var vl=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function qk(){return t=>async e=>{let{input:{Bucket:r}}=e;if(typeof r=="string"&&!vl(r)&&r.indexOf("/")>=0){let n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return t({...e})}}var jk={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},iy=t=>({applyToStack:e=>{e.add(qk(),jk)}});function Gk(t){return e=>async r=>{let n={...r.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let o of s){let i=n[o.target];if(i){let a=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):typeof i=="string"?t.utf8Decoder(i):new Uint8Array(i),d=t.base64Encoder(a),c=new t.md5;c.update(a),n={...n,[o.target]:d,[o.hash]:t.base64Encoder(await c.digest())}}}return e({...r,input:n})}}var Kk={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},ay=t=>({applyToStack:e=>{e.add(Gk(t),Kk)}});var me;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.SHA1="SHA1",t.SHA256="SHA256"})(me||(me={}));var cy;(function(t){t.HEADER="header",t.TRAILER="trailer"})(cy||(cy={}));var Xo=[me.CRC32,me.CRC32C,me.SHA1,me.SHA256],dy=[me.CRC32,me.CRC32C,me.SHA1,me.SHA256];var ly=(t,{requestChecksumRequired:e,requestAlgorithmMember:r})=>{if(!r||!t[r])return e?me.MD5:void 0;let n=t[r];if(!Xo.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${Xo}.`);return n};var ma=t=>t===me.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`;var fy=(t,e)=>{let r=t.toLowerCase();for(let n of Object.keys(e))if(r===n.toLowerCase())return!0;return!1};var Ts=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";var pa=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!Ts(t);var Dy=Fr(Jo()),By=Fr(Kl());var Sa=(t,e)=>({[me.MD5]:e.md5,[me.CRC32]:Dy.AwsCrc32,[me.CRC32C]:By.AwsCrc32c,[me.SHA1]:e.sha1,[me.SHA256]:e.sha256})[t];import{Buffer as Hl}from"buffer";var fr=(t,e=0,r=t.byteLength-e)=>{if(!Ts(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Hl.from(t,e,r)},Ns=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Hl.from(t,e):Hl.from(t)};var qt=t=>{let e=Ns(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Xe=t=>typeof t=="string"?qt(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t);var Qr=t=>fr(t.buffer,t.byteOffset,t.byteLength).toString("utf8");var ba=(t,e)=>{let r=new t;return r.update(Xe(e||"")),r.digest()};var My=async(t,{streamHasher:e,checksumAlgorithmFn:r,base64Encoder:n})=>{let s=pa(t)?e(r,t):ba(r,t);return n(await s)};var Fy=(t=[])=>{let e=[];for(let r of dy)!t.includes(r)||!Xo.includes(r)||e.push(r);return e};var Ly=async(t,{config:e,responseAlgorithms:r})=>{let n=Fy(r),{body:s,headers:o}=t;for(let i of n){let a=ma(i),d=o[a];if(d){let c=Sa(i,e),{streamHasher:l,base64Encoder:u}=e,h=await My(s,{streamHasher:l,checksumAlgorithmFn:c,base64Encoder:u});if(h===d)break;throw new Error(`Checksum mismatch: expected "${h}" but received "${d}" in response header "${a}".`)}}};var Uy=(t,e)=>r=>async n=>{if(!V.isInstance(n.request))return r(n);let{request:s}=n,{body:o,headers:i}=s,{base64Encoder:a,streamHasher:d}=t,{input:c,requestChecksumRequired:l,requestAlgorithmMember:u}=e,h=ly(c,{requestChecksumRequired:l,requestAlgorithmMember:u}),w=o,S=i;if(h){let Bt=ma(h),Ne=Sa(h,t);if(pa(o)){let{getAwsChunkedEncodingStream:$n,bodyLengthChecker:Lo}=t;w=$n(o,{base64Encoder:a,bodyLengthChecker:Lo,checksumLocationName:Bt,checksumAlgorithmFn:Ne,streamHasher:d}),S={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Bt},delete S["content-length"]}else if(!fy(Bt,i)){let $n=await ba(Ne,o);S={...i,[Bt]:a($n)}}}let b=await r({...n,request:{...s,headers:S,body:w}}),{requestValidationModeMember:R,responseAlgorithms:K}=e;return R&&c[R]==="ENABLED"&&Ly(b.response,{config:t,responseAlgorithms:K}),b};var rN={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},zy=(t,e)=>({applyToStack:r=>{r.add(Uy(t,e),rN)}});var Os=class extends pt{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(Ut(r,this.serialize,this.deserialize)),this.middlewareStack.use(zt(r,Os.getEndpointParameterInstructions())),this.middlewareStack.use(ay(r)),this.middlewareStack.use(zy(r,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:ty,outputFilterSensitiveLog:ey},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return ny(e,r)}deserialize(e,r){return sy(e,r)}};var Et;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(Et||(Et={}));var jt=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}};var nN="AWS_USE_DUALSTACK_ENDPOINT",sN="use_dualstack_endpoint";var Zr={environmentVariableSelector:t=>jt(t,nN,Et.ENV),configFileSelector:t=>jt(t,sN,Et.CONFIG),default:!1};var oN="AWS_USE_FIPS_ENDPOINT",iN="use_fips_endpoint";var Jr={environmentVariableSelector:t=>jt(t,oN,Et.ENV),configFileSelector:t=>jt(t,iN,Et.CONFIG),default:!1};var aN="AWS_REGION",cN="region",Gt={environmentVariableSelector:t=>t[aN],configFileSelector:t=>t[cN],default:()=>{throw new Error("Region is missing")}},en={preferredFile:"credentials"};var _a=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips"));var Vl=t=>_a(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t;var tn=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return Vl(e);let n=await e();return Vl(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return _a(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var $y=t=>({...t,eventStreamMarshaller:t.eventStreamSerdeProvider(t)});var qy="content-length";function dN(t){return e=>async r=>{let n=r.request;if(V.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(qy)===-1)try{let i=t(s);n.headers={...n.headers,[qy]:String(i)}}catch{}}return e({...r,request:n})}}var lN={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},rn=t=>({applyToStack:e=>{e.add(dN(t.bodyLengthChecker),lN)}});function fN(t){return e=>async r=>{let{request:n}=r;return V.isInstance(n)&&n.body&&t.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),e({...r,request:n})}}var uN={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},jy=t=>({applyToStack:e=>{e.add(fN(t),uN)}});var hN=t=>e=>async r=>{if(!V.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},mN={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},nn=t=>({applyToStack:e=>{e.add(hN(t),mN)}});var pN=()=>(t,e)=>async r=>{var n,s;try{let o=await t(r),{clientName:i,commandName:a,logger:d,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:u}=c,h=l??e.inputFilterSensitiveLog,w=u??e.outputFilterSensitiveLog,{$metadata:S,...b}=o.output;return(n=d==null?void 0:d.info)==null||n.call(d,{clientName:i,commandName:a,input:h(r.input),output:w(b),metadata:S}),o}catch(o){let{clientName:i,commandName:a,logger:d,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:l}=c,u=l??e.inputFilterSensitiveLog;throw(s=d==null?void 0:d.error)==null||s.call(d,{clientName:i,commandName:a,input:u(r.input),error:o,metadata:o.$metadata}),o}},yN={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},sn=t=>({applyToStack:e=>{e.add(pN(),yN)}});var Gy="X-Amzn-Trace-Id",gN="AWS_LAMBDA_FUNCTION_NAME",EN="_X_AMZN_TRACE_ID",wN=t=>e=>async r=>{let{request:n}=r;if(!V.isInstance(n)||t.runtime!=="node"||n.headers.hasOwnProperty(Gy))return e(r);let s=process.env[gN],o=process.env[EN],i=a=>typeof a=="string"&&a.length>0;return i(s)&&i(o)&&(n.headers[Gy]=o),e({...r,request:n})},xN={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},on=t=>({applyToStack:e=>{e.add(wN(t),xN)}});var Kt;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Kt||(Kt={}));var Hn=3,Ht="STANDARD";var Ky=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Hy=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Vy=[500,502,503,504],Wy=["ECONNRESET","EPIPE","ETIMEDOUT"];var Is=t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||Ky.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},Ra=t=>{var e;return Hy.includes(t.name)||Wy.includes((t==null?void 0:t.code)||"")||Vy.includes(((e=t.$metadata)==null?void 0:e.httpStatusCode)||0)},Yy=t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Ra(t)}return!1};var ti=class{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(e==null?void 0:e.beta)??.7,this.minCapacity=(e==null?void 0:e.minCapacity)??1,this.minFillRate=(e==null?void 0:e.minFillRate)??.5,this.scaleConstant=(e==null?void 0:e.scaleConstant)??.4,this.smooth=(e==null?void 0:e.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Is(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};var Aa="amz-sdk-invocation-id",ka="amz-sdk-request";var Xy=()=>{let t=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}};var tg=(t,e,r,n)=>{let s=t,o=(n==null?void 0:n.retryCost)??5,i=(n==null?void 0:n.timeoutRetryCost)??10,a=(n==null?void 0:n.retryBackoffStrategy)??Xy(),d=t,c=Math.min(2e4,e),l,u=r??0,h=Ne=>Ne==="TRANSIENT"?i:o,w=()=>u,S=()=>c,b=()=>l,R=Ne=>h(Ne)<=d;return{getRetryCount:w,getRetryDelay:S,getLastRetryCost:b,hasRetryTokens:R,getRetryTokenCount:Ne=>{let $n=Ne.errorType;if(!R($n))throw new Error("No retry token available");let Lo=h($n),g_=$n==="THROTTLING"?500:100;a.setDelayBase(g_);let im=a.computeNextBackoffDelay(u);if(Ne.retryAfterHint){let E_=Ne.retryAfterHint.getTime()-Date.now();c=Math.max(E_||0,im)}else c=im;return u++,l=Lo,d-=Lo,Lo},releaseRetryTokens:Ne=>{d+=Ne??1,d=Math.min(d,s)}}};var Ps=class{constructor(e){this.maxAttemptsProvider=e,this.mode=Kt.STANDARD,this.retryToken=tg(500,100),this.maxAttemptsProvider=e}async acquireInitialRetryToken(e){return this.retryToken}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n))return e.getRetryTokenCount(r),e;throw new Error("No retry token available")}recordSuccess(e){this.retryToken.releaseRetryTokens(e.getLastRetryCost())}async getMaxAttempts(){let e;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Hn}`),Hn}}shouldRetry(e,r,n){return e.getRetryCount()<n&&e.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};var Na=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=Kt.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new ti,this.standardRetryStrategy=new Ps(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};var Wl=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`);var ng="AWS_MAX_ATTEMPTS",sg="max_attempts",an={environmentVariableSelector:t=>{let e=t[ng];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${ng} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[sg];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${sg} mast be a number, got "${e}"`);return r},default:Hn},cn=t=>{let{retryStrategy:e}=t,r=Ie(t.maxAttempts??Hn);return{...t,maxAttempts:r,retryStrategy:async()=>e||(await Ie(t.retryMode)()===Kt.ADAPTIVE?new Na(r):new Ps(r))}},CN="AWS_RETRY_MODE",SN="retry_mode",dn={environmentVariableSelector:t=>t[CN],configFileSelector:t=>t[SN],default:Ht};jd();var bN=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(_N(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,d=0,c=0,{request:l}=n;for(V.isInstance(l)&&(l.headers[Aa]=na());;)try{V.isInstance(l)&&(l.headers[ka]=`attempt=${d+1}; max=${o}`);let{response:u,output:h}=await e(n);return s.recordSuccess(i),h.$metadata.attempts=d+1,h.$metadata.totalRetryDelay=c,{response:u,output:h}}catch(u){let h=RN(u);a=Wl(u);try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=d+1,a.$metadata.totalRetryDelay=c,a}d=i.getRetryCount();let w=i.getRetryDelay();c+=w,await new Promise(S=>setTimeout(S,w))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},_N=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",RN=t=>{let e={errorType:AN(t)},r=TN(t.$response);return r&&(e.retryAfterHint=r),e},AN=t=>Is(t)?"THROTTLING":Ra(t)?"TRANSIENT":Yy(t)?"SERVER_ERROR":"CLIENT_ERROR",kN={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ln=t=>({applyToStack:e=>{e.add(bN(t),kN)}}),TN=t=>{if(!Ot.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Qe=class extends Error{constructor(e,r=!0){super(e),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,Qe.prototype)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};var M=class extends Qe{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,M.prototype)}};var Ze=class extends Qe{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,Ze.prototype)}};function Oa(...t){return()=>{let e=Promise.reject(new Qe("No providers in chain"));for(let r of t)e=e.catch(n=>{if(n!=null&&n.tryNextLink)return r();throw n});return e}}var og=t=>()=>Promise.resolve(t);var fn=(t,e,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=t());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return e===void 0?async d=>((!o||d!=null&&d.forceRefresh)&&(n=await a()),n):async d=>((!o||d!=null&&d.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(e(n)&&await a(),n))};var ig={},Yl={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),ig[t]=e,Yl[e]=t}function ag(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in Yl)e[r/2]=Yl[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function ve(t){let e="";for(let r=0;r<t.byteLength;r++)e+=ig[t[r]];return e}var cg="X-Amz-Algorithm",dg="X-Amz-Credential",Xl="X-Amz-Date",lg="X-Amz-SignedHeaders",fg="X-Amz-Expires",Ql="X-Amz-Signature",Zl="X-Amz-Security-Token";var Jl="authorization",ef=Xl.toLowerCase(),NN="date",ug=[Jl,ef,NN],hg=Ql.toLowerCase(),ri="x-amz-content-sha256",mg=Zl.toLowerCase();var pg={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},yg=/^proxy-/,gg=/^sec-/;var Ia="AWS4-HMAC-SHA256";var Eg="AWS4-HMAC-SHA256-PAYLOAD",wg="UNSIGNED-PAYLOAD",xg=50,tf="aws4_request",Cg=60*60*24*7;var va={},rf=[],Pa=(t,e,r)=>`${t}/${e}/${r}/${tf}`,bg=async(t,e,r,n,s)=>{let o=await Sg(t,e.secretAccessKey,e.accessKeyId),i=`${r}:${n}:${s}:${ve(o)}:${e.sessionToken}`;if(i in va)return va[i];for(rf.push(i);rf.length>xg;)delete va[rf.shift()];let a=`AWS4${e.secretAccessKey}`;for(let d of[r,n,s,tf])a=await Sg(t,a,d);return va[i]=a};var Sg=(t,e,r)=>{let n=new t(e);return n.update(Xe(r)),n.digest()};var Da=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in pg||e!=null&&e.has(o)||yg.test(o)||gg.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[s].trim().replace(/\s+/g," "))}return n};var Vt=t=>encodeURIComponent(t).replace(/[!'()*]/g,ON),ON=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;var nf=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t).sort()){if(n.toLowerCase()===hg)continue;e.push(n);let s=t[n];typeof s=="string"?r[n]=`${Vt(n)}=${Vt(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).sort().reduce((o,i)=>o.concat([`${Vt(n)}=${Vt(i)}`]),[]).join("&"))}return e.map(n=>r[n]).filter(n=>n).join("&")};var ni=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===ri)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||Ts(e)){let n=new r;return n.update(Xe(e)),ve(await n.digest())}return wg};var _g=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1};var Ba=({headers:t,query:e,...r})=>({...r,headers:{...t},query:e?IN(e):void 0}),IN=t=>Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{});var sf=(t,e={})=>{var s;let{headers:r,query:n={}}=typeof t.clone=="function"?t.clone():Ba(t);for(let o of Object.keys(r)){let i=o.toLowerCase();i.slice(0,6)==="x-amz-"&&!((s=e.unhoistableHeaders)!=null&&s.has(i))&&(n[o]=r[o],delete r[o])}return{...t,headers:r,query:n}};var Ma=t=>{t=typeof t.clone=="function"?t.clone():Ba(t);for(let e of Object.keys(t.headers))ug.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t};var Rg=t=>vN(t).toISOString().replace(/\.\d{3}Z$/,"Z"),vN=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;var Vn=class{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Ie(n),this.credentialProvider=Ie(r)}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,signingRegion:d,signingService:c}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let u=d??await this.regionProvider(),{longDate:h,shortDate:w}=Fa(n);if(s>Cg)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let S=Pa(w,u,c??this.service),b=sf(Ma(e),{unhoistableHeaders:i});l.sessionToken&&(b.query[Zl]=l.sessionToken),b.query[cg]=Ia,b.query[dg]=`${l.accessKeyId}/${S}`,b.query[Xl]=h,b.query[fg]=s.toString(10);let R=Da(b,o,a);return b.query[lg]=Ag(R),b.query[Ql]=await this.getSignature(h,S,this.getSigningKey(l,u,w,c),this.createCanonicalRequest(b,R,await ni(e,this.sha256))),b}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:d,longDate:c}=Fa(n),l=Pa(d,a,i??this.service),u=await ni({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let w=ve(await h.digest()),S=[Eg,c,l,s,w,u].join(`
`);return this.signString(S,{signingDate:n,signingRegion:a,signingService:i})}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=Fa(r),d=new this.sha256(await this.getSigningKey(o,i,a,s));return d.update(Xe(e)),ve(await d.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let d=o??await this.regionProvider(),c=Ma(e),{longDate:l,shortDate:u}=Fa(r),h=Pa(u,d,i??this.service);c.headers[ef]=l,a.sessionToken&&(c.headers[mg]=a.sessionToken);let w=await ni(c,this.sha256);!_g(ri,c.headers)&&this.applyChecksum&&(c.headers[ri]=w);let S=Da(c,s,n),b=await this.getSignature(l,h,this.getSigningKey(a,d,u,i),this.createCanonicalRequest(c,S,w));return c.headers[Jl]=`${Ia} Credential=${a.accessKeyId}/${h}, SignedHeaders=${Ag(S)}, Signature=${b}`,c}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${nf(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n){let s=new this.sha256;s.update(Xe(n));let o=await s.digest();return`${Ia}
${e}
${r}
${ve(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e!=null&&e.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return e}async getSignature(e,r,n,s){let o=await this.createStringToSign(e,r,s),i=new this.sha256(await n);return i.update(Xe(o)),ve(await i.digest())}getSigningKey(e,r,n,s){return bg(this.sha256,e,n,r,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},Fa=t=>{let e=Rg(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},Ag=t=>Object.keys(t).sort().join(";");var PN=3e5,La=t=>{let e=t.credentials?DN(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:n=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=Ie(t.signer):t.regionInfoProvider?o=()=>Ie(t.region)().then(async i=>[await t.regionInfoProvider(i,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:d,signingService:c}=i;t.signingRegion=t.signingRegion||d||a,t.signingName=t.signingName||c||t.serviceId;let l={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},u=t.signerConstructor||Vn;return new u(l)}):o=async i=>{i=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Ie(t.region)(),properties:{}},i);let a=i.signingRegion,d=i.signingName;t.signingRegion=t.signingRegion||a,t.signingName=t.signingName||d||t.serviceId;let c={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},l=t.signerConstructor||Vn;return new l(c)},{...t,systemClockOffset:n,signingEscapePath:r,credentials:e,signer:o}};var DN=t=>typeof t=="function"?fn(t,e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<PN,e=>e.expiration!==void 0):Ie(t);var Ua=t=>new Date(Date.now()+t);var kg=(t,e)=>Math.abs(Ua(e).getTime()-t)>=3e5;var of=(t,e)=>{let r=Date.parse(t);return kg(r,e)?r-Date.now():e};var BN=t=>(e,r)=>async function(n){var c,l,u,h;if(!V.isInstance(n.request))return e(n);let s=(u=(l=(c=r.endpointV2)==null?void 0:c.properties)==null?void 0:l.authSchemes)==null?void 0:u[0],o=(s==null?void 0:s.name)==="sigv4a"?(h=s==null?void 0:s.signingRegionSet)==null?void 0:h.join(","):void 0,i=await t.signer(s),a=await e({...n,request:await i.sign(n.request,{signingDate:Ua(t.systemClockOffset),signingRegion:o||r.signing_region,signingService:r.signing_service})}).catch(w=>{let S=w.ServerTime??Tg(w.$response);throw S&&(t.systemClockOffset=of(S,t.systemClockOffset)),w}),d=Tg(a.response);return d&&(t.systemClockOffset=of(d,t.systemClockOffset)),a},Tg=t=>{var e,r;return Ot.isInstance(t)?((e=t.headers)==null?void 0:e.date)??((r=t.headers)==null?void 0:r.Date):void 0},MN={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},za=t=>({applyToStack:e=>{e.addRelativeTo(BN(t),MN)}});function un(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}var af={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var Ng=af,Og="",LN=t=>{let{partitions:e}=Ng;for(let n of e){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===t)return{...o,...a}}for(let n of e){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Ig=(t,e="")=>{Ng=t,Og=e},UN=()=>{Ig(af,"")},cf=()=>Og;var ur="endpoints";function wt(t){return typeof t!="object"||t==null?t:"ref"in t?`$${wt(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(wt).join(", ")})`:JSON.stringify(t,null,2)}var ce=class extends Error{constructor(e){super(e),this.name="EndpointError"}};var uf={};ys(uf,{aws:()=>df,booleanEquals:()=>jN,getAttr:()=>lf,isSet:()=>GN,isValidHostLabel:()=>qa,not:()=>KN,parseURL:()=>HN,stringEquals:()=>VN,substring:()=>WN,uriEncode:()=>YN});var df={};ys(df,{getUserAgentPrefix:()=>cf,isVirtualHostableS3Bucket:()=>vg,parseArn:()=>qN,partition:()=>LN,setPartitionInfo:()=>Ig,useDefaultPartitionInfo:()=>UN});var zN=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),$a=t=>zN.test(t)||t.startsWith("[")&&t.endsWith("]");var $N=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),qa=(t,e=!1)=>{if(!e)return $N.test(t);let r=t.split(".");for(let n of r)if(!qa(n))return!1;return!0};var vg=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!vg(r))return!1;return!0}return!(!qa(t)||t.length<3||t.length>63||t!==t.toLowerCase()||$a(t))};var qN=t=>{let e=t.split(":");if(e.length<6)return null;let[r,n,s,o,i,...a]=e;return r!=="arn"||n===""||s===""||a[0]===""?null:{partition:n,service:s,region:o,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var jN=(t,e)=>t===e;var Pg=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new ce(`Path: '${t}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new ce(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r};var lf=(t,e)=>Pg(e).reduce((r,n)=>{if(typeof r!="object")throw new ce(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t);var GN=t=>t!=null;var KN=t=>!t;var Dg;(function(t){t.HEADER="header",t.QUERY="query"})(Dg||(Dg={}));var Bg;(function(t){t.AAAA="AAAA",t.A="A"})(Bg||(Bg={}));var Ds;(function(t){t.HTTP="http",t.HTTPS="https"})(Ds||(Ds={}));var Mg;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(Mg||(Mg={}));var ff={[Ds.HTTP]:80,[Ds.HTTPS]:443},HN=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:w,protocol:S="",path:b="",query:R={}}=t,K=new URL(`${S}//${h}${w?`:${w}`:""}${b}`);return K.search=Object.entries(R).map(([Bt,Ne])=>`${Bt}=${Ne}`).join("&"),K}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=e;if(a)return null;let d=i.slice(0,-1);if(!Object.values(Ds).includes(d))return null;let c=$a(s),l=r.includes(`${n}:${ff[d]}`)||typeof t=="string"&&t.includes(`${n}:${ff[d]}`),u=`${n}${l?`:${ff[d]}`:""}`;return{scheme:d,authority:u,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:c}};var VN=(t,e)=>t===e;var WN=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r);var YN=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`);var ja=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let i=t.indexOf("}",o);if(i===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[i+1]==="}"&&(r.push(t.slice(o+1,i)),s=i+2);let a=t.substring(o+1,i);if(a.includes("#")){let[d,c]=a.split("#");r.push(lf(n[d],c))}else r.push(n[a]);s=i+1}return r.join("")};var Fg=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t];var hn=(t,e,r)=>{if(typeof t=="string")return ja(t,r);if(t.fn)return Ga(t,r);if(t.ref)return Fg(t,r);throw new ce(`'${e}': ${String(t)} is not a string, function or reference.`)};var Ga=({fn:t,argv:e},r)=>{let n=e.map(s=>["boolean","number"].includes(typeof s)?s:hn(s,"arg",r));return t.split(".").reduce((s,o)=>s[o],uf)(...n)};var Lg=({assign:t,...e},r)=>{var s,o;if(t&&t in r.referenceRecord)throw new ce(`'${t}' is already defined in Reference Record.`);let n=Ga(e,r);return(o=(s=r.logger)==null?void 0:s.debug)==null||o.call(s,ur,`evaluateCondition: ${wt(e)} = ${wt(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}};var Bs=(t=[],e)=>{var n,s;let r={};for(let o of t){let{result:i,toAssign:a}=Lg(o,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(s=(n=e.logger)==null?void 0:n.debug)==null||s.call(n,ur,`assign: ${a.name} := ${wt(a.value)}`))}return{result:!0,referenceRecord:r}};var Ug=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=hn(o,"Header value entry",e);if(typeof i!="string")throw new ce(`Header '${n}' value '${i}' is not a string`);return i})}),{});var hf=(t,e)=>{if(Array.isArray(t))return t.map(r=>hf(r,e));switch(typeof t){case"string":return ja(t,e);case"object":if(t===null)throw new ce(`Unexpected endpoint property: ${t}`);return Ka(t,e);case"boolean":return t;default:throw new ce(`Unexpected endpoint property type: ${typeof t}`)}};var Ka=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:hf(s,e)}),{});var zg=(t,e)=>{let r=hn(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ce(`Endpoint URL must be a string, got ${typeof r}`)};var $g=(t,e)=>{var l,u;let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:o}=Bs(r,e);if(!s)return;let i={...e,referenceRecord:{...e.referenceRecord,...o}},{url:a,properties:d,headers:c}=n;return(u=(l=e.logger)==null?void 0:l.debug)==null||u.call(l,ur,`Resolving endpoint from template: ${wt(n)}`),{...c!=null&&{headers:Ug(c,i)},...d!=null&&{properties:Ka(d,i)},url:zg(a,i)}};var qg=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:o}=Bs(r,e);if(s)throw new ce(hn(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))};var jg=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:o}=Bs(r,e);if(s)return Ha(n,{...e,referenceRecord:{...e.referenceRecord,...o}})};var Ha=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=$g(r,e);if(n)return n}else if(r.type==="error")qg(r,e);else if(r.type==="tree"){let n=jg(r,e);if(n)return n}else throw new ce(`Unknown endpoint rule: ${r}`);throw new ce("Rules evaluation failed")};var mn=(t,e)=>{var c,l,u,h,w;let{endpointParams:r,logger:n}=e,{parameters:s,rules:o}=t;(l=(c=e.logger)==null?void 0:c.debug)==null||l.call(c,ur,`Initial EndpointParams: ${wt(r)}`);let i=Object.entries(s).filter(([,S])=>S.default!=null).map(([S,b])=>[S,b.default]);if(i.length>0)for(let[S,b]of i)r[S]=r[S]??b;let a=Object.entries(s).filter(([,S])=>S.required).map(([S])=>S);for(let S of a)if(r[S]==null)throw new ce(`Missing required parameter: '${S}'`);let d=Ha(o,{endpointParams:r,logger:n,referenceRecord:{}});if((u=e.endpointParams)!=null&&u.Endpoint)try{let S=new URL(e.endpointParams.Endpoint),{protocol:b,port:R}=S;d.url.protocol=b,d.url.port=R}catch{}return(w=(h=e.logger)==null?void 0:h.debug)==null||w.call(h,ur,`Resolved endpoint: ${wt(d)}`),d};var mf="user-agent",Va="x-amz-user-agent",pf=" ",Gg=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var XN=t=>(e,r)=>async n=>{var h,w;let{request:s}=n;if(!V.isInstance(s))return e(n);let{headers:o}=s,i=((h=r==null?void 0:r.userAgent)==null?void 0:h.map(yf))||[],a=(await t.defaultUserAgentProvider()).map(yf),d=((w=t==null?void 0:t.customUserAgent)==null?void 0:w.map(yf))||[],c=cf(),l=(c?[c]:[]).concat([...a,...i,...d]).join(pf),u=[...a.filter(S=>S.startsWith("aws-sdk-")),...d].join(pf);return t.runtime!=="browser"?(u&&(o[Va]=o[Va]?`${o[mf]} ${u}`:u),o[mf]=l):o[Va]=l,e({...n,request:s})},yf=([t,e])=>{let r=t.indexOf("/"),n=t.substring(0,r),s=t.substring(r+1);return n==="api"&&(s=s.toLowerCase()),[n,s,e].filter(o=>o&&o.length>0).map(o=>o==null?void 0:o.replace(Gg,"_")).join("/")},QN={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},pn=t=>({applyToStack:e=>{e.add(XN(t),QN)}});var Kg=t=>({...t,useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"});var Hg={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.321.1","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.321.1","@aws-sdk/eventstream-serde-browser":"3.310.0","@aws-sdk/eventstream-serde-config-resolver":"3.310.0","@aws-sdk/eventstream-serde-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-blob-browser":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/hash-stream-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/md5-js":"3.310.0","@aws-sdk/middleware-bucket-endpoint":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-expect-continue":"3.310.0","@aws-sdk/middleware-flexible-checksums":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-location-constraint":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-s3":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-ssec":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/signature-v4-multi-region":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-stream-browser":"3.310.0","@aws-sdk/util-stream-node":"3.321.1","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0","@aws-sdk/xml-builder":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var Vg=Fr(Rl());var Je=class extends gt{constructor(e){super(e),Object.setPrototypeOf(this,Je.prototype)}};var Ms=class extends Je{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Ms.prototype)}},Fs=class extends Je{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,Fs.prototype)}},Ls=class extends Je{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,Ls.prototype)}},Us=class extends Je{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,Us.prototype)}},zs=class extends Je{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,zs.prototype)}},$s=class extends Je{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,$s.prototype)}},qs=class extends Je{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,qs.prototype)}};var Wg=async(t,e)=>{let r=aE,n;return n=dE({...sO(t,e),Action:"AssumeRole",Version:"2011-06-15"}),iE(e,r,"/",void 0,n)};var Yg=async(t,e)=>{let r=aE,n;return n=dE({...oO(t,e),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),iE(e,r,"/",void 0,n)};var Xg=async(t,e)=>{if(t.statusCode>=300)return JN(t,e);let r=await gf(t.body,e),n={};return n=lO(r.AssumeRoleResult,e),{$metadata:hr(t),...n}},JN=async(t,e)=>{let r={...t,body:await cE(t.body,e)},n=lE(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Zg(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Jg(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await eE(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await tE(r,e);default:let s=r.body;return oE({output:t,parsedBody:s.Error,errorCode:n})}};var Qg=async(t,e)=>{if(t.statusCode>=300)return eO(t,e);let r=await gf(t.body,e),n={};return n=fO(r.AssumeRoleWithWebIdentityResult,e),{$metadata:hr(t),...n}},eO=async(t,e)=>{let r={...t,body:await cE(t.body,e)},n=lE(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Zg(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await tO(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await rO(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await nO(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Jg(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await eE(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await tE(r,e);default:let s=r.body;return oE({output:t,parsedBody:s.Error,errorCode:n})}};var Zg=async(t,e)=>{let r=t.body,n=uO(r.Error,e),s=new Ms({$metadata:hr(t),...n});return te(s,r)},tO=async(t,e)=>{let r=t.body,n=hO(r.Error,e),s=new qs({$metadata:hr(t),...n});return te(s,r)},rO=async(t,e)=>{let r=t.body,n=mO(r.Error,e),s=new zs({$metadata:hr(t),...n});return te(s,r)};var nO=async(t,e)=>{let r=t.body,n=pO(r.Error,e),s=new $s({$metadata:hr(t),...n});return te(s,r)},Jg=async(t,e)=>{let r=t.body,n=yO(r.Error,e),s=new Fs({$metadata:hr(t),...n});return te(s,r)},eE=async(t,e)=>{let r=t.body,n=gO(r.Error,e),s=new Ls({$metadata:hr(t),...n});return te(s,r)},tE=async(t,e)=>{let r=t.body,n=EO(r.Error,e),s=new Us({$metadata:hr(t),...n});return te(s,r)},sO=(t,e)=>{var n,s,o;let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.PolicyArns!=null){let i=rE(t.PolicyArns,e);((n=t.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([a,d])=>{let c=`PolicyArns.${a}`;r[c]=d})}if(t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=dO(t.Tags,e);((s=t.Tags)==null?void 0:s.length)===0&&(r.Tags=[]),Object.entries(i).forEach(([a,d])=>{let c=`Tags.${a}`;r[c]=d})}if(t.TransitiveTagKeys!=null){let i=cO(t.TransitiveTagKeys,e);((o=t.TransitiveTagKeys)==null?void 0:o.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([a,d])=>{let c=`TransitiveTagKeys.${a}`;r[c]=d})}return t.ExternalId!=null&&(r.ExternalId=t.ExternalId),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),t.SourceIdentity!=null&&(r.SourceIdentity=t.SourceIdentity),r};var oO=(t,e)=>{var n;let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.WebIdentityToken!=null&&(r.WebIdentityToken=t.WebIdentityToken),t.ProviderId!=null&&(r.ProviderId=t.ProviderId),t.PolicyArns!=null){let s=rE(t.PolicyArns,e);((n=t.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([o,i])=>{let a=`PolicyArns.${o}`;r[a]=i})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r};var rE=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let o=iO(s,e);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},iO=(t,e)=>{let r={};return t.arn!=null&&(r.arn=t.arn),r},aO=(t,e)=>{let r={};return t.Key!=null&&(r.Key=t.Key),t.Value!=null&&(r.Value=t.Value),r},cO=(t,e)=>{let r={},n=1;for(let s of t)s!==null&&(r[`member.${n}`]=s,n++);return r},dO=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let o=aO(s,e);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},nE=(t,e)=>{let r={};return t.AssumedRoleId!==void 0&&(r.AssumedRoleId=D(t.AssumedRoleId)),t.Arn!==void 0&&(r.Arn=D(t.Arn)),r},lO=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=sE(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=nE(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=Gn(t.PackedPolicySize)),t.SourceIdentity!==void 0&&(r.SourceIdentity=D(t.SourceIdentity)),r};var fO=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=sE(t.Credentials,e)),t.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=D(t.SubjectFromWebIdentityToken)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=nE(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=Gn(t.PackedPolicySize)),t.Provider!==void 0&&(r.Provider=D(t.Provider)),t.Audience!==void 0&&(r.Audience=D(t.Audience)),t.SourceIdentity!==void 0&&(r.SourceIdentity=D(t.SourceIdentity)),r},sE=(t,e)=>{let r={};return t.AccessKeyId!==void 0&&(r.AccessKeyId=D(t.AccessKeyId)),t.SecretAccessKey!==void 0&&(r.SecretAccessKey=D(t.SecretAccessKey)),t.SessionToken!==void 0&&(r.SessionToken=D(t.SessionToken)),t.Expiration!==void 0&&(r.Expiration=yt(ha(t.Expiration))),r};var uO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=D(t.message)),r};var hO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=D(t.message)),r},mO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=D(t.message)),r};var pO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=D(t.message)),r},yO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=D(t.message)),r},gO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=D(t.message)),r},EO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=D(t.message)),r},hr=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),wO=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),xO=(t,e)=>wO(t,e).then(r=>e.utf8Encoder(r)),oE=Gr(Je),iE=async(t,e,r,n,s)=>{let{hostname:o,protocol:i="https",port:a,path:d}=await t.endpoint(),c={protocol:i,hostname:o,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:e};return n!==void 0&&(c.hostname=n),s!==void 0&&(c.body=s),new V(c)},aE={"content-type":"application/x-www-form-urlencoded"},gf=(t,e)=>xO(t,e).then(r=>{if(r.length){let n=new Vg.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(d,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let s=n.parse(r),o="#text",i=Object.keys(s)[0],a=s[i];return a[o]&&(a[i]=a[o],delete a[o]),Ho(a)}return{}}),cE=async(t,e)=>{let r=await gf(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},dE=t=>Object.entries(t).map(([e,r])=>Rs(e)+"="+Rs(r)).join("&"),lE=(t,e)=>{var r;if(((r=e.Error)==null?void 0:r.Code)!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"};var js=class extends pt{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(Ut(r,this.serialize,this.deserialize)),this.middlewareStack.use(zt(r,js.getEndpointParameterInstructions())),this.middlewareStack.use(za(r));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return Wg(e,r)}deserialize(e,r){return Xg(e,r)}};var Gs=class extends pt{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(Ut(r,this.serialize,this.deserialize)),this.middlewareStack.use(zt(r,Gs.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return Yg(e,r)}deserialize(e,r){return Qg(e,r)}};var fE=(t,{stsClientCtor:e})=>La({...t,stsClientCtor:e});var uE=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"});var hE={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.321.1","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var mE="us-east-1",pE=t=>typeof t!="function"?t===void 0?mE:t:async()=>{try{return await t()}catch{return mE}},Ef=(t,e)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:a,region:d,requestHandler:c}=t;r=new e({logger:a,credentialDefaultProvider:()=>async()=>n,region:pE(d||t.region),...c?{requestHandler:c}:{}})}let{Credentials:i}=await r.send(new js(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},wf=(t,e)=>{let r;return async n=>{if(!r){let{logger:o,region:i,requestHandler:a}=t;r=new e({logger:o,region:pE(i||t.region),...a?{requestHandler:a}:{}})}let{Credentials:s}=await r.send(new Gs(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration}}},yE=t=>e=>t({roleAssumer:Ef(e,e.stsClientCtor),roleAssumerWithWebIdentity:wf(e,e.stsClientCtor),...e});var SO="AWS_ACCESS_KEY_ID",bO="AWS_SECRET_ACCESS_KEY",_O="AWS_SESSION_TOKEN",RO="AWS_CREDENTIAL_EXPIRATION",Wa=()=>async()=>{let t=process.env[SO],e=process.env[bO],r=process.env[_O],n=process.env[RO];if(t&&e)return{accessKeyId:t,secretAccessKey:e,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new M("Unable to find environment variable credentials.")};import{homedir as AO}from"os";import{sep as kO}from"path";var Ks=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${kO}`}=process.env;return t||e||(r?`${n}${r}`:AO())};var xf="AWS_PROFILE",TO="default",xt=t=>t.profile||process.env[xf]||TO;import{createHash as NO}from"crypto";import{join as OO}from"path";var Ya=t=>{let r=NO("sha1").update(t).digest("hex");return OO(Ks(),".aws","sso","cache",`${r}.json`)};import{promises as IO}from"fs";var{readFile:vO}=IO,Xa=async t=>{let e=Ya(t),r=await vO(e,"utf8");return JSON.parse(r)};import{join as PO}from"path";var DO="AWS_CONFIG_FILE",Qa=()=>process.env[DO]||PO(Ks(),".aws","config");import{join as BO}from"path";var MO="AWS_SHARED_CREDENTIALS_FILE",gE=()=>process.env[MO]||BO(Ks(),".aws","credentials");var EE=/^profile\s(["'])?([^\1]+)\1$/,wE=t=>Object.entries(t).filter(([e])=>EE.test(e)).reduce((e,[r,n])=>({...e,[EE.exec(r)[2]]:n}),{...t.default&&{default:t.default}});var FO=["__proto__","profile __proto__"],si=t=>{let e={},r;for(let n of t.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),FO.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let o=n.indexOf("="),i=0,a=n.length-1;if(o!==-1&&o!==i&&o!==a){let[c,l]=[n.substring(0,o).trim(),n.substring(o+1).trim()];e[r]=e[r]||{},e[r][c]=l}}return e};import{promises as LO}from"fs";var{readFile:UO}=LO,Cf={},oi=(t,e)=>((!Cf[t]||e!=null&&e.ignoreCache)&&(Cf[t]=UO(t,"utf8")),Cf[t]);var xE=()=>({}),Za=async(t={})=>{let{filepath:e=gE(),configFilepath:r=Qa()}=t,n=await Promise.all([oi(r,{ignoreCache:t.ignoreCache}).then(si).then(wE).catch(xE),oi(e,{ignoreCache:t.ignoreCache}).then(si).catch(xE)]);return{configFile:n[0],credentialsFile:n[1]}};var CE=/^sso-session\s(["'])?([^\1]+)\1$/,SE=t=>Object.entries(t).filter(([e])=>CE.test(e)).reduce((e,[r,n])=>({...e,[CE.exec(r)[2]]:n}),{});var zO=()=>({}),Ja=async(t={})=>oi(t.configFilepath??Qa()).then(si).then(SE).catch(zO);var bE=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e};var yn=async t=>{let e=await Za(t);return bE(e.configFile,e.credentialsFile)};import{parse as jO}from"url";import{Buffer as $O}from"buffer";import{request as qO}from"http";function mr(t){return new Promise((e,r)=>{var s;let n=qO({method:"GET",...t,hostname:(s=t.hostname)==null?void 0:s.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new Qe("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new Qe("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:i=400}=o;(i<200||300<=i)&&(r(Object.assign(new Qe("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];o.on("data",d=>{a.push(d)}),o.on("end",()=>{e($O.concat(a)),n.destroy()})}),n.end()})}var ec=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",tc=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration)});var rc=({maxRetries:t=0,timeout:e=1e3})=>({maxRetries:t,timeout:e});var ii=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r};var ai="AWS_CONTAINER_CREDENTIALS_FULL_URI",ci="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",_E="AWS_CONTAINER_AUTHORIZATION_TOKEN",nc=(t={})=>{let{timeout:e,maxRetries:r}=rc(t);return()=>ii(async()=>{let n=await WO(),s=JSON.parse(await GO(e,n));if(!ec(s))throw new M("Invalid response received from instance metadata service.");return tc(s)},r)},GO=async(t,e)=>(process.env[_E]&&(e.headers={...e.headers,Authorization:process.env[_E]}),(await mr({...e,timeout:t})).toString()),KO="169.254.170.2",HO={localhost:!0,"127.0.0.1":!0},VO={"http:":!0,"https:":!0},WO=async()=>{if(process.env[ci])return{hostname:KO,path:process.env[ci]};if(process.env[ai]){let t=jO(process.env[ai]);if(!t.hostname||!(t.hostname in HO))throw new M(`${t.hostname} is not a valid container metadata service hostname`,!1);if(!t.protocol||!(t.protocol in VO))throw new M(`${t.protocol} is not a valid container metadata service protocol`,!1);return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new M(`The container metadata credential provider cannot be used unless the ${ci} or ${ai} environment variable is set`,!1)};var RE=t=>async()=>{try{let e=t(process.env);if(e===void 0)throw new Error;return e}catch(e){throw new M(e.message||`Cannot load config from environment variables with getter: ${t}`)}};var AE=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=xt(r),{configFile:s,credentialsFile:o}=await Za(r),i=o[n]||{},a=s[n]||{},d=e==="config"?{...i,...a}:{...a,...i};try{let c=t(d);if(c===void 0)throw new Error;return c}catch(c){throw new M(c.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${t}`)}};var YO=t=>typeof t=="function",kE=t=>YO(t)?async()=>await t():og(t);var W=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>fn(Oa(RE(t),AE(e,n),kE(r)));var di;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(di||(di={}));var XO="AWS_EC2_METADATA_SERVICE_ENDPOINT",QO="ec2_metadata_service_endpoint",TE={environmentVariableSelector:t=>t[XO],configFileSelector:t=>t[QO],default:void 0};var gn;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(gn||(gn={}));var ZO="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",JO="ec2_metadata_service_endpoint_mode",NE={environmentVariableSelector:t=>t[ZO],configFileSelector:t=>t[JO],default:gn.IPv4};var li=async()=>We(await eI()||await tI()),eI=async()=>W(TE)(),tI=async()=>{let t=await W(NE)();switch(t){case gn.IPv4:return di.IPv4;case gn.IPv6:return di.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(gn)}`)}};var rI="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Sf=(t,e)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);e.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+rI);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}};var OE=(t,e={})=>{let r=(e==null?void 0:e.logger)||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=Sf(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=Sf(n,r);else throw o}return n=s,s}};var IE="/latest/meta-data/iam/security-credentials/",nI="/latest/api/token",sc=(t={})=>OE(sI(t),{logger:t.logger}),sI=t=>{let e=!1,{timeout:r,maxRetries:n}=rc(t),s=async(o,i)=>{let a=(await ii(async()=>{let d;try{d=await iI(i)}catch(c){throw c.statusCode===401&&(e=!1),c}return d},o)).trim();return ii(async()=>{let d;try{d=await aI(a,i)}catch(c){throw c.statusCode===401&&(e=!1),c}return d},o)};return async()=>{let o=await li();if(e)return s(n,{...o,timeout:r});{let i;try{i=(await oI({...o,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(e=!0),s(n,{...o,timeout:r})}return s(n,{...o,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},oI=async t=>mr({...t,path:nI,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),iI=async t=>(await mr({...t,path:IE})).toString(),aI=async(t,e)=>{let r=JSON.parse((await mr({...e,path:IE+t})).toString());if(!ec(r))throw new M("Invalid response received from instance metadata service.");return tc(r)};var vE=(t,e)=>{let r={EcsContainer:nc,Ec2InstanceMetadata:sc,Environment:Wa};if(t in r)return r[t]();throw new M(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var PE=t=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(cI(t)||dI(t)),cI=t=>typeof t.source_profile=="string"&&typeof t.credential_source>"u",dI=t=>typeof t.credential_source=="string"&&typeof t.source_profile>"u",DE=async(t,e,r,n={})=>{let s=e[t];if(!r.roleAssumer)throw new M(`Profile ${t} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=s;if(o&&o in n)throw new M(`Detected a cycle attempting to resolve credentials for profile ${xt(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=o?oc(o,e,r,{...n,[o]:!0}):vE(s.credential_source,t)(),a={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id},{mfa_serial:d}=s;if(d){if(!r.mfaCodeProvider)throw new M(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=d,a.TokenCode=await r.mfaCodeProvider(d)}let c=await i;return r.roleAssumer(c,a)};import{exec as lI}from"child_process";import{promisify as fI}from"util";var BE=(t,e)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let r=new Date;if(new Date(e.Expiration)<r)throw Error(`Profile ${t} credential_process returned expired credentials.`)}return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)}}};var ME=async(t,e)=>{let r=e[t];if(e[t]){let n=r.credential_process;if(n!==void 0){let s=fI(lI);try{let{stdout:o}=await s(n),i;try{i=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return BE(t,i)}catch(o){throw new M(o.message)}}else throw new M(`Profile ${t} did not contain credential_process.`)}else throw new M(`Profile ${t} could not be found in shared credentials file.`)};var ic=(t={})=>async()=>{let e=await yn(t);return ME(xt(t),e)};var FE=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",LE=async(t,e)=>ic({...t,profile:e})();var fi=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string");var It=class extends gt{constructor(e){super(e),Object.setPrototypeOf(this,It.prototype)}};var Hs=class extends It{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Hs.prototype)}},Vs=class extends It{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Vs.prototype)}},Ws=class extends It{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Ws.prototype)}},Ys=class extends It{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Ys.prototype)}},UE=t=>({...t,...t.accessToken&&{accessToken:jn}}),uI=t=>({...t,...t.secretAccessKey&&{secretAccessKey:jn},...t.sessionToken&&{sessionToken:jn}}),zE=t=>({...t,...t.roleCredentials&&{roleCredentials:uI(t.roleCredentials)}});var $E=async(t,e)=>{let{hostname:r,protocol:n="https",port:s,path:o}=await e.endpoint(),i=se({},CI,{"x-amz-sso_bearer_token":t.accessToken}),a=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,d=se({role_name:[,yt(t.roleName,"roleName")],account_id:[,yt(t.accountId,"accountId")]}),c;return new V({protocol:n,hostname:r,port:s,method:"GET",headers:i,path:a,query:d,body:c})};var qE=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return hI(t,e);let r=se({$metadata:ui(t)}),n=yt(qo(await jE(t.body,e)),"body"),s=Ee(n,{roleCredentials:Vo});return Object.assign(r,s),r},hI=async(t,e)=>{let r={...t,body:await SI(t.body,e)},n=bI(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await pI(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await yI(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await gI(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await EI(r,e);default:let s=r.body;return mI({output:t,parsedBody:s,errorCode:n})}};var mI=Gr(It),pI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{message:D});Object.assign(r,s);let o=new Hs({$metadata:ui(t),...r});return te(o,t.body)},yI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{message:D});Object.assign(r,s);let o=new Vs({$metadata:ui(t),...r});return te(o,t.body)},gI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{message:D});Object.assign(r,s);let o=new Ws({$metadata:ui(t),...r});return te(o,t.body)},EI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{message:D});Object.assign(r,s);let o=new Ys({$metadata:ui(t),...r});return te(o,t.body)},ui=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),wI=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),xI=(t,e)=>wI(t,e).then(r=>e.utf8Encoder(r)),CI=t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),jE=(t,e)=>xI(t,e).then(r=>r.length?JSON.parse(r):{}),SI=async(t,e)=>{let r=await jE(t,e);return r.message=r.message??r.Message,r},bI=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)};var Xs=class extends pt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(Ut(r,this.serialize,this.deserialize)),this.middlewareStack.use(zt(r,Xs.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:UE,outputFilterSensitiveLog:zE},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return $E(e,r)}deserialize(e,r){return qE(e,r)}};var GE=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var KE={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};import{Buffer as RI}from"buffer";import{createHash as AI,createHmac as kI}from"crypto";var Ct=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(Xe(HE(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?kI(this.algorithmIdentifier,HE(this.secret)):AI(this.algorithmIdentifier)}};function HE(t,e){return RI.isBuffer(t)?t:typeof t=="string"?Ns(t,e):ArrayBuffer.isView(t)?fr(t.buffer,t.byteOffset,t.byteLength):fr(t)}function bf(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Vt(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${Vt(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Vt(n)}`),e.push(s)}}return e.join("&")}import{Agent as NI,request as OI}from"http";import{Agent as II,request as vI}from"https";var VE=["ECONNRESET","EPIPE","ETIMEDOUT"];var _f=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e};var WE=(t,e,r=0)=>{r&&t.on("socket",n=>{if(n.connecting){let s=setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);n.on("connect",()=>{clearTimeout(s)})}})};var YE=(t,e,r=0)=>{t.setTimeout(r,()=>{t.destroy(),e(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};import{Readable as TI}from"stream";function Rf(t,e){(e.headers.Expect||e.headers.expect)==="100-continue"?t.on("continue",()=>{XE(t,e.body)}):XE(t,e.body)}function XE(t,e){e instanceof TI?e.pipe(t):e?t.end(Buffer.from(e)):t.end()}var Wt=class{constructor(e){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,httpAgent:o,httpsAgent:i}=e||{},a=!0,d=50;return{connectionTimeout:n,requestTimeout:r??s,httpAgent:o||new NI({keepAlive:a,maxSockets:d}),httpsAgent:i||new II({keepAlive:a,maxSockets:d})}}destroy(){var e,r,n,s;(r=(e=this.config)==null?void 0:e.httpAgent)==null||r.destroy(),(s=(n=this.config)==null?void 0:n.httpsAgent)==null||s.destroy()}async handle(e,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,s)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let l=new Error("Request aborted");l.name="AbortError",s(l);return}let o=e.protocol==="https:",i=bf(e.query||{}),a={headers:e.headers,host:e.hostname,method:e.method,path:i?`${e.path}?${i}`:e.path,port:e.port,agent:o?this.config.httpsAgent:this.config.httpAgent},c=(o?vI:OI)(a,l=>{let u=new Ot({statusCode:l.statusCode||-1,headers:_f(l.headers),body:l});n({response:u})});c.on("error",l=>{VE.includes(l.code)?s(Object.assign(l,{name:"TimeoutError"})):s(l)}),WE(c,s,this.config.connectionTimeout),YE(c,s,this.config.requestTimeout),r&&(r.onabort=()=>{c.abort();let l=new Error("Request aborted");l.name="AbortError",s(l)}),Rf(c,e)})}};var Af=class{constructor(e){this.sessions=[],this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}};import{Writable as PI}from"stream";var ac=class extends PI{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,n){this.bufferedBytes.push(e),n()}};var Yt=t=>new Promise((e,r)=>{let n=new ac;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})});import{fstatSync as DI,lstatSync as BI}from"fs";var En=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.from(t).length;if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return BI(t.path).size;if(typeof t.fd=="number")return DI(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)};import{platform as MI,release as FI}from"os";import{env as ZE,versions as LI}from"process";var QE=()=>{try{return typeof I=="function"&&typeof module<"u"&&I("aws-crt")?["md/crt-avail"]:null}catch{return null}};var UI="AWS_SDK_UA_APP_ID",zI="sdk-ua-app-id",wn=({serviceId:t,clientVersion:e})=>{let r=[["aws-sdk-js",e],[`os/${MI()}`,FI()],["lang/js"],["md/nodejs",`${LI.node}`]],n=QE();n&&r.push(n),t&&r.push([`api/${t}`,e]),ZE.AWS_EXECUTION_ENV&&r.push([`exec-env/${ZE.AWS_EXECUTION_ENV}`]);let s=W({environmentVariableSelector:i=>i[UI],configFileSelector:i=>i[zI],default:void 0})(),o;return async()=>{if(!o){let i=await s;o=i?[...r,[`app/${i}`]]:[...r]}return o}};var $I=/^[A-Za-z0-9+/]*={0,2}$/,xn=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!$I.exec(t))throw new TypeError("Invalid base64 string.");let e=Ns(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};var Cn=t=>fr(t.buffer,t.byteOffset,t.byteLength).toString("base64");var iw="required",pr="fn",yr="argv",Qs="ref",kf="PartitionResult",Xt="tree",hi="error",mi="endpoint",JE={[iw]:!1,type:"String"},ew={[iw]:!0,default:!1,type:"Boolean"},aw={[Qs]:"Endpoint"},cw={[pr]:"booleanEquals",[yr]:[{[Qs]:"UseFIPS"},!0]},dw={[pr]:"booleanEquals",[yr]:[{[Qs]:"UseDualStack"},!0]},Qt={},tw={[pr]:"booleanEquals",[yr]:[!0,{[pr]:"getAttr",[yr]:[{[Qs]:kf},"supportsFIPS"]}]},rw={[pr]:"booleanEquals",[yr]:[!0,{[pr]:"getAttr",[yr]:[{[Qs]:kf},"supportsDualStack"]}]},nw=[aw],sw=[cw],ow=[dw],qI={version:"1.0",parameters:{Region:JE,UseDualStack:ew,UseFIPS:ew,Endpoint:JE},rules:[{conditions:[{[pr]:"aws.partition",[yr]:[{[Qs]:"Region"}],assign:kf}],type:Xt,rules:[{conditions:[{[pr]:"isSet",[yr]:nw},{[pr]:"parseURL",[yr]:nw,assign:"url"}],type:Xt,rules:[{conditions:sw,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:hi},{type:Xt,rules:[{conditions:ow,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:hi},{endpoint:{url:aw,properties:Qt,headers:Qt},type:mi}]}]},{conditions:[cw,dw],type:Xt,rules:[{conditions:[tw,rw],type:Xt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:mi}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:hi}]},{conditions:sw,type:Xt,rules:[{conditions:[tw],type:Xt,rules:[{type:Xt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:mi}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:hi}]},{conditions:ow,type:Xt,rules:[{conditions:[rw],type:Xt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:mi}]},{error:"DualStack is enabled but this partition does not support DualStack",type:hi}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:mi}]}]},lw=qI;var fw=(t,e={})=>mn(lw,{endpointParams:t,logger:e.logger});var uw=t=>({apiVersion:"2019-06-10",base64Decoder:(t==null?void 0:t.base64Decoder)??xn,base64Encoder:(t==null?void 0:t.base64Encoder)??Cn,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??fw,logger:(t==null?void 0:t.logger)??new Ft,serviceId:(t==null?void 0:t.serviceId)??"SSO",urlParser:(t==null?void 0:t.urlParser)??We,utf8Decoder:(t==null?void 0:t.utf8Decoder)??qt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Qr});var hw="AWS_EXECUTION_ENV",Tf="AWS_REGION",Nf="AWS_DEFAULT_REGION",mw="AWS_EC2_METADATA_DISABLED",pw=["in-region","cross-region","mobile","standard","legacy"],yw="/latest/meta-data/placement/region";var jI="AWS_DEFAULTS_MODE",GI="defaults_mode",gw={environmentVariableSelector:t=>t[jI],configFileSelector:t=>t[GI],default:"legacy"};var Sn=({region:t=W(Gt),defaultsMode:e=W(gw)}={})=>fn(async()=>{let r=typeof e=="function"?await e():e;switch(r==null?void 0:r.toLowerCase()){case"auto":return KI(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${pw.join(", ")}, got ${r}`)}}),KI=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await HI();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},HI=async()=>{if(process.env[hw]&&(process.env[Tf]||process.env[Nf]))return process.env[Tf]??process.env[Nf];if(!process.env[mw])try{let t=await li();return(await mr({...t,path:yw})).toString()}catch{}};var Ew=t=>{Hr(process.version);let e=Sn(t),r=()=>e().then(Kr),n=uw(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??En,defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??wn({serviceId:n.serviceId,clientVersion:KE.version}),maxAttempts:(t==null?void 0:t.maxAttempts)??W(an),region:(t==null?void 0:t.region)??W(Gt,en),requestHandler:(t==null?void 0:t.requestHandler)??new Wt(r),retryMode:(t==null?void 0:t.retryMode)??W({...dn,default:async()=>(await r()).retryMode||Ht}),sha256:(t==null?void 0:t.sha256)??Ct.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??Yt,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??W(Zr),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??W(Jr)}};var cc=class extends Lt{constructor(e){let r=Ew(e),n=GE(r),s=tn(n),o=Vr(s),i=cn(o),a=i,d=un(a);super(d),this.config=d,this.middlewareStack.use(ln(this.config)),this.middlewareStack.use(rn(this.config)),this.middlewareStack.use(nn(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(on(this.config)),this.middlewareStack.use(pn(this.config))}destroy(){super.destroy()}};var Zs="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var _e=class extends gt{constructor(e){super(e),Object.setPrototypeOf(this,_e.prototype)}};var Js=class extends _e{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Js.prototype),this.error=e.error,this.error_description=e.error_description}},eo=class extends _e{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,eo.prototype),this.error=e.error,this.error_description=e.error_description}},to=class extends _e{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,to.prototype),this.error=e.error,this.error_description=e.error_description}},ro=class extends _e{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,ro.prototype),this.error=e.error,this.error_description=e.error_description}},no=class extends _e{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,no.prototype),this.error=e.error,this.error_description=e.error_description}},so=class extends _e{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,so.prototype),this.error=e.error,this.error_description=e.error_description}},oo=class extends _e{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,oo.prototype),this.error=e.error,this.error_description=e.error_description}},io=class extends _e{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,io.prototype),this.error=e.error,this.error_description=e.error_description}},ao=class extends _e{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,ao.prototype),this.error=e.error,this.error_description=e.error_description}},co=class extends _e{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,co.prototype),this.error=e.error,this.error_description=e.error_description}},lo=class extends _e{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,lo.prototype),this.error=e.error,this.error_description=e.error_description}};var ww=async(t,e)=>{let{hostname:r,protocol:n="https",port:s,path:o}=await e.endpoint(),i={"content-type":"application/json"},a=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/token`,d;return d=JSON.stringify(Ee(t,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:c=>Vo(c)})),new V({protocol:n,hostname:r,port:s,method:"POST",headers:i,path:a,body:d})};var xw=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return VI(t,e);let r=se({$metadata:St(t)}),n=yt(qo(await Cw(t.body,e)),"body"),s=Ee(n,{accessToken:D,expiresIn:la,idToken:D,refreshToken:D,tokenType:D});return Object.assign(r,s),r},VI=async(t,e)=>{let r={...t,body:await cv(t.body,e)},n=dv(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await YI(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await XI(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await QI(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await ZI(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await JI(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await ev(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await tv(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await rv(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await nv(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await sv(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await ov(r,e);default:let s=r.body;return WI({output:t,parsedBody:s,errorCode:n})}};var WI=Gr(_e),YI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new Js({$metadata:St(t),...r});return te(o,t.body)},XI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new eo({$metadata:St(t),...r});return te(o,t.body)},QI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new to({$metadata:St(t),...r});return te(o,t.body)},ZI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new ro({$metadata:St(t),...r});return te(o,t.body)},JI=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new no({$metadata:St(t),...r});return te(o,t.body)};var ev=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new so({$metadata:St(t),...r});return te(o,t.body)},tv=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new oo({$metadata:St(t),...r});return te(o,t.body)},rv=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new io({$metadata:St(t),...r});return te(o,t.body)},nv=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new ao({$metadata:St(t),...r});return te(o,t.body)},sv=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new co({$metadata:St(t),...r});return te(o,t.body)},ov=async(t,e)=>{let r=se({}),n=t.body,s=Ee(n,{error:D,error_description:D});Object.assign(r,s);let o=new lo({$metadata:St(t),...r});return te(o,t.body)},St=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),iv=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),av=(t,e)=>iv(t,e).then(r=>e.utf8Encoder(r));var Cw=(t,e)=>av(t,e).then(r=>r.length?JSON.parse(r):{}),cv=async(t,e)=>{let r=await Cw(t,e);return r.message=r.message??r.Message,r},dv=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)};var fo=class extends pt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(Ut(r,this.serialize,this.deserialize)),this.middlewareStack.use(zt(r,fo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return ww(e,r)}deserialize(e,r){return xw(e,r)}};var Sw=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var bw={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var Iw="required",gr="fn",Er="argv",uo="ref",If="PartitionResult",Zt="tree",pi="error",yi="endpoint",_w={[Iw]:!1,type:"String"},Rw={[Iw]:!0,default:!1,type:"Boolean"},vw={[uo]:"Endpoint"},Pw={[gr]:"booleanEquals",[Er]:[{[uo]:"UseFIPS"},!0]},Dw={[gr]:"booleanEquals",[Er]:[{[uo]:"UseDualStack"},!0]},Jt={},Aw={[gr]:"booleanEquals",[Er]:[!0,{[gr]:"getAttr",[Er]:[{[uo]:If},"supportsFIPS"]}]},kw={[gr]:"booleanEquals",[Er]:[!0,{[gr]:"getAttr",[Er]:[{[uo]:If},"supportsDualStack"]}]},Tw=[vw],Nw=[Pw],Ow=[Dw],fv={version:"1.0",parameters:{Region:_w,UseDualStack:Rw,UseFIPS:Rw,Endpoint:_w},rules:[{conditions:[{[gr]:"aws.partition",[Er]:[{[uo]:"Region"}],assign:If}],type:Zt,rules:[{conditions:[{[gr]:"isSet",[Er]:Tw},{[gr]:"parseURL",[Er]:Tw,assign:"url"}],type:Zt,rules:[{conditions:Nw,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:pi},{type:Zt,rules:[{conditions:Ow,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:pi},{endpoint:{url:vw,properties:Jt,headers:Jt},type:yi}]}]},{conditions:[Pw,Dw],type:Zt,rules:[{conditions:[Aw,kw],type:Zt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Jt,headers:Jt},type:yi}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:pi}]},{conditions:Nw,type:Zt,rules:[{conditions:[Aw],type:Zt,rules:[{type:Zt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Jt,headers:Jt},type:yi}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:pi}]},{conditions:Ow,type:Zt,rules:[{conditions:[kw],type:Zt,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Jt,headers:Jt},type:yi}]},{error:"DualStack is enabled but this partition does not support DualStack",type:pi}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Jt,headers:Jt},type:yi}]}]},Bw=fv;var Mw=(t,e={})=>mn(Bw,{endpointParams:t,logger:e.logger});var Fw=t=>({apiVersion:"2019-06-10",base64Decoder:(t==null?void 0:t.base64Decoder)??xn,base64Encoder:(t==null?void 0:t.base64Encoder)??Cn,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??Mw,logger:(t==null?void 0:t.logger)??new Ft,serviceId:(t==null?void 0:t.serviceId)??"SSO OIDC",urlParser:(t==null?void 0:t.urlParser)??We,utf8Decoder:(t==null?void 0:t.utf8Decoder)??qt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Qr});var Lw=t=>{Hr(process.version);let e=Sn(t),r=()=>e().then(Kr),n=Fw(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??En,defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??wn({serviceId:n.serviceId,clientVersion:bw.version}),maxAttempts:(t==null?void 0:t.maxAttempts)??W(an),region:(t==null?void 0:t.region)??W(Gt,en),requestHandler:(t==null?void 0:t.requestHandler)??new Wt(r),retryMode:(t==null?void 0:t.retryMode)??W({...dn,default:async()=>(await r()).retryMode||Ht}),sha256:(t==null?void 0:t.sha256)??Ct.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??Yt,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??W(Zr),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??W(Jr)}};var dc=class extends Lt{constructor(e){let r=Lw(e),n=Sw(r),s=tn(n),o=Vr(s),i=cn(o),a=i,d=un(a);super(d),this.config=d,this.middlewareStack.use(ln(this.config)),this.middlewareStack.use(rn(this.config)),this.middlewareStack.use(nn(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(on(this.config)),this.middlewareStack.use(pn(this.config))}destroy(){super.destroy()}};var vf={},Uw=t=>{if(vf[t])return vf[t];let e=new dc({region:t});return vf[t]=e,e};var zw=(t,e)=>Uw(e).send(new fo({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}));var Pf=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Ze(`Token is expired. ${Zs}`,!1)};var bn=(t,e,r=!1)=>{if(typeof e>"u")throw new Ze(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${Zs}`,!1)};import{promises as uv}from"fs";var{writeFile:hv}=uv,$w=(t,e)=>{let r=Ya(t),n=JSON.stringify(e,null,2);return hv(r,n)};var qw=new Date(0),jw=(t={})=>async()=>{let e=await yn(t),r=xt(t),n=e[r];if(n){if(!n.sso_session)throw new Ze(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Ze(`Profile '${r}' could not be found in shared credentials file.`,!1);let s=n.sso_session,i=(await Ja(t))[s];if(!i)throw new Ze(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let w of["sso_start_url","sso_region"])if(!i[w])throw new Ze(`Sso session '${s}' is missing required property '${w}'.`,!1);let a=i.sso_start_url,d=i.sso_region,c;try{c=await Xa(s)}catch{throw new Ze(`The SSO session token associated with profile=${r} was not found or is invalid. ${Zs}`,!1)}bn("accessToken",c.accessToken),bn("expiresAt",c.expiresAt);let{accessToken:l,expiresAt:u}=c,h={token:l,expiration:new Date(u)};if(h.expiration.getTime()-Date.now()>3e5)return h;if(Date.now()-qw.getTime()<30*1e3)return Pf(h),h;bn("clientId",c.clientId,!0),bn("clientSecret",c.clientSecret,!0),bn("refreshToken",c.refreshToken,!0);try{qw.setTime(Date.now());let w=await zw(c,d);bn("accessToken",w.accessToken),bn("expiresIn",w.expiresIn);let S=new Date(Date.now()+w.expiresIn*1e3);try{await $w(s,{...c,accessToken:w.accessToken,expiresAt:S.toISOString(),refreshToken:w.refreshToken})}catch{}return{token:w.accessToken,expiration:S}}catch{return Pf(h),h}};var pv=15*60*1e3,gi=!1,Df=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,profile:i})=>{let a,d="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let R=await jw({profile:i})();a={accessToken:R.token,expiresAt:new Date(R.expiration).toISOString()}}catch(R){throw new M(R.message,gi)}else try{a=await Xa(t)}catch{throw new M(`The SSO session associated with this profile is invalid. ${d}`,gi)}if(new Date(a.expiresAt).getTime()-Date.now()<=pv)throw new M(`The SSO session associated with this profile has expired. ${d}`,gi);let{accessToken:c}=a,l=o||new cc({region:n}),u;try{u=await l.send(new Xs({accountId:r,roleName:s,accessToken:c}))}catch(R){throw M.from(R,gi)}let{roleCredentials:{accessKeyId:h,secretAccessKey:w,sessionToken:S,expiration:b}={}}=u;if(!h||!w||!S||!b)throw new M("SSO returns an invalid temporary credential.",gi);return{accessKeyId:h,secretAccessKey:w,sessionToken:S,expiration:new Date(b)}};var lc=t=>{let{sso_start_url:e,sso_account_id:r,sso_region:n,sso_role_name:s}=t;if(!e||!r||!n||!s)throw new M(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return t};var fc=(t={})=>async()=>{let{ssoStartUrl:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,ssoSession:i}=t,a=xt(t);if(!e&&!r&&!n&&!s&&!i){let c=(await yn(t))[a];if(!c)throw new M(`Profile ${a} was not found.`);if(!fi(c))throw new M(`Profile ${a} is not configured with SSO credentials.`);if(c!=null&&c.sso_session){let R=(await Ja(t))[c.sso_session],K=` configurations in profile ${a} and sso-session ${c.sso_session}`;if(n&&n!==R.sso_region)throw new M("Conflicting SSO region"+K,!1);if(e&&e!==R.sso_start_url)throw new M("Conflicting SSO start_url"+K,!1);c.sso_region=R.sso_region,c.sso_start_url=R.sso_start_url}let{sso_start_url:l,sso_account_id:u,sso_region:h,sso_role_name:w,sso_session:S}=lc(c);return Df({ssoStartUrl:l,ssoSession:S,ssoAccountId:u,ssoRegion:h,ssoRoleName:w,ssoClient:o,profile:a})}else{if(!e||!r||!n||!s)throw new M('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Df({ssoStartUrl:e,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,profile:a})}};var Gw=t=>{let{sso_start_url:e,sso_account_id:r,sso_session:n,sso_region:s,sso_role_name:o}=lc(t);return fc({ssoStartUrl:e,ssoAccountId:r,ssoSession:n,ssoRegion:s,ssoRoleName:o})()};var Bf=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1,Mf=t=>Promise.resolve({accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token});import{readFileSync as yv}from"fs";var Kw=t=>()=>{let{roleArn:e,roleSessionName:r,webIdentityToken:n,providerId:s,policyArns:o,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:d}=t;if(!d)throw new M(`Role Arn '${e}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return d({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:s,PolicyArns:o,Policy:i,DurationSeconds:a})};var gv="AWS_WEB_IDENTITY_TOKEN_FILE",Ev="AWS_ROLE_ARN",wv="AWS_ROLE_SESSION_NAME",uc=(t={})=>async()=>xv(t),xv=t=>{let e=(t==null?void 0:t.webIdentityTokenFile)??process.env[gv],r=(t==null?void 0:t.roleArn)??process.env[Ev],n=(t==null?void 0:t.roleSessionName)??process.env[wv];if(!e||!r)throw new M("Web identity configuration not specified");return Kw({...t,webIdentityToken:yv(e,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var Hw=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,Vw=async(t,e)=>uc({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity})();var oc=async(t,e,r,n={})=>{let s=e[t];if(Object.keys(n).length>0&&Bf(s))return Mf(s);if(PE(s))return DE(t,e,r,n);if(Bf(s))return Mf(s);if(Hw(s))return Vw(s,r);if(FE(s))return LE(r,t);if(fi(s))return Gw(s);throw new M(`Profile ${t} could not be found or parsed in shared credentials file.`)};var Ww=(t={})=>async()=>{let e=await yn(t);return oc(xt(t),e,t)};var Cv="AWS_EC2_METADATA_DISABLED",Yw=t=>process.env[ci]||process.env[ai]?nc(t):process.env[Cv]?async()=>{throw new M("EC2 Instance Metadata Service access disabled")}:sc(t);var hc=(t={})=>fn(Oa(...t.profile||process.env[xf]?[]:[Wa()],fc(t),Ww(t),ic(t),uc(t),Yw(t),async()=>{throw new M("Could not load credentials from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);var sx="required",j="type",Z="fn",J="argv",_n="ref",Wn="properties",Yn="headers";var Lf="PartitionResult",bt="tree",Xn="booleanEquals",Pe="stringEquals",ox="sigv4",ix="us-east-1",ax="sts",fe="endpoint",cx="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ei="error",Uf="getAttr",Xw={[sx]:!1,[j]:"String"},Ff={[sx]:!0,default:!1,[j]:"Boolean"},De={[_n]:"Region"},dx={[_n]:"UseFIPS"},lx={[_n]:"UseDualStack"},Qw={[Z]:"isSet",[J]:[{[_n]:"Endpoint"}]},fx={[_n]:"Endpoint"},Me={url:"https://sts.amazonaws.com",[Wn]:{authSchemes:[{name:ox,signingRegion:ix,signingName:ax}]},[Yn]:{}},wr={},Zw={conditions:[{[Z]:Pe,[J]:[De,"aws-global"]}],[fe]:Me,[j]:fe},ux={[Z]:Xn,[J]:[dx,!0]},hx={[Z]:Xn,[J]:[lx,!0]},Jw={[Z]:Xn,[J]:[!0,{[Z]:Uf,[J]:[{[_n]:Lf},"supportsFIPS"]}]},mx={[_n]:Lf},ex={[Z]:Xn,[J]:[!0,{[Z]:Uf,[J]:[mx,"supportsDualStack"]}]},tx={url:cx,[Wn]:{},[Yn]:{}},Sv=[fx],rx=[ux],nx=[hx],bv={version:"1.0",parameters:{Region:Xw,UseDualStack:Ff,UseFIPS:Ff,Endpoint:Xw,UseGlobalEndpoint:Ff},rules:[{conditions:[{[Z]:"aws.partition",[J]:[De],assign:Lf}],[j]:bt,rules:[{conditions:[{[Z]:Xn,[J]:[{[_n]:"UseGlobalEndpoint"},!0]},{[Z]:Xn,[J]:[dx,!1]},{[Z]:Xn,[J]:[lx,!1]},{[Z]:"not",[J]:[Qw]}],[j]:bt,rules:[{conditions:[{[Z]:Pe,[J]:[De,"ap-northeast-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"ap-south-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"ap-southeast-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"ap-southeast-2"]}],endpoint:Me,[j]:fe},Zw,{conditions:[{[Z]:Pe,[J]:[De,"ca-central-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"eu-central-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"eu-north-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"eu-west-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"eu-west-2"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"eu-west-3"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"sa-east-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,ix]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"us-east-2"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"us-west-1"]}],endpoint:Me,[j]:fe},{conditions:[{[Z]:Pe,[J]:[De,"us-west-2"]}],endpoint:Me,[j]:fe},{endpoint:{url:cx,[Wn]:{authSchemes:[{name:ox,signingRegion:"{Region}",signingName:ax}]},[Yn]:wr},[j]:fe}]},{conditions:[Qw,{[Z]:"parseURL",[J]:Sv,assign:"url"}],[j]:bt,rules:[{conditions:rx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[j]:Ei},{[j]:bt,rules:[{conditions:nx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[j]:Ei},{endpoint:{url:fx,[Wn]:wr,[Yn]:wr},[j]:fe}]}]},{conditions:[ux,hx],[j]:bt,rules:[{conditions:[Jw,ex],[j]:bt,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Wn]:wr,[Yn]:wr},[j]:fe}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[j]:Ei}]},{conditions:rx,[j]:bt,rules:[{conditions:[Jw],[j]:bt,rules:[{[j]:bt,rules:[{conditions:[{[Z]:Pe,[J]:["aws-us-gov",{[Z]:Uf,[J]:[mx,"name"]}]}],endpoint:tx,[j]:fe},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Wn]:wr,[Yn]:wr},[j]:fe}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[j]:Ei}]},{conditions:nx,[j]:bt,rules:[{conditions:[ex],[j]:bt,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Wn]:wr,[Yn]:wr},[j]:fe}]},{error:"DualStack is enabled but this partition does not support DualStack",[j]:Ei}]},{[j]:bt,rules:[Zw,{endpoint:tx,[j]:fe}]}]}]},px=bv;var yx=(t,e={})=>mn(px,{endpointParams:t,logger:e.logger});var gx=t=>({apiVersion:"2011-06-15",base64Decoder:(t==null?void 0:t.base64Decoder)??xn,base64Encoder:(t==null?void 0:t.base64Encoder)??Cn,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??yx,logger:(t==null?void 0:t.logger)??new Ft,serviceId:(t==null?void 0:t.serviceId)??"STS",urlParser:(t==null?void 0:t.urlParser)??We,utf8Decoder:(t==null?void 0:t.utf8Decoder)??qt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Qr});var Ex=t=>{Hr(process.version);let e=Sn(t),r=()=>e().then(Kr),n=gx(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??En,credentialDefaultProvider:(t==null?void 0:t.credentialDefaultProvider)??yE(hc),defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??wn({serviceId:n.serviceId,clientVersion:hE.version}),maxAttempts:(t==null?void 0:t.maxAttempts)??W(an),region:(t==null?void 0:t.region)??W(Gt,en),requestHandler:(t==null?void 0:t.requestHandler)??new Wt(r),retryMode:(t==null?void 0:t.retryMode)??W({...dn,default:async()=>(await r()).retryMode||Ht}),sha256:(t==null?void 0:t.sha256)??Ct.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??Yt,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??W(Zr),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??W(Jr)}};var Qn=class extends Lt{constructor(e){let r=Ex(e),n=uE(r),s=tn(n),o=Vr(s),i=cn(o),a=i,d=fE(a,{stsClientCtor:Qn}),c=un(d);super(c),this.config=c,this.middlewareStack.use(ln(this.config)),this.middlewareStack.use(rn(this.config)),this.middlewareStack.use(nn(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(on(this.config)),this.middlewareStack.use(pn(this.config))}destroy(){super.destroy()}};var wx=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,_v=(t={},e)=>Ef(t,wx(Qn,e)),Rv=(t={},e)=>wf(t,wx(Qn,e)),xx=t=>e=>t({roleAssumer:_v(e),roleAssumerWithWebIdentity:Rv(e),...e});var kx=Fr(Jo());var Rn=class{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Cx(r),new Rn(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&Cx(e),parseInt(ve(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Cx(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var mc=class{constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){let r=[];for(let o of Object.keys(e)){let i=this.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=this.fromUtf8(e.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let c=new Uint8Array(d.buffer);return c.set(a,3),c;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Rn.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!Dv.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(ag(e.value.replace(/\-/g,"")),1),u}}parse(e){let r={},n=0;for(;n<e.byteLength;){let s=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[o]={type:bx,value:!0};break;case 1:r[o]={type:bx,value:!1};break;case 2:r[o]={type:Av,value:e.getInt8(n++)};break;case 3:r[o]={type:kv,value:e.getInt16(n,!1)},n+=2;break;case 4:r[o]={type:Tv,value:e.getInt32(n,!1)},n+=4;break;case 5:r[o]={type:Nv,value:new Rn(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:let i=e.getUint16(n,!1);n+=2,r[o]={type:Ov,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:let a=e.getUint16(n,!1);n+=2,r[o]={type:Iv,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:r[o]={type:vv,value:new Date(new Rn(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let d=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[o]={type:Pv,value:`${ve(d.subarray(0,4))}-${ve(d.subarray(4,6))}-${ve(d.subarray(6,8))}-${ve(d.subarray(8,10))}-${ve(d.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},Sx;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Sx||(Sx={}));var bx="boolean",Av="byte",kv="short",Tv="integer",Nv="long",Ov="binary",Iv="string",vv="timestamp",Pv="uuid",Dv=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var _x=Fr(Jo()),Rx=4,An=Rx*2,Zn=4,Bv=An+Zn*2;function Ax({byteLength:t,byteOffset:e,buffer:r}){if(t<Bv)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");let o=n.getUint32(Rx,!1),i=n.getUint32(An,!1),a=n.getUint32(t-Zn,!1),d=new _x.Crc32().update(new Uint8Array(r,e,An));if(i!==d.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${d.digest()})`);if(d.update(new Uint8Array(r,e+An,t-(An+Zn))),a!==d.digest())throw new Error(`The message checksum (${d.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,e+An+Zn,o),body:new Uint8Array(r,e+An+Zn+o,s-o-(An+Zn+Zn))}}var pc=class{constructor(e,r){this.headerMarshaller=new mc(e,r)}encode({headers:e,body:r}){let n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,o=new Uint8Array(s),i=new DataView(o.buffer,o.byteOffset,o.byteLength),a=new kx.Crc32;return i.setUint32(0,s,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(o.subarray(0,8)).digest(),!1),o.set(n,12),o.set(r,n.byteLength+12),i.setUint32(s-4,a.update(o.subarray(8,s-4)).digest(),!1),o}decode(e){let{headers:r,body:n}=Ax(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}};function Tx(t){let e=0,r=0,n=null,s=null,o=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=t[Symbol.asyncIterator]();for(;;){let{value:d,done:c}=await a.next();if(c){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=d.length,u=0;for(;u<l;){if(!n){let w=l-u;s||(s=new Uint8Array(4));let S=Math.min(4-r,w);if(s.set(d.slice(u,u+S),r),r+=S,u+=S,r<4)break;o(new DataView(s.buffer).getUint32(0,!1)),s=null}let h=Math.min(e-r,l-u);n.set(d.slice(u,u+h),r),r+=h,u+=h,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function Nx(t,e){return{[Symbol.asyncIterator]:async function*(){for await(let r of t){let n=e.eventStreamCodec.decode(r),{value:s}=n.headers[":message-type"];if(s==="error"){let o=new Error(n.headers[":error-message"].value||"UnknownError");throw o.name=n.headers[":error-code"].value,o}else if(s==="exception"){let o=n.headers[":exception-type"].value,i={[o]:n},a=await e.deserializer(i);if(a.$unknown){let d=new Error(e.toUtf8(n.body));throw d.name=o,d}throw a[o]}else if(s==="event"){let o={[n.headers[":event-type"].value]:n},i=await e.deserializer(o);if(i.$unknown)continue;yield i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}}}var wi=class{constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new pc(e,r),this.utfEncoder=e}deserialize(e,r){let n=Tx(e);return Nx(n,{eventStreamCodec:this.eventStreamCodec,deserializer:r,toUtf8:this.utfEncoder})}serialize(e,r){let n=this,s=async function*(){for await(let o of e)yield n.eventStreamCodec.encode(r(o));yield new Uint8Array(0)};return{[Symbol.asyncIterator]:s}}};import{Readable as Mv}from"stream";async function*Ox(t){let e=!1,r=!1,n=new Array;for(t.on("error",s=>{if(e||(e=!0),s)throw s}),t.on("data",s=>{n.push(s)}),t.on("end",()=>{e=!0});!r;){let s=await new Promise(o=>setTimeout(()=>o(n.shift()),0));s&&(yield s),r=e&&n.length===0}}var yc=class{constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new wi({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){let n=typeof e[Symbol.asyncIterator]=="function"?e:Ox(e);return this.universalMarshaller.deserialize(n,r)}serialize(e,r){return Mv.from(this.universalMarshaller.serialize(e,r))}};var Ix=t=>new yc(t);import{Writable as Fv}from"stream";var xi=class extends Fv{constructor(e,r){super(r),this.hash=e}_write(e,r,n){try{this.hash.update(Xe(e))}catch(s){return n(s)}n()}};var vx=(t,e)=>{if(e.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new t,n=new xi(r);return e.pipe(n),new Promise((s,o)=>{e.on("error",i=>{n.end(),o(i)}),n.on("error",o),n.on("finish",()=>{r.digest().then(s).catch(o)})})};var Lv="AWS_S3_USE_ARN_REGION",Uv="s3_use_arn_region",Px={environmentVariableSelector:t=>jt(t,Lv,Et.ENV),configFileSelector:t=>jt(t,Uv,Et.CONFIG),default:!1};import{Readable as Yv}from"stream";var Dx=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=e,a=r!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,d=a?i(s,t):void 0,c=new Yv({read:()=>{}});return t.on("data",l=>{c.push(`${(n(l)||0).toString(16)}\r
${l.toString()}\r
`)}),t.on("end",async()=>{if(c.push(`0\r
`),a){let l=r(await d);c.push(`${o}:${l}\r
`),c.push(`\r
`)}c.push(null)}),c};import{Readable as zf}from"stream";import{TextDecoder as Xv}from"util";var Bx="The stream has already been transformed.",Mx=t=>{var n,s;if(!(t instanceof zf)){let o=((s=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:s.name)||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let e=!1,r=async()=>{if(e)throw new Error(Bx);return e=!0,await Yt(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async o=>{let i=await r();return o===void 0||Buffer.isEncoding(o)?fr(i.buffer,i.byteOffset,i.byteLength).toString(o):new Xv(o).decode(i)},transformToWebStream:()=>{if(e)throw new Error(Bx);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof zf.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return e=!0,zf.toWeb(t)}})};var gc=class{constructor(e){this.sigv4Signer=new Vn(e),this.signerOptions=e}async sign(e,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(e,r)}return this.sigv4Signer.sign(e,r)}async presign(e,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(e,r)}return this.sigv4Signer.presign(e,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let e;try{if(e=typeof I=="function"&&I("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof e!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new e({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var cu="required",f="type",g="rules",y="conditions",m="fn",p="argv",x="ref",Re="assign",A="url",k="properties",F="authSchemes",L="disableDoubleEncoding",U="signingName",z="signingRegion",T="headers";var E="tree",it="isSet",Ci="substring",jC="hardwareType",GC="regionPrefix",Fx="abbaSuffix",iu="outpostId",Ai="aws.partition",v="stringEquals",ts="isValidHostLabel",he="not",O="error",KC="parseURL",du="s3-outposts",C="endpoint",_="booleanEquals",HC="aws.parseArn",$="s3",Lx="aws.isVirtualHostableS3Bucket",ue="getAttr",B="name",$f="Host override cannot be combined with Dualstack, FIPS, or S3 Accelerate",VC="https://{Bucket}.s3.{partitionResult#dnsSuffix}",WC="bucketArn",YC="arnType",bc="",lu="s3-object-lambda",XC="accesspoint",fu="accessPointName",Ux="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",zx="mrapPartition",$x="outpostType",qx="arnPrefix",rs="{url#scheme}://{url#authority}{url#path}",QC="https://s3.{partitionResult#dnsSuffix}",qf={[cu]:!1,[f]:"String"},Si={[cu]:!0,default:!1,[f]:"Boolean"},Ec={[cu]:!1,[f]:"Boolean"},ZC={[m]:it,[p]:[{[x]:"Bucket"}]},er={[x]:"Bucket"},jx={[x]:jC},Gx={[y]:[{[m]:he,[p]:[{[m]:it,[p]:[{[x]:"Endpoint"}]}]}],[O]:"Expected a endpoint to be specified but no endpoint was found",[f]:O},q={[m]:he,[p]:[{[m]:it,[p]:[{[x]:"Endpoint"}]}]},G={[m]:it,[p]:[{[x]:"Endpoint"}]},ne={[m]:KC,[p]:[{[x]:"Endpoint"}],[Re]:"url"},wc={[F]:[{[L]:!0,[B]:"sigv4",[U]:du,[z]:"{Region}"}]},xe={},Kx={[x]:"ForcePathStyle"},Hx={[y]:[{[m]:"uriEncode",[p]:[er],[Re]:"uri_encoded_bucket"}],[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},G],[O]:"Cannot set dual-stack in combination with a custom endpoint.",[f]:O},{[f]:E,[g]:[{[y]:[{[m]:Ai,[p]:[{[x]:"Region"}],[Re]:"partitionResult"}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[x]:"Accelerate"},!1]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[C]:{[A]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C}]},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!1]}],[C]:{[A]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C}]},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!1]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[C]:{[A]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C}]},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!0]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!1]}],[C]:{[A]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[C]:{[A]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C}]},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!0]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!1]}],[C]:{[A]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[y]:[{[m]:v,[p]:[{[x]:"Region"},"us-east-1"]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C},{[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C}]},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},G,ne,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!1]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[y]:[{[m]:v,[p]:[{[x]:"Region"},"us-east-1"]}],[C]:{[A]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C},{[C]:{[A]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C}]},{[y]:[{[m]:_,[p]:[{[x]:"UseDualStack"},!1]},q,{[m]:_,[p]:[{[x]:"UseFIPS"},!1]},{[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!1]}],[C]:{[A]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},[T]:{}},[f]:C}]}]},{[O]:"Path-style addressing cannot be used with S3 Accelerate",[f]:O}]}]},{[O]:"A valid partition could not be determined",[f]:O}]}]},ie={[m]:_,[p]:[{[x]:"UseDualStack"},!0]},Se={[m]:_,[p]:[{[x]:"Accelerate"},!1]},de={[m]:_,[p]:[{[x]:"UseFIPS"},!0]},Y={[m]:he,[p]:[{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}]},Fe={[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!0]},Ue={[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{Region}"}]},Le={[m]:_,[p]:[{[x]:"UseGlobalEndpoint"},!1]},ee={[m]:_,[p]:[{[x]:"UseDualStack"},!1]},H={[m]:_,[p]:[{[x]:"UseFIPS"},!1]},Jn={[O]:"A valid partition could not be determined",[f]:O},jf={[y]:[de,{[m]:v,[p]:[{[m]:ue,[p]:[{[x]:"partitionResult"},B]},"aws-cn"]}],[O]:"Partition does not support FIPS",[f]:O},Qv={[m]:v,[p]:[{[m]:ue,[p]:[{[x]:"partitionResult"},B]},"aws-cn"]},vt={[m]:_,[p]:[{[x]:"Accelerate"},!0]},Vx={[y]:[ie,de,Se,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},Wx={[A]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},Yx={[y]:[ee,de,Se,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},Xx={[A]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},Qx={[y]:[ie,H,vt,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},Zx={[A]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},Jx={[y]:[ie,H,Se,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},eC={[A]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},tC={[y]:[ee,H,Se,G,ne,{[m]:_,[p]:[{[m]:ue,[p]:[{[x]:"url"},"isIp"]},!0]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},rC={[m]:_,[p]:[{[m]:ue,[p]:[{[x]:"url"},"isIp"]},!0]},uu={[x]:"url"},nC={[y]:[ee,H,Se,G,ne,{[m]:_,[p]:[{[m]:ue,[p]:[uu,"isIp"]},!1]},{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},sC={[m]:_,[p]:[{[m]:ue,[p]:[uu,"isIp"]},!1]},Gf={[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[k]:Ue,[T]:{}},au={[A]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[k]:Ue,[T]:{}},oC={[C]:au,[f]:C},iC={[y]:[ee,H,vt,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},Kf={[A]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},aC={[y]:[ee,H,Se,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:VC,[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},cC={[A]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},xc={[O]:"Invalid region: region was not a valid DNS name.",[f]:O},et={[x]:WC},JC={[x]:YC},Hf={[m]:ue,[p]:[et,"service"]},hu={[x]:fu},dC={[y]:[ie],[O]:"S3 Object Lambda does not support Dual-stack",[f]:O},lC={[y]:[vt],[O]:"S3 Object Lambda does not support S3 Accelerate",[f]:O},fC={[y]:[{[m]:it,[p]:[{[x]:"DisableAccessPoints"}]},{[m]:_,[p]:[{[x]:"DisableAccessPoints"},!0]}],[O]:"Access points are not supported for this operation",[f]:O},Vf={[y]:[{[m]:it,[p]:[{[x]:"UseArnRegion"}]},{[m]:_,[p]:[{[x]:"UseArnRegion"},!1]},{[m]:he,[p]:[{[m]:v,[p]:[{[m]:ue,[p]:[et,"region"]},"{Region}"]}]}],[O]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[f]:O},mu={[m]:ue,[p]:[{[x]:"bucketPartition"},B]},eS={[m]:ue,[p]:[et,"accountId"]},uC={[y]:[de,{[m]:v,[p]:[mu,"aws-cn"]}],[O]:"Partition does not support FIPS",[f]:O},Wf={[F]:[{[L]:!0,[B]:"sigv4",[U]:lu,[z]:"{bucketArn#region}"}]},hC={[O]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[f]:O},Yf={[O]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[f]:O},Xf={[O]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[f]:O},Qf={[O]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[f]:O},mC={[O]:"Could not load partition for ARN region `{bucketArn#region}`",[f]:O},pC={[O]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[f]:O},yC={[O]:"Invalid ARN: bucket ARN is missing a region",[f]:O},gC={[O]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[f]:O},bi={[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"{bucketArn#region}"}]},EC={[F]:[{[L]:!0,[B]:"sigv4",[U]:du,[z]:"{bucketArn#region}"}]},wC={[x]:"UseObjectLambdaEndpoint"},Zf={[F]:[{[L]:!0,[B]:"sigv4",[U]:lu,[z]:"{Region}"}]},xC={[y]:[de,ie,G,ne,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:rs,[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},tS={[C]:{[A]:rs,[k]:Ue,[T]:{}},[f]:C},_i={[A]:rs,[k]:Ue,[T]:{}},CC={[y]:[de,ie,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},SC={[A]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},bC={[y]:[de,ee,G,ne,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:rs,[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},_C={[y]:[de,ee,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},RC={[A]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},AC={[y]:[H,ie,G,ne,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:rs,[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},kC={[y]:[H,ie,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},TC={[A]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},NC={[y]:[H,ee,G,ne,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:rs,[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},OC={[y]:[H,ee,q,{[m]:v,[p]:[{[x]:"Region"},"aws-global"]}],[C]:{[A]:QC,[k]:{[F]:[{[L]:!0,[B]:"sigv4",[U]:$,[z]:"us-east-1"}]},[T]:{}},[f]:C},IC={[A]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[k]:Ue,[T]:{}},Sc=[{[x]:"Region"}],Zv=[er],vC=[{[m]:ts,[p]:[{[x]:iu},!1]}],PC=[{[m]:v,[p]:[{[x]:GC},"beta"]}],Jv=[{[x]:"Endpoint"}],Ri=[G,ne],DC=[ZC],BC=[{[m]:HC,[p]:[er]}],eP=[ie,G],es=[{[m]:Ai,[p]:Sc,[Re]:"partitionResult"}],ho=[{[m]:v,[p]:[{[x]:"Region"},"us-east-1"]}],MC=[{[m]:ts,[p]:[{[x]:"Region"},!1]}],Jf=[{[m]:v,[p]:[JC,XC]}],FC=[{[m]:ue,[p]:[et,"resourceId[1]"],[Re]:fu},{[m]:he,[p]:[{[m]:v,[p]:[hu,bc]}]}],tP=[et,"resourceId[1]"],LC=[ie],eu=[vt],tu=[{[m]:he,[p]:[{[m]:v,[p]:[{[m]:ue,[p]:[et,"region"]},bc]}]}],UC=[{[m]:he,[p]:[{[m]:it,[p]:[{[m]:ue,[p]:[et,"resourceId[2]"]}]}]}],rP=[et,"resourceId[2]"],ru=[{[m]:Ai,[p]:[{[m]:ue,[p]:[et,"region"]}],[Re]:"bucketPartition"}],zC=[{[m]:v,[p]:[mu,{[m]:ue,[p]:[{[x]:"partitionResult"},B]}]}],nu=[{[m]:ts,[p]:[{[m]:ue,[p]:[et,"region"]},!0]}],su=[{[m]:ts,[p]:[eS,!1]}],$C=[{[m]:ts,[p]:[hu,!1]}],Cc=[de],qC=[{[m]:ts,[p]:[{[x]:"Region"},!0]}],ou=[tS],nP={version:"1.0",parameters:{Bucket:qf,Region:qf,UseFIPS:Si,UseDualStack:Si,Endpoint:qf,ForcePathStyle:Ec,Accelerate:Si,UseGlobalEndpoint:Si,UseObjectLambdaEndpoint:Ec,DisableAccessPoints:Ec,DisableMultiRegionAccessPoints:Si,UseArnRegion:Ec},[g]:[{[f]:E,[g]:[{[y]:[{[m]:it,[p]:Sc}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[ZC,{[m]:Ci,[p]:[er,49,50,!0],[Re]:jC},{[m]:Ci,[p]:[er,8,12,!0],[Re]:GC},{[m]:Ci,[p]:[er,0,7,!0],[Re]:Fx},{[m]:Ci,[p]:[er,32,49,!0],[Re]:iu},{[m]:Ai,[p]:Sc,[Re]:"regionPartition"},{[m]:v,[p]:[{[x]:Fx},"--op-s3"]}],[f]:E,[g]:[{[y]:vC,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:v,[p]:[jx,"e"]}],[f]:E,[g]:[{[y]:PC,[f]:E,[g]:[Gx,{[y]:Ri,endpoint:{[A]:"https://{Bucket}.ec2.{url#authority}",[k]:wc,[T]:xe},[f]:C}]},{endpoint:{[A]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:wc,[T]:xe},[f]:C}]},{[y]:[{[m]:v,[p]:[jx,"o"]}],[f]:E,[g]:[{[y]:PC,[f]:E,[g]:[Gx,{[y]:Ri,endpoint:{[A]:"https://{Bucket}.op-{outpostId}.{url#authority}",[k]:wc,[T]:xe},[f]:C}]},{endpoint:{[A]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:wc,[T]:xe},[f]:C}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[f]:O}]}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[f]:O}]},{[y]:DC,[f]:E,[g]:[{[y]:[G,{[m]:he,[p]:[{[m]:it,[p]:[{[m]:KC,[p]:Jv}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[f]:O},{[f]:E,[g]:[{[y]:[{[m]:it,[p]:[Kx]},{[m]:_,[p]:[Kx,!0]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:BC,error:"Path-style addressing cannot be used with ARN buckets",[f]:O},Hx]}]},{[y]:[{[m]:Lx,[p]:[er,!1]}],[f]:E,[g]:[{[y]:es,[f]:E,[g]:[{[f]:E,[g]:[{[y]:MC,[f]:E,[g]:[{[f]:E,[g]:[jf,{[f]:E,[g]:[{[y]:[vt,de],error:"Accelerate cannot be used with FIPS",[f]:O},{[f]:E,[g]:[{[y]:[vt,Qv],error:"S3 Accelerate cannot be used in this region",[f]:O},{[f]:E,[g]:[{[y]:[G,ie],error:$f,[f]:O},{[f]:E,[g]:[{[y]:[G,de],error:$f,[f]:O},{[f]:E,[g]:[{[y]:[G,vt],error:$f,[f]:O},{[f]:E,[g]:[Vx,Vx,{[y]:[ie,de,Se,q,Y,Fe],[f]:E,[g]:[{endpoint:Wx,[f]:C}]},{[y]:[ie,de,Se,q,Y,Le],endpoint:Wx,[f]:C},Yx,Yx,{[y]:[ee,de,Se,q,Y,Fe],[f]:E,[g]:[{endpoint:Xx,[f]:C}]},{[y]:[ee,de,Se,q,Y,Le],endpoint:Xx,[f]:C},Qx,Qx,{[y]:[ie,H,vt,q,Y,Fe],[f]:E,[g]:[{endpoint:Zx,[f]:C}]},{[y]:[ie,H,vt,q,Y,Le],endpoint:Zx,[f]:C},Jx,Jx,{[y]:[ie,H,Se,q,Y,Fe],[f]:E,[g]:[{endpoint:eC,[f]:C}]},{[y]:[ie,H,Se,q,Y,Le],endpoint:eC,[f]:C},tC,nC,tC,nC,{[y]:[ee,H,Se,G,ne,rC,Y,Fe],[f]:E,[g]:[{[y]:ho,endpoint:Gf,[f]:C},{endpoint:Gf,[f]:C}]},{[y]:[ee,H,Se,G,ne,sC,Y,Fe],[f]:E,[g]:[{[y]:ho,endpoint:au,[f]:C},oC]},{[y]:[ee,H,Se,G,ne,rC,Y,Le],endpoint:Gf,[f]:C},{[y]:[ee,H,Se,G,ne,sC,Y,Le],endpoint:au,[f]:C},iC,iC,{[y]:[ee,H,vt,q,Y,Fe],[f]:E,[g]:[{[y]:ho,endpoint:Kf,[f]:C},{endpoint:Kf,[f]:C}]},{[y]:[ee,H,vt,q,Y,Le],endpoint:Kf,[f]:C},aC,aC,{[y]:[ee,H,Se,q,Y,Fe],[f]:E,[g]:[{[y]:ho,endpoint:{[A]:VC,[k]:Ue,[T]:xe},[f]:C},{endpoint:cC,[f]:C}]},{[y]:[ee,H,Se,q,Y,Le],endpoint:cC,[f]:C}]}]}]}]}]}]}]}]},xc]}]},Jn]},{[y]:[G,ne,{[m]:v,[p]:[{[m]:ue,[p]:[uu,"scheme"]},"http"]},{[m]:Lx,[p]:[er,!0]},H,ee,Se],[f]:E,[g]:[{[y]:es,[f]:E,[g]:[{[f]:E,[g]:[{[y]:MC,[f]:E,[g]:[oC]},xc]}]},Jn]},{[y]:[{[m]:HC,[p]:Zv,[Re]:WC}],[f]:E,[g]:[{[y]:[{[m]:ue,[p]:[et,"resourceId[0]"],[Re]:YC},{[m]:he,[p]:[{[m]:v,[p]:[JC,bc]}]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:v,[p]:[Hf,lu]}],[f]:E,[g]:[{[y]:Jf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:FC,[f]:E,[g]:[{[f]:E,[g]:[dC,{[f]:E,[g]:[lC,{[f]:E,[g]:[{[y]:tu,[f]:E,[g]:[{[f]:E,[g]:[fC,{[f]:E,[g]:[{[y]:UC,[f]:E,[g]:[{[f]:E,[g]:[Vf,{[f]:E,[g]:[{[y]:ru,[f]:E,[g]:[{[f]:E,[g]:[{[y]:es,[f]:E,[g]:[{[f]:E,[g]:[{[y]:zC,[f]:E,[g]:[{[f]:E,[g]:[{[y]:nu,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:v,[p]:[eS,bc]}],error:"Invalid ARN: Missing account id",[f]:O},{[f]:E,[g]:[{[y]:su,[f]:E,[g]:[{[f]:E,[g]:[{[y]:$C,[f]:E,[g]:[{[f]:E,[g]:[uC,{[f]:E,[g]:[{[y]:Ri,endpoint:{[A]:Ux,[k]:Wf,[T]:xe},[f]:C},{[y]:Cc,endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:Wf,[T]:xe},[f]:C},{endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:Wf,[T]:xe},[f]:C}]}]}]},hC]}]},Yf]}]}]},Xf]}]},Qf]}]},Jn]}]},mC]}]}]},pC]}]}]},yC]}]}]}]},gC]}]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[f]:O}]},{[y]:Jf,[f]:E,[g]:[{[y]:FC,[f]:E,[g]:[{[f]:E,[g]:[{[y]:tu,[f]:E,[g]:[{[y]:Jf,[f]:E,[g]:[{[y]:tu,[f]:E,[g]:[{[f]:E,[g]:[fC,{[f]:E,[g]:[{[y]:UC,[f]:E,[g]:[{[f]:E,[g]:[Vf,{[f]:E,[g]:[{[y]:ru,[f]:E,[g]:[{[f]:E,[g]:[{[y]:es,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:v,[p]:[mu,"{partitionResult#name}"]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:nu,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:v,[p]:[Hf,$]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:su,[f]:E,[g]:[{[f]:E,[g]:[{[y]:$C,[f]:E,[g]:[{[f]:E,[g]:[{[y]:eu,error:"Access Points do not support S3 Accelerate",[f]:O},{[f]:E,[g]:[uC,{[f]:E,[g]:[{[y]:eP,error:"DualStack cannot be combined with a Host override (PrivateLink)",[f]:O},{[f]:E,[g]:[{[y]:[de,ie],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:bi,[T]:xe},[f]:C},{[y]:[de,ee],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:bi,[T]:xe},[f]:C},{[y]:[H,ie],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:bi,[T]:xe},[f]:C},{[y]:[H,ee,G,ne],endpoint:{[A]:Ux,[k]:bi,[T]:xe},[f]:C},{[y]:[H,ee],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:bi,[T]:xe},[f]:C}]}]}]}]}]},hC]}]},Yf]}]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[f]:O}]}]},Xf]}]},Qf]}]},Jn]}]},mC]}]}]},pC]}]}]},yC]}]},{[f]:E,[g]:[{[y]:[{[m]:ts,[p]:[hu,!0]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:LC,error:"S3 MRAP does not support dual-stack",[f]:O},{[f]:E,[g]:[{[y]:Cc,error:"S3 MRAP does not support FIPS",[f]:O},{[f]:E,[g]:[{[y]:eu,error:"S3 MRAP does not support S3 Accelerate",[f]:O},{[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[x]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[f]:O},{[f]:E,[g]:[{[y]:[{[m]:Ai,[p]:Sc,[Re]:zx}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:v,[p]:[{[m]:ue,[p]:[{[x]:zx},B]},{[m]:ue,[p]:[et,"partition"]}]}],[f]:E,[g]:[{endpoint:{[A]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[k]:{[F]:[{[L]:!0,name:"sigv4a",[U]:$,signingRegionSet:["*"]}]},[T]:xe},[f]:C}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[f]:O}]}]},{error:"{Region} was not a valid region",[f]:O}]}]}]}]}]}]},{error:"Invalid Access Point Name",[f]:O}]}]}]},gC]},{[y]:[{[m]:v,[p]:[Hf,du]}],[f]:E,[g]:[{[y]:LC,error:"S3 Outposts does not support Dual-stack",[f]:O},{[f]:E,[g]:[{[y]:Cc,error:"S3 Outposts does not support FIPS",[f]:O},{[f]:E,[g]:[{[y]:eu,error:"S3 Outposts does not support S3 Accelerate",[f]:O},{[f]:E,[g]:[{[y]:[{[m]:it,[p]:[{[m]:ue,[p]:[et,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[f]:O},{[f]:E,[g]:[{[y]:[{[m]:ue,[p]:tP,[Re]:iu}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:vC,[f]:E,[g]:[{[f]:E,[g]:[Vf,{[f]:E,[g]:[{[y]:ru,[f]:E,[g]:[{[f]:E,[g]:[{[y]:es,[f]:E,[g]:[{[f]:E,[g]:[{[y]:zC,[f]:E,[g]:[{[f]:E,[g]:[{[y]:nu,[f]:E,[g]:[{[f]:E,[g]:[{[y]:su,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:ue,[p]:rP,[Re]:$x}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:ue,[p]:[et,"resourceId[3]"],[Re]:fu}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:v,[p]:[{[x]:$x},XC]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:Ri,endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[k]:EC,[T]:xe},[f]:C},{endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:EC,[T]:xe},[f]:C}]}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[f]:O}]}]},{error:"Invalid ARN: expected an access point name",[f]:O}]}]},{error:"Invalid ARN: Expected a 4-component resource",[f]:O}]}]},Yf]}]},Xf]}]},Qf]}]},Jn]}]},{error:"Could not load partition for ARN region {bucketArn#region}",[f]:O}]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[f]:O}]}]},{error:"Invalid ARN: The Outpost Id was not set",[f]:O}]}]}]}]}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[f]:O}]}]},{error:"Invalid ARN: No ARN type specified",[f]:O}]},{[y]:[{[m]:Ci,[p]:[er,0,4,!1],[Re]:qx},{[m]:v,[p]:[{[x]:qx},"arn:"]},{[m]:he,[p]:[{[m]:it,[p]:BC}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[f]:O},Hx]}]},{[y]:[{[m]:it,[p]:[wC]},{[m]:_,[p]:[wC,!0]}],[f]:E,[g]:[{[y]:es,[f]:E,[g]:[{[f]:E,[g]:[{[y]:qC,[f]:E,[g]:[{[f]:E,[g]:[dC,{[f]:E,[g]:[lC,{[f]:E,[g]:[jf,{[f]:E,[g]:[{[y]:Ri,endpoint:{[A]:rs,[k]:Zf,[T]:xe},[f]:C},{[y]:Cc,endpoint:{[A]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Zf,[T]:xe},[f]:C},{endpoint:{[A]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[k]:Zf,[T]:xe},[f]:C}]}]}]}]}]},xc]}]},Jn]},{[y]:[{[m]:he,[p]:DC}],[f]:E,[g]:[{[y]:es,[f]:E,[g]:[{[f]:E,[g]:[{[y]:qC,[f]:E,[g]:[{[f]:E,[g]:[jf,{[f]:E,[g]:[xC,xC,{[y]:[de,ie,G,ne,Y,Fe],[f]:E,[g]:ou},{[y]:[de,ie,G,ne,Y,Le],endpoint:_i,[f]:C},CC,CC,{[y]:[de,ie,q,Y,Fe],[f]:E,[g]:[{endpoint:SC,[f]:C}]},{[y]:[de,ie,q,Y,Le],endpoint:SC,[f]:C},bC,bC,{[y]:[de,ee,G,ne,Y,Fe],[f]:E,[g]:ou},{[y]:[de,ee,G,ne,Y,Le],endpoint:_i,[f]:C},_C,_C,{[y]:[de,ee,q,Y,Fe],[f]:E,[g]:[{endpoint:RC,[f]:C}]},{[y]:[de,ee,q,Y,Le],endpoint:RC,[f]:C},AC,AC,{[y]:[H,ie,G,ne,Y,Fe],[f]:E,[g]:ou},{[y]:[H,ie,G,ne,Y,Le],endpoint:_i,[f]:C},kC,kC,{[y]:[H,ie,q,Y,Fe],[f]:E,[g]:[{endpoint:TC,[f]:C}]},{[y]:[H,ie,q,Y,Le],endpoint:TC,[f]:C},NC,NC,{[y]:[H,ee,G,ne,Y,Fe],[f]:E,[g]:[{[y]:ho,endpoint:_i,[f]:C},tS]},{[y]:[H,ee,G,ne,Y,Le],endpoint:_i,[f]:C},OC,OC,{[y]:[H,ee,q,Y,Fe],[f]:E,[g]:[{[y]:ho,endpoint:{[A]:QC,[k]:Ue,[T]:xe},[f]:C},{endpoint:IC,[f]:C}]},{[y]:[H,ee,q,Y,Le],endpoint:IC,[f]:C}]}]}]},xc]}]},Jn]}]}]},{error:"A region must be set when sending requests to S3.",[f]:O}]}]},rS=nP;var nS=(t,e={})=>mn(rS,{endpointParams:t,logger:e.logger});var sS=t=>({apiVersion:"2006-03-01",base64Decoder:(t==null?void 0:t.base64Decoder)??xn,base64Encoder:(t==null?void 0:t.base64Encoder)??Cn,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??nS,logger:(t==null?void 0:t.logger)??new Ft,serviceId:(t==null?void 0:t.serviceId)??"S3",signerConstructor:(t==null?void 0:t.signerConstructor)??gc,signingEscapePath:(t==null?void 0:t.signingEscapePath)??!1,urlParser:(t==null?void 0:t.urlParser)??We,useArnRegion:(t==null?void 0:t.useArnRegion)??!1,utf8Decoder:(t==null?void 0:t.utf8Decoder)??qt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Qr});var oS=t=>{Hr(process.version);let e=Sn(t),r=()=>e().then(Kr),n=sS(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??En,credentialDefaultProvider:(t==null?void 0:t.credentialDefaultProvider)??xx(hc),defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??wn({serviceId:n.serviceId,clientVersion:Hg.version}),eventStreamSerdeProvider:(t==null?void 0:t.eventStreamSerdeProvider)??Ix,getAwsChunkedEncodingStream:(t==null?void 0:t.getAwsChunkedEncodingStream)??Dx,maxAttempts:(t==null?void 0:t.maxAttempts)??W(an),md5:(t==null?void 0:t.md5)??Ct.bind(null,"md5"),region:(t==null?void 0:t.region)??W(Gt,en),requestHandler:(t==null?void 0:t.requestHandler)??new Wt(r),retryMode:(t==null?void 0:t.retryMode)??W({...dn,default:async()=>(await r()).retryMode||Ht}),sdkStreamMixin:(t==null?void 0:t.sdkStreamMixin)??Mx,sha1:(t==null?void 0:t.sha1)??Ct.bind(null,"sha1"),sha256:(t==null?void 0:t.sha256)??Ct.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??Yt,streamHasher:(t==null?void 0:t.streamHasher)??vx,useArnRegion:(t==null?void 0:t.useArnRegion)??W(Px),useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??W(Zr),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??W(Jr)}};var _c=class extends Lt{constructor(e){let r=oS(e),n=Kg(r),s=tn(n),o=Vr(s),i=cn(o),a=i,d=La(a),c=oy(d),l=un(c),u=$y(l);super(u),this.config=u,this.middlewareStack.use(ln(this.config)),this.middlewareStack.use(rn(this.config)),this.middlewareStack.use(nn(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(on(this.config)),this.middlewareStack.use(za(this.config)),this.middlewareStack.use(iy(this.config)),this.middlewareStack.use(jy(this.config)),this.middlewareStack.use(pn(this.config))}destroy(){super.destroy()}};var y_=Fr(m_(),1);function p_(t,e){return new Promise((r,n)=>{t.on("error",n),e.on("error",n),e.on("close",r),t.pipe(e)})}try{let t=(0,ft.getInput)("bucket",{required:!0}),e=(0,ft.getInput)("name",{required:!0}),r=(0,ft.getInput)("prefix");(0,ft.info)("Downloading...");let n=KB(()=>(0,ft.info)("Still downloading..."),1e4),o=await new _c({}).send(new Os({Bucket:t,Key:GB.join(r,e)}));if((0,ft.debug)(`getObjectResponse: ${JSON.stringify(o,null,2)}`),o.Body!==void 0){let i=(0,y_.extract)({cwd:process.cwd()});await p_(o.Body,i)}HB(n),(0,ft.info)("Download complete.")}catch(t){(0,ft.info)("Download failed."),t instanceof Error&&(0,ft.setFailed)(t)}
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
