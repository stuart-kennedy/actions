import { createRequire } from "module";const require = createRequire(import.meta.url);
var Pu=Object.create;var Ho=Object.defineProperty;var Ou=Object.getOwnPropertyDescriptor;var Nu=Object.getOwnPropertyNames;var Du=Object.getPrototypeOf,Mu=Object.prototype.hasOwnProperty;var k=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,s)=>(typeof require<"u"?require:t)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Y=(e,t)=>()=>(e&&(t=e(e=0)),t);var N=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),cr=(e,t)=>{for(var s in t)Ho(e,s,{get:t[s],enumerable:!0})},si=(e,t,s,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Nu(t))!Mu.call(e,n)&&n!==s&&Ho(e,n,{get:()=>t[n],enumerable:!(o=Ou(t,n))||o.enumerable});return e};var oi=(e,t,s)=>(s=e!=null?Pu(Du(e)):{},si(t||!e||!e.__esModule?Ho(s,"default",{value:e,enumerable:!0}):s,e)),zu=e=>si(Ho({},"__esModule",{value:!0}),e);var Jo=N(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.toCommandProperties=Qt.toCommandValue=void 0;function ku(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Qt.toCommandValue=ku;function Lu(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Qt.toCommandProperties=Lu});var ii=N(ce=>{"use strict";var $u=ce&&ce.__createBinding||(Object.create?function(e,t,s,o){o===void 0&&(o=s),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,o){o===void 0&&(o=s),e[o]=t[s]}),Fu=ce&&ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Uu=ce&&ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&$u(t,e,s);return Fu(t,e),t};Object.defineProperty(ce,"__esModule",{value:!0});ce.issue=ce.issueCommand=void 0;var Bu=Uu(k("os")),ri=Jo();function ai(e,t,s){let o=new dr(e,t,s);process.stdout.write(o.toString()+Bu.EOL)}ce.issueCommand=ai;function Gu(e,t=""){ai(e,{},t)}ce.issue=Gu;var ni="::",dr=class{constructor(t,s,o){t||(t="missing.command"),this.command=t,this.properties=s,this.message=o}toString(){let t=ni+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let s=!0;for(let o in this.properties)if(this.properties.hasOwnProperty(o)){let n=this.properties[o];n&&(s?s=!1:t+=",",t+=`${o}=${qu(n)}`)}}return t+=`${ni}${Vu(this.message)}`,t}};function Vu(e){return ri.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function qu(e){return ri.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});import Wu from"crypto";function xo(){return Ko>Yo.length-16&&(Wu.randomFillSync(Yo),Ko=0),Yo.slice(Ko,Ko+=16)}var Yo,Ko,lr=Y(()=>{Yo=new Uint8Array(256),Ko=Yo.length});var ci,di=Y(()=>{ci=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function ju(e){return typeof e=="string"&&ci.test(e)}var Tt,bo=Y(()=>{di();Tt=ju});function Hu(e,t=0){let s=(G[e[t+0]]+G[e[t+1]]+G[e[t+2]]+G[e[t+3]]+"-"+G[e[t+4]]+G[e[t+5]]+"-"+G[e[t+6]]+G[e[t+7]]+"-"+G[e[t+8]]+G[e[t+9]]+"-"+G[e[t+10]]+G[e[t+11]]+G[e[t+12]]+G[e[t+13]]+G[e[t+14]]+G[e[t+15]]).toLowerCase();if(!Tt(s))throw TypeError("Stringified UUID is invalid");return s}var G,Rt,Io=Y(()=>{bo();G=[];for(let e=0;e<256;++e)G.push((e+256).toString(16).substr(1));Rt=Hu});function Ju(e,t,s){let o=t&&s||0,n=t||new Array(16);e=e||{};let r=e.node||li,a=e.clockseq!==void 0?e.clockseq:mr;if(r==null||a==null){let p=e.random||(e.rng||xo)();r==null&&(r=li=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),a==null&&(a=mr=(p[6]<<8|p[7])&16383)}let i=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:ur+1,d=i-pr+(c-ur)/1e4;if(d<0&&e.clockseq===void 0&&(a=a+1&16383),(d<0||i>pr)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");pr=i,ur=c,mr=a,i+=122192928e5;let l=((i&268435455)*1e4+c)%4294967296;n[o++]=l>>>24&255,n[o++]=l>>>16&255,n[o++]=l>>>8&255,n[o++]=l&255;let m=i/4294967296*1e4&268435455;n[o++]=m>>>8&255,n[o++]=m&255,n[o++]=m>>>24&15|16,n[o++]=m>>>16&255,n[o++]=a>>>8|128,n[o++]=a&255;for(let p=0;p<6;++p)n[o+p]=r[p];return t||Rt(n)}var li,mr,pr,ur,mi,pi=Y(()=>{lr();Io();pr=0,ur=0;mi=Ju});function Ku(e){if(!Tt(e))throw TypeError("Invalid UUID");let t,s=new Uint8Array(16);return s[0]=(t=parseInt(e.slice(0,8),16))>>>24,s[1]=t>>>16&255,s[2]=t>>>8&255,s[3]=t&255,s[4]=(t=parseInt(e.slice(9,13),16))>>>8,s[5]=t&255,s[6]=(t=parseInt(e.slice(14,18),16))>>>8,s[7]=t&255,s[8]=(t=parseInt(e.slice(19,23),16))>>>8,s[9]=t&255,s[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,s[11]=t/4294967296&255,s[12]=t>>>24&255,s[13]=t>>>16&255,s[14]=t>>>8&255,s[15]=t&255,s}var Qo,fr=Y(()=>{bo();Qo=Ku});function Yu(e){e=unescape(encodeURIComponent(e));let t=[];for(let s=0;s<e.length;++s)t.push(e.charCodeAt(s));return t}function Xo(e,t,s){function o(n,r,a,i){if(typeof n=="string"&&(n=Yu(n)),typeof r=="string"&&(r=Qo(r)),r.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(r),c.set(n,r.length),c=s(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,a){i=i||0;for(let d=0;d<16;++d)a[i+d]=c[d];return a}return Rt(c)}try{o.name=e}catch{}return o.DNS=Qu,o.URL=Xu,o}var Qu,Xu,yr=Y(()=>{Io();fr();Qu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Xu="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import Zu from"crypto";function ef(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Zu.createHash("md5").update(e).digest()}var ui,fi=Y(()=>{ui=ef});var tf,yi,hi=Y(()=>{yr();fi();tf=Xo("v3",48,ui),yi=tf});function sf(e,t,s){e=e||{};let o=e.random||(e.rng||xo)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){s=s||0;for(let n=0;n<16;++n)t[s+n]=o[n];return t}return Rt(o)}var Zo,wi=Y(()=>{lr();Io();Zo=sf});import of from"crypto";function nf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),of.createHash("sha1").update(e).digest()}var Ei,gi=Y(()=>{Ei=nf});var rf,xi,bi=Y(()=>{yr();gi();rf=Xo("v5",80,Ei),xi=rf});var Ii,Si=Y(()=>{Ii="00000000-0000-0000-0000-000000000000"});function af(e){if(!Tt(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Ci,vi=Y(()=>{bo();Ci=af});var _i={};cr(_i,{NIL:()=>Ii,parse:()=>Qo,stringify:()=>Rt,v1:()=>mi,v3:()=>yi,v4:()=>Zo,v5:()=>xi,validate:()=>Tt,version:()=>Ci});var hr=Y(()=>{pi();hi();wi();bi();Si();vi();bo();Io();fr()});var Pi=N(de=>{"use strict";var cf=de&&de.__createBinding||(Object.create?function(e,t,s,o){o===void 0&&(o=s),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,o){o===void 0&&(o=s),e[o]=t[s]}),df=de&&de.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ri=de&&de.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&cf(t,e,s);return df(t,e),t};Object.defineProperty(de,"__esModule",{value:!0});de.prepareKeyValueMessage=de.issueFileCommand=void 0;var Ti=Ri(k("fs")),wr=Ri(k("os")),lf=(hr(),zu(_i)),Ai=Jo();function mf(e,t){let s=process.env[`GITHUB_${e}`];if(!s)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Ti.existsSync(s))throw new Error(`Missing file at path: ${s}`);Ti.appendFileSync(s,`${Ai.toCommandValue(t)}${wr.EOL}`,{encoding:"utf8"})}de.issueFileCommand=mf;function pf(e,t){let s=`ghadelimiter_${lf.v4()}`,o=Ai.toCommandValue(t);if(e.includes(s))throw new Error(`Unexpected input: name should not contain the delimiter "${s}"`);if(o.includes(s))throw new Error(`Unexpected input: value should not contain the delimiter "${s}"`);return`${e}<<${s}${wr.EOL}${o}${wr.EOL}${s}`}de.prepareKeyValueMessage=pf});var Ni=N(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.checkBypass=Xt.getProxyUrl=void 0;function uf(e){let t=e.protocol==="https:";if(Oi(e))return;let s=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(s)return new URL(s)}Xt.getProxyUrl=uf;function Oi(e){if(!e.hostname)return!1;let t=e.hostname;if(ff(t))return!0;let s=process.env.no_proxy||process.env.NO_PROXY||"";if(!s)return!1;let o;e.port?o=Number(e.port):e.protocol==="http:"?o=80:e.protocol==="https:"&&(o=443);let n=[e.hostname.toUpperCase()];typeof o=="number"&&n.push(`${n[0]}:${o}`);for(let r of s.split(",").map(a=>a.trim().toUpperCase()).filter(a=>a))if(r==="*"||n.some(a=>a===r||a.endsWith(`.${r}`)||r.startsWith(".")&&a.endsWith(`${r}`)))return!0;return!1}Xt.checkBypass=Oi;function ff(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var ki=N(Zt=>{"use strict";var Vb=k("net"),yf=k("tls"),Er=k("http"),Di=k("https"),hf=k("events"),qb=k("assert"),wf=k("util");Zt.httpOverHttp=Ef;Zt.httpsOverHttp=gf;Zt.httpOverHttps=xf;Zt.httpsOverHttps=bf;function Ef(e){var t=new ht(e);return t.request=Er.request,t}function gf(e){var t=new ht(e);return t.request=Er.request,t.createSocket=Mi,t.defaultPort=443,t}function xf(e){var t=new ht(e);return t.request=Di.request,t}function bf(e){var t=new ht(e);return t.request=Di.request,t.createSocket=Mi,t.defaultPort=443,t}function ht(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Er.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(o,n,r,a){for(var i=zi(n,r,a),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===i.host&&l.port===i.port){t.requests.splice(c,1),l.request.onSocket(o);return}}o.destroy(),t.removeSocket(o)})}wf.inherits(ht,hf.EventEmitter);ht.prototype.addRequest=function(t,s,o,n){var r=this,a=gr({request:t},r.options,zi(s,o,n));if(r.sockets.length>=this.maxSockets){r.requests.push(a);return}r.createSocket(a,function(i){i.on("free",c),i.on("close",d),i.on("agentRemove",d),t.onSocket(i);function c(){r.emit("free",i,a)}function d(l){r.removeSocket(i),i.removeListener("free",c),i.removeListener("close",d),i.removeListener("agentRemove",d)}})};ht.prototype.createSocket=function(t,s){var o=this,n={};o.sockets.push(n);var r=gr({},o.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(r.localAddress=t.localAddress),r.proxyAuth&&(r.headers=r.headers||{},r.headers["Proxy-Authorization"]="Basic "+new Buffer(r.proxyAuth).toString("base64")),At("making CONNECT request");var a=o.request(r);a.useChunkedEncodingByDefault=!1,a.once("response",i),a.once("upgrade",c),a.once("connect",d),a.once("error",l),a.end();function i(m){m.upgrade=!0}function c(m,p,u){process.nextTick(function(){d(m,p,u)})}function d(m,p,u){if(a.removeAllListeners(),p.removeAllListeners(),m.statusCode!==200){At("tunneling socket could not be established, statusCode=%d",m.statusCode),p.destroy();var f=new Error("tunneling socket could not be established, statusCode="+m.statusCode);f.code="ECONNRESET",t.request.emit("error",f),o.removeSocket(n);return}if(u.length>0){At("got illegal response body from proxy"),p.destroy();var f=new Error("got illegal response body from proxy");f.code="ECONNRESET",t.request.emit("error",f),o.removeSocket(n);return}return At("tunneling connection has established"),o.sockets[o.sockets.indexOf(n)]=p,s(p)}function l(m){a.removeAllListeners(),At(`tunneling socket could not be established, cause=%s
`,m.message,m.stack);var p=new Error("tunneling socket could not be established, cause="+m.message);p.code="ECONNRESET",t.request.emit("error",p),o.removeSocket(n)}};ht.prototype.removeSocket=function(t){var s=this.sockets.indexOf(t);if(s!==-1){this.sockets.splice(s,1);var o=this.requests.shift();o&&this.createSocket(o,function(n){o.request.onSocket(n)})}};function Mi(e,t){var s=this;ht.prototype.createSocket.call(s,e,function(o){var n=e.request.getHeader("host"),r=gr({},s.options,{socket:o,servername:n?n.replace(/:.*$/,""):e.host}),a=yf.connect(0,r);s.sockets[s.sockets.indexOf(o)]=a,t(a)})}function zi(e,t,s){return typeof e=="string"?{host:e,port:t,localAddress:s}:e}function gr(e){for(var t=1,s=arguments.length;t<s;++t){var o=arguments[t];if(typeof o=="object")for(var n=Object.keys(o),r=0,a=n.length;r<a;++r){var i=n[r];o[i]!==void 0&&(e[i]=o[i])}}return e}var At;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?At=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:At=function(){};Zt.debug=At});var $i=N((jb,Li)=>{Li.exports=ki()});var Ui=N(T=>{"use strict";var If=T&&T.__createBinding||(Object.create?function(e,t,s,o){o===void 0&&(o=s),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,o){o===void 0&&(o=s),e[o]=t[s]}),Sf=T&&T.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),nn=T&&T.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&If(t,e,s);return Sf(t,e),t},F=T&&T.__awaiter||function(e,t,s,o){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function i(l){try{d(o.next(l))}catch(m){a(m)}}function c(l){try{d(o.throw(l))}catch(m){a(m)}}function d(l){l.done?r(l.value):n(l.value).then(i,c)}d((o=o.apply(e,t||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.HttpClient=T.isHttps=T.HttpClientResponse=T.HttpClientError=T.getProxyUrl=T.MediaTypes=T.Headers=T.HttpCodes=void 0;var en=nn(k("http")),xr=nn(k("https")),Fi=nn(Ni()),tn=nn($i()),Ce;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Ce=T.HttpCodes||(T.HttpCodes={}));var Q;(function(e){e.Accept="accept",e.ContentType="content-type"})(Q=T.Headers||(T.Headers={}));var Pt;(function(e){e.ApplicationJson="application/json"})(Pt=T.MediaTypes||(T.MediaTypes={}));function Cf(e){let t=Fi.getProxyUrl(new URL(e));return t?t.href:""}T.getProxyUrl=Cf;var vf=[Ce.MovedPermanently,Ce.ResourceMoved,Ce.SeeOther,Ce.TemporaryRedirect,Ce.PermanentRedirect],_f=[Ce.BadGateway,Ce.ServiceUnavailable,Ce.GatewayTimeout],Tf=["OPTIONS","GET","DELETE","HEAD"],Rf=10,Af=5,es=class extends Error{constructor(t,s){super(t),this.name="HttpClientError",this.statusCode=s,Object.setPrototypeOf(this,es.prototype)}};T.HttpClientError=es;var on=class{constructor(t){this.message=t}readBody(){return F(this,void 0,void 0,function*(){return new Promise(t=>F(this,void 0,void 0,function*(){let s=Buffer.alloc(0);this.message.on("data",o=>{s=Buffer.concat([s,o])}),this.message.on("end",()=>{t(s.toString())})}))})}};T.HttpClientResponse=on;function Pf(e){return new URL(e).protocol==="https:"}T.isHttps=Pf;var br=class{constructor(t,s,o){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=s||[],this.requestOptions=o,o&&(o.ignoreSslError!=null&&(this._ignoreSslError=o.ignoreSslError),this._socketTimeout=o.socketTimeout,o.allowRedirects!=null&&(this._allowRedirects=o.allowRedirects),o.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=o.allowRedirectDowngrade),o.maxRedirects!=null&&(this._maxRedirects=Math.max(o.maxRedirects,0)),o.keepAlive!=null&&(this._keepAlive=o.keepAlive),o.allowRetries!=null&&(this._allowRetries=o.allowRetries),o.maxRetries!=null&&(this._maxRetries=o.maxRetries))}options(t,s){return F(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,s||{})})}get(t,s){return F(this,void 0,void 0,function*(){return this.request("GET",t,null,s||{})})}del(t,s){return F(this,void 0,void 0,function*(){return this.request("DELETE",t,null,s||{})})}post(t,s,o){return F(this,void 0,void 0,function*(){return this.request("POST",t,s,o||{})})}patch(t,s,o){return F(this,void 0,void 0,function*(){return this.request("PATCH",t,s,o||{})})}put(t,s,o){return F(this,void 0,void 0,function*(){return this.request("PUT",t,s,o||{})})}head(t,s){return F(this,void 0,void 0,function*(){return this.request("HEAD",t,null,s||{})})}sendStream(t,s,o,n){return F(this,void 0,void 0,function*(){return this.request(t,s,o,n)})}getJson(t,s={}){return F(this,void 0,void 0,function*(){s[Q.Accept]=this._getExistingOrDefaultHeader(s,Q.Accept,Pt.ApplicationJson);let o=yield this.get(t,s);return this._processResponse(o,this.requestOptions)})}postJson(t,s,o={}){return F(this,void 0,void 0,function*(){let n=JSON.stringify(s,null,2);o[Q.Accept]=this._getExistingOrDefaultHeader(o,Q.Accept,Pt.ApplicationJson),o[Q.ContentType]=this._getExistingOrDefaultHeader(o,Q.ContentType,Pt.ApplicationJson);let r=yield this.post(t,n,o);return this._processResponse(r,this.requestOptions)})}putJson(t,s,o={}){return F(this,void 0,void 0,function*(){let n=JSON.stringify(s,null,2);o[Q.Accept]=this._getExistingOrDefaultHeader(o,Q.Accept,Pt.ApplicationJson),o[Q.ContentType]=this._getExistingOrDefaultHeader(o,Q.ContentType,Pt.ApplicationJson);let r=yield this.put(t,n,o);return this._processResponse(r,this.requestOptions)})}patchJson(t,s,o={}){return F(this,void 0,void 0,function*(){let n=JSON.stringify(s,null,2);o[Q.Accept]=this._getExistingOrDefaultHeader(o,Q.Accept,Pt.ApplicationJson),o[Q.ContentType]=this._getExistingOrDefaultHeader(o,Q.ContentType,Pt.ApplicationJson);let r=yield this.patch(t,n,o);return this._processResponse(r,this.requestOptions)})}request(t,s,o,n){return F(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let r=new URL(s),a=this._prepareRequest(t,r,n),i=this._allowRetries&&Tf.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(a,o),d&&d.message&&d.message.statusCode===Ce.Unauthorized){let m;for(let p of this.handlers)if(p.canHandleAuthentication(d)){m=p;break}return m?m.handleAuthentication(this,a,o):d}let l=this._maxRedirects;for(;d.message.statusCode&&vf.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let m=d.message.headers.location;if(!m)break;let p=new URL(m);if(r.protocol==="https:"&&r.protocol!==p.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),p.hostname!==r.hostname)for(let u in n)u.toLowerCase()==="authorization"&&delete n[u];a=this._prepareRequest(t,p,n),d=yield this.requestRaw(a,o),l--}if(!d.message.statusCode||!_f.includes(d.message.statusCode))return d;c+=1,c<i&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<i);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,s){return F(this,void 0,void 0,function*(){return new Promise((o,n)=>{function r(a,i){a?n(a):i?o(i):n(new Error("Unknown error"))}this.requestRawWithCallback(t,s,r)})})}requestRawWithCallback(t,s,o){typeof s=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(s,"utf8"));let n=!1;function r(c,d){n||(n=!0,o(c,d))}let a=t.httpModule.request(t.options,c=>{let d=new on(c);r(void 0,d)}),i;a.on("socket",c=>{i=c}),a.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),r(new Error(`Request timeout: ${t.options.path}`))}),a.on("error",function(c){r(c)}),s&&typeof s=="string"&&a.write(s,"utf8"),s&&typeof s!="string"?(s.on("close",function(){a.end()}),s.pipe(a)):a.end()}getAgent(t){let s=new URL(t);return this._getAgent(s)}_prepareRequest(t,s,o){let n={};n.parsedUrl=s;let r=n.parsedUrl.protocol==="https:";n.httpModule=r?xr:en;let a=r?443:80;if(n.options={},n.options.host=n.parsedUrl.hostname,n.options.port=n.parsedUrl.port?parseInt(n.parsedUrl.port):a,n.options.path=(n.parsedUrl.pathname||"")+(n.parsedUrl.search||""),n.options.method=t,n.options.headers=this._mergeHeaders(o),this.userAgent!=null&&(n.options.headers["user-agent"]=this.userAgent),n.options.agent=this._getAgent(n.parsedUrl),this.handlers)for(let i of this.handlers)i.prepareRequest(n.options);return n}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},sn(this.requestOptions.headers),sn(t||{})):sn(t||{})}_getExistingOrDefaultHeader(t,s,o){let n;return this.requestOptions&&this.requestOptions.headers&&(n=sn(this.requestOptions.headers)[s]),t[s]||n||o}_getAgent(t){let s,o=Fi.getProxyUrl(t),n=o&&o.hostname;if(this._keepAlive&&n&&(s=this._proxyAgent),this._keepAlive&&!n&&(s=this._agent),s)return s;let r=t.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||en.globalAgent.maxSockets),o&&o.hostname){let i={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(o.username||o.password)&&{proxyAuth:`${o.username}:${o.password}`}),{host:o.hostname,port:o.port})},c,d=o.protocol==="https:";r?c=d?tn.httpsOverHttps:tn.httpsOverHttp:c=d?tn.httpOverHttps:tn.httpOverHttp,s=c(i),this._proxyAgent=s}if(this._keepAlive&&!s){let i={keepAlive:this._keepAlive,maxSockets:a};s=r?new xr.Agent(i):new en.Agent(i),this._agent=s}return s||(s=r?xr.globalAgent:en.globalAgent),r&&this._ignoreSslError&&(s.options=Object.assign(s.options||{},{rejectUnauthorized:!1})),s}_performExponentialBackoff(t){return F(this,void 0,void 0,function*(){t=Math.min(Rf,t);let s=Af*Math.pow(2,t);return new Promise(o=>setTimeout(()=>o(),s))})}_processResponse(t,s){return F(this,void 0,void 0,function*(){return new Promise((o,n)=>F(this,void 0,void 0,function*(){let r=t.message.statusCode||0,a={statusCode:r,result:null,headers:{}};r===Ce.NotFound&&o(a);function i(l,m){if(typeof m=="string"){let p=new Date(m);if(!isNaN(p.valueOf()))return p}return m}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(s&&s.deserializeDates?c=JSON.parse(d,i):c=JSON.parse(d),a.result=c),a.headers=t.message.headers}catch{}if(r>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${r})`;let m=new es(l,r);m.result=a.result,n(m)}else o(a)}))})}};T.HttpClient=br;var sn=e=>Object.keys(e).reduce((t,s)=>(t[s.toLowerCase()]=e[s],t),{})});var Bi=N(Ae=>{"use strict";var vr=Ae&&Ae.__awaiter||function(e,t,s,o){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function i(l){try{d(o.next(l))}catch(m){a(m)}}function c(l){try{d(o.throw(l))}catch(m){a(m)}}function d(l){l.done?r(l.value):n(l.value).then(i,c)}d((o=o.apply(e,t||[])).next())})};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.PersonalAccessTokenCredentialHandler=Ae.BearerCredentialHandler=Ae.BasicCredentialHandler=void 0;var Ir=class{constructor(t,s){this.username=t,this.password=s}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return vr(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ae.BasicCredentialHandler=Ir;var Sr=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return vr(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ae.BearerCredentialHandler=Sr;var Cr=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return vr(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ae.PersonalAccessTokenCredentialHandler=Cr});var qi=N(ts=>{"use strict";var Gi=ts&&ts.__awaiter||function(e,t,s,o){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function i(l){try{d(o.next(l))}catch(m){a(m)}}function c(l){try{d(o.throw(l))}catch(m){a(m)}}function d(l){l.done?r(l.value):n(l.value).then(i,c)}d((o=o.apply(e,t||[])).next())})};Object.defineProperty(ts,"__esModule",{value:!0});ts.OidcClient=void 0;var Of=Ui(),Nf=Bi(),Vi=_r(),Ot=class{static createHttpClient(t=!0,s=10){let o={allowRetries:t,maxRetries:s};return new Of.HttpClient("actions/oidc-client",[new Nf.BearerCredentialHandler(Ot.getRequestToken())],o)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var s;return Gi(this,void 0,void 0,function*(){let r=(s=(yield Ot.createHttpClient().getJson(t).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.result.message}`)})).result)===null||s===void 0?void 0:s.value;if(!r)throw new Error("Response json body do not have ID Token field");return r})}static getIDToken(t){return Gi(this,void 0,void 0,function*(){try{let s=Ot.getIDTokenUrl();if(t){let n=encodeURIComponent(t);s=`${s}&audience=${n}`}Vi.debug(`ID token url is ${s}`);let o=yield Ot.getCall(s);return Vi.setSecret(o),o}catch(s){throw new Error(`Error message: ${s.message}`)}})}};ts.OidcClient=Ot});var Pr=N(ee=>{"use strict";var Tr=ee&&ee.__awaiter||function(e,t,s,o){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function i(l){try{d(o.next(l))}catch(m){a(m)}}function c(l){try{d(o.throw(l))}catch(m){a(m)}}function d(l){l.done?r(l.value):n(l.value).then(i,c)}d((o=o.apply(e,t||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0});ee.summary=ee.markdownSummary=ee.SUMMARY_DOCS_URL=ee.SUMMARY_ENV_VAR=void 0;var Df=k("os"),Rr=k("fs"),{access:Mf,appendFile:zf,writeFile:kf}=Rr.promises;ee.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";ee.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Ar=class{constructor(){this._buffer=""}filePath(){return Tr(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[ee.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${ee.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Mf(t,Rr.constants.R_OK|Rr.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,s,o={}){let n=Object.entries(o).map(([r,a])=>` ${r}="${a}"`).join("");return s?`<${t}${n}>${s}</${t}>`:`<${t}${n}>`}write(t){return Tr(this,void 0,void 0,function*(){let s=!!(t!=null&&t.overwrite),o=yield this.filePath();return yield(s?kf:zf)(o,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Tr(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,s=!1){return this._buffer+=t,s?this.addEOL():this}addEOL(){return this.addRaw(Df.EOL)}addCodeBlock(t,s){let o=Object.assign({},s&&{lang:s}),n=this.wrap("pre",this.wrap("code",t),o);return this.addRaw(n).addEOL()}addList(t,s=!1){let o=s?"ol":"ul",n=t.map(a=>this.wrap("li",a)).join(""),r=this.wrap(o,n);return this.addRaw(r).addEOL()}addTable(t){let s=t.map(n=>{let r=n.map(a=>{if(typeof a=="string")return this.wrap("td",a);let{header:i,data:c,colspan:d,rowspan:l}=a,m=i?"th":"td",p=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(m,c,p)}).join("");return this.wrap("tr",r)}).join(""),o=this.wrap("table",s);return this.addRaw(o).addEOL()}addDetails(t,s){let o=this.wrap("details",this.wrap("summary",t)+s);return this.addRaw(o).addEOL()}addImage(t,s,o){let{width:n,height:r}=o||{},a=Object.assign(Object.assign({},n&&{width:n}),r&&{height:r}),i=this.wrap("img",null,Object.assign({src:t,alt:s},a));return this.addRaw(i).addEOL()}addHeading(t,s){let o=`h${s}`,n=["h1","h2","h3","h4","h5","h6"].includes(o)?o:"h1",r=this.wrap(n,t);return this.addRaw(r).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,s){let o=Object.assign({},s&&{cite:s}),n=this.wrap("blockquote",t,o);return this.addRaw(n).addEOL()}addLink(t,s){let o=this.wrap("a",t,{href:s});return this.addRaw(o).addEOL()}},Wi=new Ar;ee.markdownSummary=Wi;ee.summary=Wi});var ji=N(te=>{"use strict";var Lf=te&&te.__createBinding||(Object.create?function(e,t,s,o){o===void 0&&(o=s),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,o){o===void 0&&(o=s),e[o]=t[s]}),$f=te&&te.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ff=te&&te.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&Lf(t,e,s);return $f(t,e),t};Object.defineProperty(te,"__esModule",{value:!0});te.toPlatformPath=te.toWin32Path=te.toPosixPath=void 0;var Uf=Ff(k("path"));function Bf(e){return e.replace(/[\\]/g,"/")}te.toPosixPath=Bf;function Gf(e){return e.replace(/[/]/g,"\\")}te.toWin32Path=Gf;function Vf(e){return e.replace(/[/\\]/g,Uf.sep)}te.toPlatformPath=Vf});var _r=N(w=>{"use strict";var qf=w&&w.__createBinding||(Object.create?function(e,t,s,o){o===void 0&&(o=s),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,o){o===void 0&&(o=s),e[o]=t[s]}),Wf=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Hi=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&qf(t,e,s);return Wf(t,e),t},Ji=w&&w.__awaiter||function(e,t,s,o){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function i(l){try{d(o.next(l))}catch(m){a(m)}}function c(l){try{d(o.throw(l))}catch(m){a(m)}}function d(l){l.done?r(l.value):n(l.value).then(i,c)}d((o=o.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.getIDToken=w.getState=w.saveState=w.group=w.endGroup=w.startGroup=w.info=w.notice=w.warning=w.error=w.debug=w.isDebug=w.setFailed=w.setCommandEcho=w.setOutput=w.getBooleanInput=w.getMultilineInput=w.getInput=w.addPath=w.setSecret=w.exportVariable=w.ExitCode=void 0;var le=ii(),Bt=Pi(),ss=Jo(),Ki=Hi(k("os")),jf=Hi(k("path")),Hf=qi(),Yi;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Yi=w.ExitCode||(w.ExitCode={}));function Jf(e,t){let s=ss.toCommandValue(t);if(process.env[e]=s,process.env.GITHUB_ENV||"")return Bt.issueFileCommand("ENV",Bt.prepareKeyValueMessage(e,t));le.issueCommand("set-env",{name:e},s)}w.exportVariable=Jf;function Kf(e){le.issueCommand("add-mask",{},e)}w.setSecret=Kf;function Yf(e){process.env.GITHUB_PATH||""?Bt.issueFileCommand("PATH",e):le.issueCommand("add-path",{},e),process.env.PATH=`${e}${jf.delimiter}${process.env.PATH}`}w.addPath=Yf;function Or(e,t){let s=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!s)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?s:s.trim()}w.getInput=Or;function Qf(e,t){let s=Or(e,t).split(`
`).filter(o=>o!=="");return t&&t.trimWhitespace===!1?s:s.map(o=>o.trim())}w.getMultilineInput=Qf;function Xf(e,t){let s=["true","True","TRUE"],o=["false","False","FALSE"],n=Or(e,t);if(s.includes(n))return!0;if(o.includes(n))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}w.getBooleanInput=Xf;function Zf(e,t){if(process.env.GITHUB_OUTPUT||"")return Bt.issueFileCommand("OUTPUT",Bt.prepareKeyValueMessage(e,t));process.stdout.write(Ki.EOL),le.issueCommand("set-output",{name:e},ss.toCommandValue(t))}w.setOutput=Zf;function ey(e){le.issue("echo",e?"on":"off")}w.setCommandEcho=ey;function ty(e){process.exitCode=Yi.Failure,Qi(e)}w.setFailed=ty;function sy(){return process.env.RUNNER_DEBUG==="1"}w.isDebug=sy;function oy(e){le.issueCommand("debug",{},e)}w.debug=oy;function Qi(e,t={}){le.issueCommand("error",ss.toCommandProperties(t),e instanceof Error?e.toString():e)}w.error=Qi;function ny(e,t={}){le.issueCommand("warning",ss.toCommandProperties(t),e instanceof Error?e.toString():e)}w.warning=ny;function ry(e,t={}){le.issueCommand("notice",ss.toCommandProperties(t),e instanceof Error?e.toString():e)}w.notice=ry;function ay(e){process.stdout.write(e+Ki.EOL)}w.info=ay;function Xi(e){le.issue("group",e)}w.startGroup=Xi;function Zi(){le.issue("endgroup")}w.endGroup=Zi;function iy(e,t){return Ji(this,void 0,void 0,function*(){Xi(e);let s;try{s=yield t()}finally{Zi()}return s})}w.group=iy;function cy(e,t){if(process.env.GITHUB_STATE||"")return Bt.issueFileCommand("STATE",Bt.prepareKeyValueMessage(e,t));le.issueCommand("save-state",{name:e},ss.toCommandValue(t))}w.saveState=cy;function dy(e){return process.env[`STATE_${e}`]||""}w.getState=dy;function ly(e){return Ji(this,void 0,void 0,function*(){return yield Hf.OidcClient.getIDToken(e)})}w.getIDToken=ly;var my=Pr();Object.defineProperty(w,"summary",{enumerable:!0,get:function(){return my.summary}});var py=Pr();Object.defineProperty(w,"markdownSummary",{enumerable:!0,get:function(){return py.markdownSummary}});var Nr=ji();Object.defineProperty(w,"toPosixPath",{enumerable:!0,get:function(){return Nr.toPosixPath}});Object.defineProperty(w,"toWin32Path",{enumerable:!0,get:function(){return Nr.toWin32Path}});Object.defineProperty(w,"toPlatformPath",{enumerable:!0,get:function(){return Nr.toPlatformPath}})});var ya=N(gt=>{"use strict";var Dd=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",rw=Dd+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Md="["+Dd+"]["+rw+"]*",aw=new RegExp("^"+Md+"$"),iw=function(e,t){let s=[],o=t.exec(e);for(;o;){let n=[];n.startIndex=t.lastIndex-o[0].length;let r=o.length;for(let a=0;a<r;a++)n.push(o[a]);s.push(n),o=t.exec(e)}return s},cw=function(e){let t=aw.exec(e);return!(t===null||typeof t>"u")};gt.isExist=function(e){return typeof e<"u"};gt.isEmptyObject=function(e){return Object.keys(e).length===0};gt.merge=function(e,t,s){if(t){let o=Object.keys(t),n=o.length;for(let r=0;r<n;r++)s==="strict"?e[o[r]]=[t[o[r]]]:e[o[r]]=t[o[r]]}};gt.getValue=function(e){return gt.isExist(e)?e:""};gt.isName=cw;gt.getAllMatches=iw;gt.nameRegexp=Md});var wa=N(Fd=>{"use strict";var ha=ya(),dw={allowBooleanAttributes:!1,unpairedTags:[]};Fd.validate=function(e,t){t=Object.assign({},dw,t);let s=[],o=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let r=0;r<e.length;r++)if(e[r]==="<"&&e[r+1]==="?"){if(r+=2,r=kd(e,r),r.err)return r}else if(e[r]==="<"){let a=r;if(r++,e[r]==="!"){r=Ld(e,r);continue}else{let i=!1;e[r]==="/"&&(i=!0,r++);let c="";for(;r<e.length&&e[r]!==">"&&e[r]!==" "&&e[r]!=="	"&&e[r]!==`
`&&e[r]!=="\r";r++)c+=e[r];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),r--),!ww(c)){let m;return c.trim().length===0?m="Invalid space after '<'.":m="Tag '"+c+"' is an invalid name.",$("InvalidTag",m,re(e,r))}let d=pw(e,r);if(d===!1)return $("InvalidAttr","Attributes for '"+c+"' have open quote.",re(e,r));let l=d.value;if(r=d.index,l[l.length-1]==="/"){let m=r-l.length;l=l.substring(0,l.length-1);let p=$d(l,t);if(p===!0)o=!0;else return $(p.err.code,p.err.msg,re(e,m+p.err.line))}else if(i)if(d.tagClosed){if(l.trim().length>0)return $("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",re(e,a));{let m=s.pop();if(c!==m.tagName){let p=re(e,m.tagStartPos);return $("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",re(e,a))}s.length==0&&(n=!0)}}else return $("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",re(e,r));else{let m=$d(l,t);if(m!==!0)return $(m.err.code,m.err.msg,re(e,r-l.length+m.err.line));if(n===!0)return $("InvalidXml","Multiple possible root nodes found.",re(e,r));t.unpairedTags.indexOf(c)!==-1||s.push({tagName:c,tagStartPos:a}),o=!0}for(r++;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="!"){r++,r=Ld(e,r);continue}else if(e[r+1]==="?"){if(r=kd(e,++r),r.err)return r}else break;else if(e[r]==="&"){let m=yw(e,r);if(m==-1)return $("InvalidChar","char '&' is not expected.",re(e,r));r=m}else if(n===!0&&!zd(e[r]))return $("InvalidXml","Extra text at the end",re(e,r));e[r]==="<"&&r--}}else{if(zd(e[r]))continue;return $("InvalidChar","char '"+e[r]+"' is not expected.",re(e,r))}if(o){if(s.length==1)return $("InvalidTag","Unclosed tag '"+s[0].tagName+"'.",re(e,s[0].tagStartPos));if(s.length>0)return $("InvalidXml","Invalid '"+JSON.stringify(s.map(r=>r.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return $("InvalidXml","Start tag expected.",1);return!0};function zd(e){return e===" "||e==="	"||e===`
`||e==="\r"}function kd(e,t){let s=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let o=e.substr(s,t-s);if(t>5&&o==="xml")return $("InvalidXml","XML declaration allowed only at the start of the document.",re(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Ld(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let s=1;for(t+=8;t<e.length;t++)if(e[t]==="<")s++;else if(e[t]===">"&&(s--,s===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var lw='"',mw="'";function pw(e,t){let s="",o="",n=!1;for(;t<e.length;t++){if(e[t]===lw||e[t]===mw)o===""?o=e[t]:o!==e[t]||(o="");else if(e[t]===">"&&o===""){n=!0;break}s+=e[t]}return o!==""?!1:{value:s,index:t,tagClosed:n}}var uw=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function $d(e,t){let s=ha.getAllMatches(e,uw),o={};for(let n=0;n<s.length;n++){if(s[n][1].length===0)return $("InvalidAttr","Attribute '"+s[n][2]+"' has no space in starting.",Ao(s[n]));if(s[n][3]!==void 0&&s[n][4]===void 0)return $("InvalidAttr","Attribute '"+s[n][2]+"' is without value.",Ao(s[n]));if(s[n][3]===void 0&&!t.allowBooleanAttributes)return $("InvalidAttr","boolean attribute '"+s[n][2]+"' is not allowed.",Ao(s[n]));let r=s[n][2];if(!hw(r))return $("InvalidAttr","Attribute '"+r+"' is an invalid name.",Ao(s[n]));if(!o.hasOwnProperty(r))o[r]=1;else return $("InvalidAttr","Attribute '"+r+"' is repeated.",Ao(s[n]))}return!0}function fw(e,t){let s=/\d/;for(e[t]==="x"&&(t++,s=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(s))break}return-1}function yw(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,fw(e,t);let s=0;for(;t<e.length;t++,s++)if(!(e[t].match(/\w/)&&s<20)){if(e[t]===";")break;return-1}return t}function $(e,t,s){return{err:{code:e,msg:t,line:s.line||s,col:s.col}}}function hw(e){return ha.isName(e)}function ww(e){return ha.isName(e)}function re(e,t){let s=e.substring(0,t).split(/\r?\n/);return{line:s.length,col:s[s.length-1].length+1}}function Ao(e){return e.startIndex+e[1].length}});var Bd=N(Ea=>{var Ud={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},Ew=function(e){return Object.assign({},Ud,e)};Ea.buildOptions=Ew;Ea.defaultOptions=Ud});var Vd=N((LD,Gd)=>{"use strict";var ga=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,s){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:s})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};Gd.exports=ga});var Wd=N(($D,qd)=>{function gw(e,t){let s={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let o=1,n=!1,r=!1,a=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!a){if(n&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,r=!0;else if(n&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(n&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(n&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");o++,i=""}else if(e[t]===">"){if(a?e[t-1]==="-"&&e[t-2]==="-"&&(a=!1,o--):(r&&(bw(i,s),r=!1),o--),o===0)break}else e[t]==="["?n=!0:i+=e[t];if(o!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:s,i:t}}var xw=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function bw(e,t){let s=xw.exec(e);s&&(t[s[1]]={regx:RegExp(`&${s[1]};`,"g"),val:s[3]})}qd.exports=gw});var Hd=N((FD,jd)=>{var Iw=/^[-+]?0x[a-fA-F0-9]+$/,Sw=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var Cw={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function vw(e,t={}){if(t=Object.assign({},Cw,t),!e||typeof e!="string")return e;let s=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(s))return e;if(t.hex&&Iw.test(s))return Number.parseInt(s,16);{let o=Sw.exec(s);if(o){let n=o[1],r=o[2],a=_w(o[3]),i=o[4]||o[6];if(!t.leadingZeros&&r.length>0&&n&&s[2]!==".")return e;if(!t.leadingZeros&&r.length>0&&!n&&s[1]!==".")return e;{let c=Number(s),d=""+c;return d.search(/[eE]/)!==-1||i?t.eNotation?c:e:s.indexOf(".")!==-1?d==="0"&&a===""||d===a||n&&d==="-"+a?c:e:r?a===d||n+a===d?c:e:s===d||s===n+d?c:e}}else return e}}function _w(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}jd.exports=vw});var Kd=N((BD,Jd)=>{"use strict";var Sa=ya(),Po=Vd(),Tw=Wd(),Rw=Hd(),UD="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Sa.nameRegexp),xa=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=Aw,this.parseXml=Mw,this.parseTextData=Pw,this.resolveNameSpace=Ow,this.buildAttributesMap=Dw,this.isItStopNode=Lw,this.replaceEntitiesValue=zw,this.readStopNodeData=Fw,this.saveTextToParentTag=kw}};function Aw(e){let t=Object.keys(e);for(let s=0;s<t.length;s++){let o=t[s];this.lastEntities[o]={regex:new RegExp("&"+o+";","g"),val:e[o]}}}function Pw(e,t,s,o,n,r,a){if(e!==void 0&&(this.options.trimValues&&!o&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let i=this.options.tagValueProcessor(t,e,s,n,r);return i==null?e:typeof i!=typeof e||i!==e?i:this.options.trimValues?Ia(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Ia(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Ow(e){if(this.options.removeNSPrefix){let t=e.split(":"),s=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=s+t[1])}return e}var Nw=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Dw(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let s=Sa.getAllMatches(e,Nw),o=s.length,n={};for(let r=0;r<o;r++){let a=this.resolveNameSpace(s[r][1]),i=s[r][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let d=this.options.attributeValueProcessor(a,i,t);d==null?n[c]=i:typeof d!=typeof i||d!==i?n[c]=d:n[c]=Ia(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[c]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){let r={};return r[this.options.attributesGroupName]=n,r}return n}}var Mw=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Po("!xml"),s=t,o="",n="";for(let r=0;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let i=Wt(e,">",r,"Closing Tag is not closed."),c=e.substring(r+2,i).trim();if(this.options.removeNSPrefix){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),s&&(o=this.saveTextToParentTag(o,s,n)),n=n.substr(0,n.lastIndexOf(".")),s=this.tagsNodeStack.pop(),o="",r=i}else if(e[r+1]==="?"){let i=ba(e,r,!1,"?>");if(!i)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,s,n),!(this.options.ignoreDeclaration&&i.tagName==="?xml"||this.options.ignorePiTags)){let c=new Po(i.tagName);c.add(this.options.textNodeName,""),i.tagName!==i.tagExp&&i.attrExpPresent&&(c[":@"]=this.buildAttributesMap(i.tagExp,n)),s.addChild(c)}r=i.closeIndex+1}else if(e.substr(r+1,3)==="!--"){let i=Wt(e,"-->",r+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(r+4,i-2);o=this.saveTextToParentTag(o,s,n),s.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}r=i}else if(e.substr(r+1,2)==="!D"){let i=Tw(e,r);this.docTypeEntities=i.entities,r=i.i}else if(e.substr(r+1,2)==="!["){let i=Wt(e,"]]>",r,"CDATA is not closed.")-2,c=e.substring(r+9,i);if(o=this.saveTextToParentTag(o,s,n),this.options.cdataPropName)s.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,s.tagname,n,!0,!1,!0);d==null&&(d=""),s.add(this.options.textNodeName,d)}r=i+2}else{let i=ba(e,r,this.options.removeNSPrefix),c=i.tagName,d=i.tagExp,l=i.attrExpPresent,m=i.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),s&&o&&s.tagname!=="!xml"&&(o=this.saveTextToParentTag(o,s,n,!1)),c!==t.tagname&&(n+=n?"."+c:c);let p=s;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(s=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,n,c)){let u="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)r=i.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)r=i.closeIndex;else{let h=this.readStopNodeData(e,c,m+1);if(!h)throw new Error(`Unexpected end of ${c}`);r=h.i,u=h.tagContent}let f=new Po(c);c!==d&&l&&(f[":@"]=this.buildAttributesMap(d,n)),u&&(u=this.parseTextData(u,c,n,!0,l,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),f.add(this.options.textNodeName,u),s.addChild(f)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let u=new Po(c);c!==d&&l&&(u[":@"]=this.buildAttributesMap(d,n)),n=n.substr(0,n.lastIndexOf(".")),s.addChild(u)}else{let u=new Po(c);this.tagsNodeStack.push(s),c!==d&&l&&(u[":@"]=this.buildAttributesMap(d,n)),s.addChild(u),s=u}o="",r=m}}else o+=e[r];return t.child},zw=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let s=this.docTypeEntities[t];e=e.replace(s.regx,s.val)}for(let t in this.lastEntities){let s=this.lastEntities[t];e=e.replace(s.regex,s.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let s=this.htmlEntities[t];e=e.replace(s.regex,s.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function kw(e,t,s,o){return e&&(o===void 0&&(o=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,s,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,o),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Lw(e,t,s){let o="*."+s;for(let n in e){let r=e[n];if(o===r||t===r)return!0}return!1}function $w(e,t,s=">"){let o,n="";for(let r=t;r<e.length;r++){let a=e[r];if(o)a===o&&(o="");else if(a==='"'||a==="'")o=a;else if(a===s[0])if(s[1]){if(e[r+1]===s[1])return{data:n,index:r}}else return{data:n,index:r};else a==="	"&&(a=" ");n+=a}}function Wt(e,t,s,o){let n=e.indexOf(t,s);if(n===-1)throw new Error(o);return n+t.length-1}function ba(e,t,s,o=">"){let n=$w(e,t+1,o);if(!n)return;let r=n.data,a=n.index,i=r.search(/\s/),c=r,d=!0;if(i!==-1&&(c=r.substr(0,i).replace(/\s\s*$/,""),r=r.substr(i+1)),s){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==n.data.substr(l+1))}return{tagName:c,tagExp:r,closeIndex:a,attrExpPresent:d}}function Fw(e,t,s){let o=s,n=1;for(;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let r=Wt(e,">",s,`${t} is not closed`);if(e.substring(s+2,r).trim()===t&&(n--,n===0))return{tagContent:e.substring(o,s),i:r};s=r}else if(e[s+1]==="?")s=Wt(e,"?>",s+1,"StopNode is not closed.");else if(e.substr(s+1,3)==="!--")s=Wt(e,"-->",s+3,"StopNode is not closed.");else if(e.substr(s+1,2)==="![")s=Wt(e,"]]>",s,"StopNode is not closed.")-2;else{let r=ba(e,s,">");r&&((r&&r.tagName)===t&&r.tagExp[r.tagExp.length-1]!=="/"&&n++,s=r.closeIndex)}}function Ia(e,t,s){if(t&&typeof e=="string"){let o=e.trim();return o==="true"?!0:o==="false"?!1:Rw(e,s)}else return Sa.isExist(e)?e:""}Jd.exports=xa});var Xd=N(Qd=>{"use strict";function Uw(e,t){return Yd(e,t)}function Yd(e,t,s){let o,n={};for(let r=0;r<e.length;r++){let a=e[r],i=Bw(a),c="";if(s===void 0?c=i:c=s+"."+i,i===t.textNodeName)o===void 0?o=a[i]:o+=""+a[i];else{if(i===void 0)continue;if(a[i]){let d=Yd(a[i],t,c),l=Vw(d,t);a[":@"]?Gw(d,a[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),n[i]!==void 0&&n.hasOwnProperty(i)?(Array.isArray(n[i])||(n[i]=[n[i]]),n[i].push(d)):t.isArray(i,c,l)?n[i]=[d]:n[i]=d}}}return typeof o=="string"?o.length>0&&(n[t.textNodeName]=o):o!==void 0&&(n[t.textNodeName]=o),n}function Bw(e){let t=Object.keys(e);for(let s=0;s<t.length;s++){let o=t[s];if(o!==":@")return o}}function Gw(e,t,s,o){if(t){let n=Object.keys(t),r=n.length;for(let a=0;a<r;a++){let i=n[a];o.isArray(i,s+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function Vw(e,t){let s=Object.keys(e).length;return!!(s===0||s===1&&e[t.textNodeName])}Qd.prettify=Uw});var el=N((VD,Zd)=>{var{buildOptions:qw}=Bd(),Ww=Kd(),{prettify:jw}=Xd(),Hw=wa(),Ca=class{constructor(t){this.externalEntities={},this.options=qw(t)}parse(t,s){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(s){s===!0&&(s={});let r=Hw.validate(t,s);if(r!==!0)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}let o=new Ww(this.options);o.addExternalEntities(this.externalEntities);let n=o.parseXml(t);return this.options.preserveOrder||n===void 0?n:jw(n,this.options)}addEntity(t,s){if(s.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(s==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=s}};Zd.exports=Ca});var rl=N((qD,nl)=>{var Jw=`
`;function Kw(e,t){let s="";return t.format&&t.indentBy.length>0&&(s=Jw),sl(e,t,"",s)}function sl(e,t,s,o){let n="",r=!1;for(let a=0;a<e.length;a++){let i=e[a],c=Yw(i),d="";if(s.length===0?d=c:d=`${s}.${c}`,c===t.textNodeName){let f=i[c];Qw(d,t)||(f=t.tagValueProcessor(c,f),f=ol(f,t)),r&&(n+=o),n+=f,r=!1;continue}else if(c===t.cdataPropName){r&&(n+=o),n+=`<![CDATA[${i[c][0][t.textNodeName]}]]>`,r=!1;continue}else if(c===t.commentPropName){n+=o+`<!--${i[c][0][t.textNodeName]}-->`,r=!0;continue}else if(c[0]==="?"){let f=tl(i[":@"],t),h=c==="?xml"?"":o,E=i[c][0][t.textNodeName];E=E.length!==0?" "+E:"",n+=h+`<${c}${E}${f}?>`,r=!0;continue}let l=o;l!==""&&(l+=t.indentBy);let m=tl(i[":@"],t),p=o+`<${c}${m}`,u=sl(i[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?n+=p+">":n+=p+"/>":(!u||u.length===0)&&t.suppressEmptyNode?n+=p+"/>":u&&u.endsWith(">")?n+=p+`>${u}${o}</${c}>`:(n+=p+">",u&&o!==""&&(u.includes("/>")||u.includes("</"))?n+=o+t.indentBy+u+o:n+=u,n+=`</${c}>`),r=!0}return n}function Yw(e){let t=Object.keys(e);for(let s=0;s<t.length;s++){let o=t[s];if(o!==":@")return o}}function tl(e,t){let s="";if(e&&!t.ignoreAttributes)for(let o in e){let n=t.attributeValueProcessor(o,e[o]);n=ol(n,t),n===!0&&t.suppressBooleanAttributes?s+=` ${o.substr(t.attributeNamePrefix.length)}`:s+=` ${o.substr(t.attributeNamePrefix.length)}="${n}"`}return s}function Qw(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let s=e.substr(e.lastIndexOf(".")+1);for(let o in t.stopNodes)if(t.stopNodes[o]===e||t.stopNodes[o]==="*."+s)return!0;return!1}function ol(e,t){if(e&&e.length>0&&t.processEntities)for(let s=0;s<t.entities.length;s++){let o=t.entities[s];e=e.replace(o.regex,o.val)}return e}nl.exports=Kw});var il=N((WD,al)=>{"use strict";var Xw=rl(),Zw={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function kt(e){this.options=Object.assign({},Zw,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=sE),this.processTextOrObjNode=eE,this.options.format?(this.indentate=tE,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}kt.prototype.build=function(e){return this.options.preserveOrder?Xw(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};kt.prototype.j2x=function(e,t){let s="",o="";for(let n in e)if(!(typeof e[n]>"u"))if(e[n]===null)n[0]==="?"?o+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+n+"/"+this.tagEndChar;else if(e[n]instanceof Date)o+=this.buildTextValNode(e[n],n,"",t);else if(typeof e[n]!="object"){let r=this.isAttribute(n);if(r)s+=this.buildAttrPairStr(r,""+e[n]);else if(n===this.options.textNodeName){let a=this.options.tagValueProcessor(n,""+e[n]);o+=this.replaceEntitiesValue(a)}else o+=this.buildTextValNode(e[n],n,"",t)}else if(Array.isArray(e[n])){let r=e[n].length;for(let a=0;a<r;a++){let i=e[n][a];typeof i>"u"||(i===null?n[0]==="?"?o+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+n+"/"+this.tagEndChar:typeof i=="object"?o+=this.processTextOrObjNode(i,n,t):o+=this.buildTextValNode(i,n,"",t))}}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){let r=Object.keys(e[n]),a=r.length;for(let i=0;i<a;i++)s+=this.buildAttrPairStr(r[i],""+e[n][r[i]])}else o+=this.processTextOrObjNode(e[n],n,t);return{attrStr:s,val:o}};kt.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function eE(e,t,s){let o=this.j2x(e,s+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,o.attrStr,s):this.buildObjectNode(o.val,t,o.attrStr,s)}kt.prototype.buildObjectNode=function(e,t,s,o){if(e==="")return t[0]==="?"?this.indentate(o)+"<"+t+s+"?"+this.tagEndChar:this.indentate(o)+"<"+t+s+this.closeTag(t)+this.tagEndChar;{let n="</"+t+this.tagEndChar,r="";return t[0]==="?"&&(r="?",n=""),s&&e.indexOf("<")===-1?this.indentate(o)+"<"+t+s+r+">"+e+n:this.options.commentPropName!==!1&&t===this.options.commentPropName&&r.length===0?this.indentate(o)+`<!--${e}-->`+this.newLine:this.indentate(o)+"<"+t+s+r+this.tagEndChar+e+this.indentate(o)+n}};kt.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};kt.prototype.buildTextValNode=function(e,t,s,o){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(o)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(o)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(o)+"<"+t+s+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(t,e);return n=this.replaceEntitiesValue(n),n===""?this.indentate(o)+"<"+t+s+this.closeTag(t)+this.tagEndChar:this.indentate(o)+"<"+t+s+">"+n+"</"+t+this.tagEndChar}};kt.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let s=this.options.entities[t];e=e.replace(s.regex,s.val)}return e};function tE(e){return this.options.indentBy.repeat(e)}function sE(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}al.exports=kt});var dl=N((jD,cl)=>{"use strict";var oE=wa(),nE=el(),rE=il();cl.exports={XMLParser:nE,XMLValidator:oE,XMLBuilder:rE}});var C=oi(_r(),1);import{setInterval as Iu,clearInterval as Su}from"node:timers";import{scheduler as Xa}from"node:timers/promises";import{inspect as rr}from"node:util";var me=class{trace(){}debug(){}info(){}warn(){}error(){}};var os=()=>{let e=[],t=[],s=new Set,o=l=>l.sort((m,p)=>ec[p.step]-ec[m.step]||tc[p.priority||"normal"]-tc[m.priority||"normal"]),n=l=>{let m=!1,p=u=>u.name&&u.name===l?(m=!0,s.delete(l),!1):!0;return e=e.filter(p),t=t.filter(p),m},r=l=>{let m=!1,p=u=>u.middleware===l?(m=!0,u.name&&s.delete(u.name),!1):!0;return e=e.filter(p),t=t.filter(p),m},a=l=>(e.forEach(m=>{l.add(m.middleware,{...m})}),t.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),l),i=l=>{let m=[];return l.before.forEach(p=>{p.before.length===0&&p.after.length===0?m.push(p):m.push(...i(p))}),m.push(l),l.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?m.push(p):m.push(...i(p))}),m},c=(l=!1)=>{let m=[],p=[],u={};return e.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(u[E.name]=E),m.push(E)}),t.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(u[E.name]=E),p.push(E)}),p.forEach(h=>{if(h.toMiddleware){let E=u[h.toMiddleware];if(E===void 0){if(l)return;throw new Error(`${h.toMiddleware} is not found when adding ${h.name||"anonymous"} middleware ${h.relation} ${h.toMiddleware}`)}h.relation==="after"&&E.after.push(h),h.relation==="before"&&E.before.push(h)}}),o(m).map(i).reduce((h,E)=>(h.push(...E),h),[])},d={add:(l,m={})=>{let{name:p,override:u}=m,f={step:"initialize",priority:"normal",middleware:l,...m};if(p){if(s.has(p)){if(!u)throw new Error(`Duplicate middleware name '${p}'`);let h=e.findIndex(Re=>Re.name===p),E=e[h];if(E.step!==f.step||E.priority!==f.priority)throw new Error(`"${p}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by same-name middleware with ${f.priority} priority in ${f.step} step.`);e.splice(h,1)}s.add(p)}e.push(f)},addRelativeTo:(l,m)=>{let{name:p,override:u}=m,f={middleware:l,...m};if(p){if(s.has(p)){if(!u)throw new Error(`Duplicate middleware name '${p}'`);let h=t.findIndex(Re=>Re.name===p),E=t[h];if(E.toMiddleware!==f.toMiddleware||E.relation!==f.relation)throw new Error(`"${p}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by same-name middleware ${f.relation} "${f.toMiddleware}" middleware.`);t.splice(h,1)}s.add(p)}t.push(f)},clone:()=>a(os()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?n(l):r(l),removeByTag:l=>{let m=!1,p=u=>{let{tags:f,name:h}=u;return f&&f.includes(l)?(h&&s.delete(h),m=!0,!1):!0};return e=e.filter(p),t=t.filter(p),m},concat:l=>{let m=a(os());return m.use(l),m},applyToStack:a,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,m)=>{for(let p of c().map(u=>u.middleware).reverse())l=p(l,m);return l}};return d},ec={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},tc={high:3,normal:2,low:1};var pe=class{constructor(t){this.middlewareStack=os(),this.config=t}send(t,s,o){let n=typeof s!="function"?s:void 0,r=typeof s=="function"?s:o,a=t.resolveMiddleware(this.middlewareStack,this.config,n);if(r)a(t).then(i=>r(null,i.output),i=>r(i)).catch(()=>{});else return a(t).then(i=>i.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var U=class{constructor(){this.middlewareStack=os()}};var Nt="***SensitiveInformation***";var rc=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&an.warn(rn(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&an.warn(rn(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Pe=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&an.warn(rn(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},uy=Math.ceil(34028234663852886e22),sc=e=>{let t=Pe(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>uy)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},cn=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Oe=e=>Dr(e,32),oc=e=>Dr(e,16),nc=e=>Dr(e,8),Dr=(e,t)=>{let s=cn(e);if(s!==void 0&&fy(s,t)!==s)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return s},fy=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},X=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},dn=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},y=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return an.warn(rn(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var ac=e=>Pe(typeof e=="string"?So(e):e);var ic=e=>sc(typeof e=="string"?So(e):e),yy=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,So=e=>{let t=e.match(yy);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Mr=e=>Oe(typeof e=="string"?So(e):e),cc=e=>oc(typeof e=="string"?So(e):e),dc=e=>nc(typeof e=="string"?So(e):e),rn=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),an={warn:console.warn};var hy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var mI=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var wy=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),lc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=wy.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[s,o,n,r,a,i,c,d,l]=t,m=cc(mc(o)),p=Co(n,"month",1,12),u=Co(r,"day",1,31),f=Ey(m,p,u,{hours:a,minutes:i,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&f.setTime(f.getTime()-Sy(l)),f},pI=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),uI=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),fI=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Gt=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=ac(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Ey=(e,t,s,o)=>{let n=t-1;return xy(e,n,s),new Date(Date.UTC(e,n,s,Co(o.hours,"hour",0,23),Co(o.minutes,"minute",0,59),Co(o.seconds,"seconds",0,60),Iy(o.fractionalMilliseconds)))};var yI=50*365*24*60*60*1e3;var gy=[31,28,31,30,31,30,31,31,30,31,30,31],xy=(e,t,s)=>{let o=gy[t];if(t===1&&by(e)&&(o=29),s>o)throw new TypeError(`Invalid day for ${hy[t]} in ${e}: ${s}`)},by=e=>e%4===0&&(e%100!==0||e%400===0),Co=(e,t,s,o)=>{let n=dc(mc(e));if(n<s||n>o)throw new TypeError(`${t} must be between ${s} and ${o}, inclusive`);return n},Iy=e=>e==null?0:ic("0."+e)*1e3,Sy=e=>{let t=e[0],s=1;if(t=="+")s=1;else if(t=="-")s=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let o=Number(e.substring(1,3)),n=Number(e.substring(4,6));return s*(o*60+n)*60*1e3},mc=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var se=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,se.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},x=(e,t={})=>{Object.entries(t).filter(([,o])=>o!==void 0).forEach(([o,n])=>{(e[o]==null||e[o]==="")&&(e[o]=n)});let s=e.message||e.Message||"UnknownError";return e.message=s,delete e.Message,e};var Cy=({output:e,parsedBody:t,exceptionCtor:s,errorCode:o})=>{let n=vy(e),r=n.httpStatusCode?n.httpStatusCode+"":void 0,a=new s({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||o||r||"UnknownError",$fault:"client",$metadata:n});throw x(a,t)},Ne=e=>({output:t,parsedBody:s,errorCode:o})=>{Cy({output:t,parsedBody:s,exceptionCtor:e,errorCode:o})},vy=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var De=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var pc=!1,Me=e=>{e&&!pc&&parseInt(e.substring(1,e.indexOf(".")))<14&&(pc=!0)};function ln(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var zr=e=>{let t="#text";for(let s in e)e.hasOwnProperty(s)&&e[s][t]!==void 0?e[s]=e[s][t]:typeof e[s]=="object"&&e[s]!==null&&(e[s]=zr(e[s]));return e};var kr=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),s=new t;return Object.setPrototypeOf(s,e.prototype),s};kr.prototype=Object.create(String.prototype,{constructor:{value:kr,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(kr,String);function z(e,t,s){let o,n,r;if(typeof t>"u"&&typeof s>"u")o={},r=e;else{if(o=e,typeof t=="function")return n=t,r=s,_y(o,n,r);r=t}for(let a of Object.keys(r)){if(!Array.isArray(r[a])){o[a]=r[a];continue}uc(o,null,r,a)}return o}var A=(e,t)=>{let s={};for(let o in t)uc(s,e,t,o);return s},_y=(e,t,s)=>z(e,Object.entries(s).reduce((o,[n,r])=>(Array.isArray(r)?o[n]=r:typeof r=="function"?o[n]=[t,r()]:o[n]=[t,r],o),{})),uc=(e,t,s,o)=>{if(t!==null){let a=s[o];typeof a=="function"&&(a=[,a]);let[i=Ty,c=Ry,d=o]=a;(typeof i=="function"&&i(t[d])||typeof i!="function"&&i)&&(e[o]=c(t[d]));return}let[n,r]=s[o];if(typeof r=="function"){let a,i=n===void 0&&(a=r())!=null,c=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;i?e[o]=a:c&&(e[o]=r())}else{let a=n===void 0&&r!=null,i=typeof n=="function"&&!!n(r)||typeof n!="function"&&!!n;(a||i)&&(e[o]=r)}},Ty=e=>e!=null,Ry=e=>e;var I=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let s of Object.keys(e))e[s]!=null&&(t[s]=I(e[s]));return t}return e};var fc=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Dy(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Ny(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Ay=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Py=/(\d+\.){3}\d+/,Oy=/\.\./;var Ny=e=>Ay.test(e)&&!Py.test(e)&&!Oy.test(e),Dy=e=>{let[t,s,o,n,r,a]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,c=[t,s,o,r,a].filter(Boolean).length===5;if(i&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!s&&!!o&&!!r&&!!a};var yc=(e,t,s)=>{let o=async()=>{let n=s[e]??s[t];return typeof n=="function"?n():n};return e==="endpoint"||t==="endpoint"?async()=>{let n=await o();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:r,hostname:a,port:i,path:c}=n;return`${r}//${a}${i?":"+i:""}${c}`}}return n}:o};var hc=async(e,t,s,o)=>{let n=await My(e,t,s);if(typeof s.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return s.endpointProvider(n,o)},My=async(e,t,s)=>{var r;let o={},n=((r=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:r.call(t))||{};for(let[a,i]of Object.entries(n))switch(i.type){case"staticContextParams":o[a]=i.value;break;case"contextParams":o[a]=e[i.name];break;case"clientContextParams":case"builtInParams":o[a]=await yc(i.name,a,s)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(n).length===0&&Object.assign(o,s),String(s.serviceId).toLowerCase()==="s3"&&await fc(o),o};function wc(e){let t={};if(e=e.replace(/^\?/,""),e)for(let s of e.split("&")){let[o,n=null]=s.split("=");o=decodeURIComponent(o),n&&(n=decodeURIComponent(n)),o in t?Array.isArray(t[o])?t[o].push(n):t[o]=[t[o],n]:t[o]=n}return t}var j=e=>{if(typeof e=="string")return j(new URL(e));let{hostname:t,pathname:s,port:o,protocol:n,search:r}=e,a;return r&&(a=wc(r)),{hostname:t,port:o?parseInt(o):void 0,protocol:n,path:s,query:a}};var Ec=e=>typeof e=="object"?"url"in e?j(e.url):e:j(e);var gc=({config:e,instructions:t})=>(s,o)=>async n=>{var i,c;let r=await hc(n.input,{getEndpointParameterInstructions(){return t}},{...e},o);o.endpointV2=r,o.authSchemes=(i=r.properties)==null?void 0:i.authSchemes;let a=(c=o.authSchemes)==null?void 0:c[0];return a&&(o.signing_region=a.signingRegion,o.signing_service=a.signingName),s({...n})};var xc=(e,t)=>(s,o)=>async n=>{let{response:r}=await s(n);try{let a=await t(r,e);return{response:r,output:a}}catch(a){if(Object.defineProperty(a,"$response",{value:r}),!("$metadata"in a)){let i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";a.message+=`
  `+i}throw a}};var bc=(e,t)=>(s,o)=>async n=>{var i;let r=(i=o.endpointV2)!=null&&i.url&&e.urlParser?async()=>e.urlParser(o.endpointV2.url):e.endpoint;if(!r)throw new Error("No valid endpoint provider available.");let a=await t(n.input,{...e,endpoint:r});return s({...n,request:a})};var zy={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Lr={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function H(e,t,s){return{applyToStack:o=>{o.add(xc(e,s),zy),o.add(bc(e,t),Lr)}}}var ky={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Lr.name},J=(e,t)=>({applyToStack:s=>{s.addRelativeTo(gc({config:e,instructions:t}),ky)}});var V=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var ze=e=>{let t=e.tls??!0,{endpoint:s}=e,o=s!=null?async()=>Ec(await V(s)()):void 0;return{...e,endpoint:o,tls:t,isCustomEndpoint:!!s,useDualstackEndpoint:V(e.useDualstackEndpoint??!1),useFipsEndpoint:V(e.useFipsEndpoint??!1)}};var $r;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})($r||($r={}));var R=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let s=t;return"method"in s&&"protocol"in s&&"hostname"in s&&"path"in s&&typeof s.query=="object"&&typeof s.headers=="object"}clone(){let t=new R({...this,headers:{...this.headers}});return t.query&&(t.query=Ly(t.query)),t}};function Ly(e){return Object.keys(e).reduce((t,s)=>{let o=e[s];return{...t,[s]:Array.isArray(o)?[...o]:o}},{})}var ke=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let s=t;return typeof s.statusCode=="number"&&typeof s.headers=="object"}};var P=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,P.prototype)}};var ns=class extends P{constructor(t){super({name:"InternalServerError",$fault:"server",...t}),this.name="InternalServerError",this.$fault="server",Object.setPrototypeOf(this,ns.prototype),this.Message=t.Message}};var rs=class extends P{constructor(t){super({name:"DuplicateInstanceId",$fault:"client",...t}),this.name="DuplicateInstanceId",this.$fault="client",Object.setPrototypeOf(this,rs.prototype)}},as=class extends P{constructor(t){super({name:"InvalidCommandId",$fault:"client",...t}),this.name="InvalidCommandId",this.$fault="client",Object.setPrototypeOf(this,as.prototype)}},is=class extends P{constructor(t){super({name:"InvalidInstanceId",$fault:"client",...t}),this.name="InvalidInstanceId",this.$fault="client",Object.setPrototypeOf(this,is.prototype),this.Message=t.Message}};var cs=class extends P{constructor(t){super({name:"InvalidParameters",$fault:"client",...t}),this.name="InvalidParameters",this.$fault="client",Object.setPrototypeOf(this,cs.prototype),this.Message=t.Message}};var ds=class extends P{constructor(t){super({name:"InvalidDocument",$fault:"client",...t}),this.name="InvalidDocument",this.$fault="client",Object.setPrototypeOf(this,ds.prototype),this.Message=t.Message}},ls=class extends P{constructor(t){super({name:"InvalidDocumentVersion",$fault:"client",...t}),this.name="InvalidDocumentVersion",this.$fault="client",Object.setPrototypeOf(this,ls.prototype),this.Message=t.Message}};var ms=class extends P{constructor(t){super({name:"UnsupportedPlatformType",$fault:"client",...t}),this.name="UnsupportedPlatformType",this.$fault="client",Object.setPrototypeOf(this,ms.prototype),this.Message=t.Message}};var ps=class extends P{constructor(t){super({name:"MaxDocumentSizeExceeded",$fault:"client",...t}),this.name="MaxDocumentSizeExceeded",this.$fault="client",Object.setPrototypeOf(this,ps.prototype),this.Message=t.Message}};var us=class extends P{constructor(t){super({name:"InvalidNextToken",$fault:"client",...t}),this.name="InvalidNextToken",this.$fault="client",Object.setPrototypeOf(this,us.prototype),this.Message=t.Message}};var fs=class extends P{constructor(t){super({name:"InvalidFilterKey",$fault:"client",...t}),this.name="InvalidFilterKey",this.$fault="client",Object.setPrototypeOf(this,fs.prototype)}};var ys=class extends P{constructor(t){super({name:"InvalidInstanceInformationFilterValue",$fault:"client",...t}),this.name="InvalidInstanceInformationFilterValue",this.$fault="client",Object.setPrototypeOf(this,ys.prototype)}};var hs=class extends P{constructor(t){super({name:"InvalidPluginName",$fault:"client",...t}),this.name="InvalidPluginName",this.$fault="client",Object.setPrototypeOf(this,hs.prototype)}},ws=class extends P{constructor(t){super({name:"InvocationDoesNotExist",$fault:"client",...t}),this.name="InvocationDoesNotExist",this.$fault="client",Object.setPrototypeOf(this,ws.prototype)}};var Es=class extends P{constructor(t){super({name:"InvalidNotificationConfig",$fault:"client",...t}),this.name="InvalidNotificationConfig",this.$fault="client",Object.setPrototypeOf(this,Es.prototype),this.Message=t.Message}},gs=class extends P{constructor(t){super({name:"InvalidOutputFolder",$fault:"client",...t}),this.name="InvalidOutputFolder",this.$fault="client",Object.setPrototypeOf(this,gs.prototype)}},xs=class extends P{constructor(t){super({name:"InvalidRole",$fault:"client",...t}),this.name="InvalidRole",this.$fault="client",Object.setPrototypeOf(this,xs.prototype),this.Message=t.Message}};var $y=e=>({...e,...e.Parameters&&{Parameters:Nt}});var Ic=e=>({...e,...e.Parameters&&{Parameters:Nt}}),Sc=e=>({...e,...e.Command&&{Command:$y(e.Command)}});var Cc=async(e,t)=>{let s=Vr("DescribeInstanceInformation"),o;return o=JSON.stringify(I(e)),Gr(t,s,"/",void 0,o)};var vc=async(e,t)=>{let s=Vr("GetCommandInvocation"),o;return o=JSON.stringify(I(e)),Gr(t,s,"/",void 0,o)};var _c=async(e,t)=>{let s=Vr("SendCommand"),o;return o=JSON.stringify(I(e)),Gr(t,s,"/",void 0,o)};var Tc=async(e,t)=>{if(e.statusCode>=300)return Fy(e,t);let s=await mn(e.body,t),o={};return o=nh(s,t),{$metadata:L(e),...o}},Fy=async(e,t)=>{let s={...e,body:await qr(e.body,t)},o=Wr(e,s.body);switch(o){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await Fr(s,t);case"InvalidFilterKey":case"com.amazonaws.ssm#InvalidFilterKey":throw await jy(s,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Ur(s,t);case"InvalidInstanceInformationFilterValue":case"com.amazonaws.ssm#InvalidInstanceInformationFilterValue":throw await Hy(s,t);case"InvalidNextToken":case"com.amazonaws.ssm#InvalidNextToken":throw await Jy(s,t);default:let n=s.body;return Br({output:e,parsedBody:n,errorCode:o})}};var Rc=async(e,t)=>{if(e.statusCode>=300)return Uy(e,t);let s=await mn(e.body,t),o={};return o=I(s),{$metadata:L(e),...o}},Uy=async(e,t)=>{let s={...e,body:await qr(e.body,t)},o=Wr(e,s.body);switch(o){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await Fr(s,t);case"InvalidCommandId":case"com.amazonaws.ssm#InvalidCommandId":throw await Vy(s,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Ur(s,t);case"InvalidPluginName":case"com.amazonaws.ssm#InvalidPluginName":throw await Xy(s,t);case"InvocationDoesNotExist":case"com.amazonaws.ssm#InvocationDoesNotExist":throw await eh(s,t);default:let n=s.body;return Br({output:e,parsedBody:n,errorCode:o})}};var Ac=async(e,t)=>{if(e.statusCode>=300)return By(e,t);let s=await mn(e.body,t),o={};return o=ih(s,t),{$metadata:L(e),...o}},By=async(e,t)=>{let s={...e,body:await qr(e.body,t)},o=Wr(e,s.body);switch(o){case"DuplicateInstanceId":case"com.amazonaws.ssm#DuplicateInstanceId":throw await Gy(s,t);case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await Fr(s,t);case"InvalidDocument":case"com.amazonaws.ssm#InvalidDocument":throw await qy(s,t);case"InvalidDocumentVersion":case"com.amazonaws.ssm#InvalidDocumentVersion":throw await Wy(s,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Ur(s,t);case"InvalidNotificationConfig":case"com.amazonaws.ssm#InvalidNotificationConfig":throw await Ky(s,t);case"InvalidOutputFolder":case"com.amazonaws.ssm#InvalidOutputFolder":throw await Yy(s,t);case"InvalidParameters":case"com.amazonaws.ssm#InvalidParameters":throw await Qy(s,t);case"InvalidRole":case"com.amazonaws.ssm#InvalidRole":throw await Zy(s,t);case"MaxDocumentSizeExceeded":case"com.amazonaws.ssm#MaxDocumentSizeExceeded":throw await th(s,t);case"UnsupportedPlatformType":case"com.amazonaws.ssm#UnsupportedPlatformType":throw await sh(s,t);default:let n=s.body;return Br({output:e,parsedBody:n,errorCode:o})}};var Gy=async(e,t)=>{let s=e.body,o=I(s),n=new rs({$metadata:L(e),...o});return x(n,s)};var Fr=async(e,t)=>{let s=e.body,o=I(s),n=new ns({$metadata:L(e),...o});return x(n,s)};var Vy=async(e,t)=>{let s=e.body,o=I(s),n=new as({$metadata:L(e),...o});return x(n,s)};var qy=async(e,t)=>{let s=e.body,o=I(s),n=new ds({$metadata:L(e),...o});return x(n,s)};var Wy=async(e,t)=>{let s=e.body,o=I(s),n=new ls({$metadata:L(e),...o});return x(n,s)};var jy=async(e,t)=>{let s=e.body,o=I(s),n=new fs({$metadata:L(e),...o});return x(n,s)};var Ur=async(e,t)=>{let s=e.body,o=I(s),n=new is({$metadata:L(e),...o});return x(n,s)},Hy=async(e,t)=>{let s=e.body,o=I(s),n=new ys({$metadata:L(e),...o});return x(n,s)};var Jy=async(e,t)=>{let s=e.body,o=I(s),n=new us({$metadata:L(e),...o});return x(n,s)},Ky=async(e,t)=>{let s=e.body,o=I(s),n=new Es({$metadata:L(e),...o});return x(n,s)};var Yy=async(e,t)=>{let s=e.body,o=I(s),n=new gs({$metadata:L(e),...o});return x(n,s)};var Qy=async(e,t)=>{let s=e.body,o=I(s),n=new cs({$metadata:L(e),...o});return x(n,s)};var Xy=async(e,t)=>{let s=e.body,o=I(s),n=new hs({$metadata:L(e),...o});return x(n,s)};var Zy=async(e,t)=>{let s=e.body,o=I(s),n=new xs({$metadata:L(e),...o});return x(n,s)};var eh=async(e,t)=>{let s=e.body,o=I(s),n=new ws({$metadata:L(e),...o});return x(n,s)};var th=async(e,t)=>{let s=e.body,o=I(s),n=new ps({$metadata:L(e),...o});return x(n,s)};var sh=async(e,t)=>{let s=e.body,o=I(s),n=new ms({$metadata:L(e),...o});return x(n,s)};var oh=(e,t)=>A(e,{AlarmConfiguration:I,CloudWatchOutputConfig:I,CommandId:y,Comment:y,CompletedCount:Oe,DeliveryTimedOutCount:Oe,DocumentName:y,DocumentVersion:y,ErrorCount:Oe,ExpiresAfter:s=>X(Gt(Pe(s))),InstanceIds:I,MaxConcurrency:y,MaxErrors:y,NotificationConfig:I,OutputS3BucketName:y,OutputS3KeyPrefix:y,OutputS3Region:y,Parameters:I,RequestedDateTime:s=>X(Gt(Pe(s))),ServiceRole:y,Status:y,StatusDetails:y,TargetCount:Oe,Targets:I,TimeoutSeconds:Oe,TriggeredAlarms:I});var nh=(e,t)=>A(e,{InstanceInformationList:s=>ah(s,t),NextToken:y});var rh=(e,t)=>A(e,{ActivationId:y,AgentVersion:y,AssociationOverview:I,AssociationStatus:y,ComputerName:y,IPAddress:y,IamRole:y,InstanceId:y,IsLatestVersion:rc,LastAssociationExecutionDate:s=>X(Gt(Pe(s))),LastPingDateTime:s=>X(Gt(Pe(s))),LastSuccessfulAssociationExecutionDate:s=>X(Gt(Pe(s))),Name:y,PingStatus:y,PlatformName:y,PlatformType:y,PlatformVersion:y,RegistrationDate:s=>X(Gt(Pe(s))),ResourceType:y,SourceId:y,SourceType:y}),ah=(e,t)=>(e||[]).filter(o=>o!=null).map(o=>rh(o,t));var ih=(e,t)=>A(e,{Command:s=>oh(s,t)});var L=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ch=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),dh=(e,t)=>ch(e,t).then(s=>t.utf8Encoder(s)),Br=Ne(P),Gr=async(e,t,s,o,n)=>{let{hostname:r,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:r,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return o!==void 0&&(d.hostname=o),n!==void 0&&(d.body=n),new R(d)};function Vr(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AmazonSSM.${e}`}}var mn=(e,t)=>dh(e,t).then(s=>s.length?JSON.parse(s):{}),qr=async(e,t)=>{let s=await mn(e,t);return s.message=s.message??s.Message,s},Wr=(e,t)=>{let s=(r,a)=>Object.keys(r).find(i=>i.toLowerCase()===a.toLowerCase()),o=r=>{let a=r;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},n=s(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)};var bs=class extends U{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,bs.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"SSMClient",commandName:"DescribeInstanceInformationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return Cc(t,s)}deserialize(t,s){return Tc(t,s)}};var Is=class extends U{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,Is.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"SSMClient",commandName:"GetCommandInvocationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return vc(t,s)}deserialize(t,s){return Rc(t,s)}};var Ss=class extends U{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,Ss.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"SSMClient",commandName:"SendCommandCommand",inputFilterSensitiveLog:Ic,outputFilterSensitiveLog:Sc},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return _c(t,s)}deserialize(t,s){return Ac(t,s)}};var Dt;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Dt||(Dt={}));var Cs=(e,t,s)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${s} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var lh="AWS_USE_DUALSTACK_ENDPOINT",mh="use_dualstack_endpoint";var Le={environmentVariableSelector:e=>Cs(e,lh,Dt.ENV),configFileSelector:e=>Cs(e,mh,Dt.CONFIG),default:!1};var ph="AWS_USE_FIPS_ENDPOINT",uh="use_fips_endpoint";var $e={environmentVariableSelector:e=>Cs(e,ph,Dt.ENV),configFileSelector:e=>Cs(e,uh,Dt.CONFIG),default:!1};var fh="AWS_REGION",yh="region",ue={environmentVariableSelector:e=>e[fh],configFileSelector:e=>e[yh],default:()=>{throw new Error("Region is missing")}},Fe={preferredFile:"credentials"};var pn=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var jr=e=>pn(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Ue=e=>{let{region:t,useFipsEndpoint:s}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return jr(t);let o=await t();return jr(o)},useFipsEndpoint:async()=>{let o=typeof t=="string"?t:await t();return pn(o)?!0:typeof s!="function"?Promise.resolve(!!s):s()}}};var Pc="content-length";function hh(e){return t=>async s=>{let o=s.request;if(R.isInstance(o)){let{body:n,headers:r}=o;if(n&&Object.keys(r).map(a=>a.toLowerCase()).indexOf(Pc)===-1)try{let a=e(n);o.headers={...o.headers,[Pc]:String(a)}}catch{}}return t({...s,request:o})}}var wh={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Be=e=>({applyToStack:t=>{t.add(hh(e.bodyLengthChecker),wh)}});var Eh=e=>t=>async s=>{if(!R.isInstance(s.request))return t(s);let{request:o}=s,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]="";else if(!o.headers.host){let r=o.hostname;o.port!=null&&(r+=`:${o.port}`),o.headers.host=r}return t(s)},gh={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ge=e=>({applyToStack:t=>{t.add(Eh(e),gh)}});var xh=()=>(e,t)=>async s=>{var o,n;try{let r=await e(s),{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:m}=d,p=l??t.inputFilterSensitiveLog,u=m??t.outputFilterSensitiveLog,{$metadata:f,...h}=r.output;return(o=c==null?void 0:c.info)==null||o.call(c,{clientName:a,commandName:i,input:p(s.input),output:u(h),metadata:f}),r}catch(r){let{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,m=l??t.inputFilterSensitiveLog;throw(n=c==null?void 0:c.error)==null||n.call(c,{clientName:a,commandName:i,input:m(s.input),error:r,metadata:r.$metadata}),r}},bh={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Ve=e=>({applyToStack:t=>{t.add(xh(),bh)}});var Oc="X-Amzn-Trace-Id",Ih="AWS_LAMBDA_FUNCTION_NAME",Sh="_X_AMZN_TRACE_ID",Ch=e=>t=>async s=>{let{request:o}=s;if(!R.isInstance(o)||e.runtime!=="node"||o.headers.hasOwnProperty(Oc))return t(s);let n=process.env[Ih],r=process.env[Sh],a=i=>typeof i=="string"&&i.length>0;return a(n)&&a(r)&&(o.headers[Oc]=r),t({...s,request:o})},vh={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},qe=e=>({applyToStack:t=>{t.add(Ch(e),vh)}});var We;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(We||(We={}));var Vt=3,fe="STANDARD";var Nc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Dc=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Mc=[500,502,503,504],zc=["ECONNRESET","EPIPE","ETIMEDOUT"];var vs=e=>{var t,s;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Nc.includes(e.name)||((s=e.$retryable)==null?void 0:s.throttling)==!0},un=e=>{var t;return Dc.includes(e.name)||zc.includes((e==null?void 0:e.code)||"")||Mc.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},kc=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let s=e.$metadata.httpStatusCode;return 500<=s&&s<=599&&!un(e)}return!1};var vo=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let s=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(o=>setTimeout(o,s))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let s=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+s),this.lastTimestamp=t}updateClientSendingRate(t){let s;if(this.updateMeasuredRate(),vs(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),s=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),s=this.cubicSuccess(this.getCurrentTimeInSeconds());let o=Math.min(s,2*this.measuredTxRate);this.updateTokenBucketRate(o)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),s=Math.floor(t*2)/2;if(this.requestCount++,s>this.lastTxRateBucket){let o=this.requestCount/(s-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(o*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=s}}getPrecise(t){return parseFloat(t.toFixed(8))}};var fn="amz-sdk-invocation-id",yn="amz-sdk-request";var Lc=()=>{let e=100;return{computeNextBackoffDelay:o=>Math.floor(Math.min(2e4,Math.random()*2**o*e)),setDelayBase:o=>{e=o}}};var Gc=(e,t,s,o)=>{let n=e,r=(o==null?void 0:o.retryCost)??5,a=(o==null?void 0:o.timeoutRetryCost)??10,i=(o==null?void 0:o.retryBackoffStrategy)??Lc(),c=e,d=Math.min(2e4,t),l,m=s??0,p=Se=>Se==="TRANSIENT"?a:r,u=()=>m,f=()=>d,h=()=>l,E=Se=>p(Se)<=c;return{getRetryCount:u,getRetryDelay:f,getLastRetryCost:h,hasRetryTokens:E,getRetryTokenCount:Se=>{let ar=Se.errorType;if(!E(ar))throw new Error("No retry token available");let ir=p(ar),Ru=ar==="THROTTLING"?500:100;i.setDelayBase(Ru);let ti=i.computeNextBackoffDelay(m);if(Se.retryAfterHint){let Au=Se.retryAfterHint.getTime()-Date.now();d=Math.max(Au||0,ti)}else d=ti;return m++,l=ir,c-=ir,ir},releaseRetryTokens:Se=>{c+=Se??1,c=Math.min(c,n)}}};var Ts=class{constructor(t){this.maxAttemptsProvider=t,this.mode=We.STANDARD,this.retryToken=Gc(500,100),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,s){let o=await this.getMaxAttempts();if(this.shouldRetry(t,s,o))return t.getRetryTokenCount(s),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Vt}`),Vt}}shouldRetry(t,s,o){return t.getRetryCount()<o&&t.hasRetryTokens(s.errorType)&&this.isRetryableError(s.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var wn=class{constructor(t,s){this.maxAttemptsProvider=t,this.mode=We.ADAPTIVE;let{rateLimiter:o}=s??{};this.rateLimiter=o??new vo,this.standardRetryStrategy=new Ts(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,s){return this.rateLimiter.updateClientSendingRate(s),this.standardRetryStrategy.refreshRetryTokenForRetry(t,s)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Hr=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var qc="AWS_MAX_ATTEMPTS",Wc="max_attempts",je={environmentVariableSelector:e=>{let t=e[qc];if(!t)return;let s=parseInt(t);if(Number.isNaN(s))throw new Error(`Environment variable ${qc} mast be a number, got "${t}"`);return s},configFileSelector:e=>{let t=e[Wc];if(!t)return;let s=parseInt(t);if(Number.isNaN(s))throw new Error(`Shared config file entry ${Wc} mast be a number, got "${t}"`);return s},default:Vt},He=e=>{let{retryStrategy:t}=e,s=V(e.maxAttempts??Vt);return{...e,maxAttempts:s,retryStrategy:async()=>t||(await V(e.retryMode)()===We.ADAPTIVE?new wn(s):new Ts(s))}},_h="AWS_RETRY_MODE",Th="retry_mode",Je={environmentVariableSelector:e=>e[_h],configFileSelector:e=>e[Th],default:fe};hr();var Rh=e=>(t,s)=>async o=>{let n=await e.retryStrategy(),r=await e.maxAttempts();if(Ah(n)){n=n;let a=await n.acquireInitialRetryToken(s.partition_id),i=new Error,c=0,d=0,{request:l}=o;for(R.isInstance(l)&&(l.headers[fn]=Zo());;)try{R.isInstance(l)&&(l.headers[yn]=`attempt=${c+1}; max=${r}`);let{response:m,output:p}=await t(o);return n.recordSuccess(a),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=d,{response:m,output:p}}catch(m){let p=Ph(m);i=Hr(m);try{a=await n.refreshRetryTokenForRetry(a,p)}catch{throw i.$metadata||(i.$metadata={}),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=d,i}c=a.getRetryCount();let u=a.getRetryDelay();d+=u,await new Promise(f=>setTimeout(f,u))}}else return n=n,n!=null&&n.mode&&(s.userAgent=[...s.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,o)},Ah=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Ph=e=>{let t={errorType:Oh(e)},s=Dh(e.$response);return s&&(t.retryAfterHint=s),t},Oh=e=>vs(e)?"THROTTLING":un(e)?"TRANSIENT":kc(e)?"SERVER_ERROR":"CLIENT_ERROR",Nh={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ke=e=>({applyToStack:t=>{t.add(Rh(e),Nh)}}),Dh=e=>{if(!ke.isInstance(e))return;let t=Object.keys(e.headers).find(r=>r.toLowerCase()==="retry-after");if(!t)return;let s=e.headers[t],o=Number(s);return Number.isNaN(o)?new Date(s):new Date(o*1e3)};var oe=class extends Error{constructor(t,s=!0){super(t),this.tryNextLink=s,this.name="ProviderError",Object.setPrototypeOf(this,oe.prototype)}static from(t,s=!0){return Object.assign(new this(t.message,s),t)}};var g=class extends oe{constructor(t,s=!0){super(t,s),this.tryNextLink=s,this.name="CredentialsProviderError",Object.setPrototypeOf(this,g.prototype)}};var ne=class extends oe{constructor(t,s=!0){super(t,s),this.tryNextLink=s,this.name="TokenProviderError",Object.setPrototypeOf(this,ne.prototype)}};function En(...e){return()=>{let t=Promise.reject(new oe("No providers in chain"));for(let s of e)t=t.catch(o=>{if(o!=null&&o.tryNextLink)return s();throw o});return t}}var jc=e=>()=>Promise.resolve(e);var Mt=(e,t,s)=>{let o,n,r,a=!1,i=async()=>{n||(n=e());try{o=await n,r=!0,a=!1}finally{n=void 0}return o};return t===void 0?async c=>((!r||c!=null&&c.forceRefresh)&&(o=await i()),o):async c=>((!r||c!=null&&c.forceRefresh)&&(o=await i()),a?o:s&&!s(o)?(a=!0,o):(t(o)&&await i(),o))};var Hc={},Mh={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Hc[e]=t,Mh[t]=e}function wt(e){let t="";for(let s=0;s<e.byteLength;s++)t+=Hc[e[s]];return t}var gn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";import{Buffer as Jr}from"buffer";var qt=(e,t=0,s=e.byteLength-t)=>{if(!gn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Jr.from(e,t,s)},Rs=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Jr.from(e,t):Jr.from(e)};var ye=e=>{let t=Rs(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Ye=e=>typeof e=="string"?ye(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Qe=e=>qt(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var Jc="X-Amz-Algorithm",Kc="X-Amz-Credential",Kr="X-Amz-Date",Yc="X-Amz-SignedHeaders",Qc="X-Amz-Expires",Yr="X-Amz-Signature",Qr="X-Amz-Security-Token";var Xr="authorization",Zr=Kr.toLowerCase(),zh="date",Xc=[Xr,Zr,zh],Zc=Yr.toLowerCase(),_o="x-amz-content-sha256",ed=Qr.toLowerCase();var td={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},sd=/^proxy-/,od=/^sec-/;var xn="AWS4-HMAC-SHA256";var nd="AWS4-HMAC-SHA256-PAYLOAD",rd="UNSIGNED-PAYLOAD",ad=50,ea="aws4_request",id=60*60*24*7;var bn={},ta=[],In=(e,t,s)=>`${e}/${t}/${s}/${ea}`,dd=async(e,t,s,o,n)=>{let r=await cd(e,t.secretAccessKey,t.accessKeyId),a=`${s}:${o}:${n}:${wt(r)}:${t.sessionToken}`;if(a in bn)return bn[a];for(ta.push(a);ta.length>ad;)delete bn[ta.shift()];let i=`AWS4${t.secretAccessKey}`;for(let c of[s,o,n,ea])i=await cd(e,i,c);return bn[a]=i};var cd=(e,t,s)=>{let o=new e(t);return o.update(Ye(s)),o.digest()};var Sn=({headers:e},t,s)=>{let o={};for(let n of Object.keys(e).sort()){if(e[n]==null)continue;let r=n.toLowerCase();(r in td||t!=null&&t.has(r)||sd.test(r)||od.test(r))&&(!s||s&&!s.has(r))||(o[r]=e[n].trim().replace(/\s+/g," "))}return o};var Xe=e=>encodeURIComponent(e).replace(/[!'()*]/g,kh),kh=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var sa=({query:e={}})=>{let t=[],s={};for(let o of Object.keys(e).sort()){if(o.toLowerCase()===Zc)continue;t.push(o);let n=e[o];typeof n=="string"?s[o]=`${Xe(o)}=${Xe(n)}`:Array.isArray(n)&&(s[o]=n.slice(0).sort().reduce((r,a)=>r.concat([`${Xe(o)}=${Xe(a)}`]),[]).join("&"))}return t.map(o=>s[o]).filter(o=>o).join("&")};var To=async({headers:e,body:t},s)=>{for(let o of Object.keys(e))if(o.toLowerCase()===_o)return e[o];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||gn(t)){let o=new s;return o.update(Ye(t)),wt(await o.digest())}return rd};var ld=(e,t)=>{e=e.toLowerCase();for(let s of Object.keys(t))if(e===s.toLowerCase())return!0;return!1};var Cn=({headers:e,query:t,...s})=>({...s,headers:{...e},query:t?Lh(t):void 0}),Lh=e=>Object.keys(e).reduce((t,s)=>{let o=e[s];return{...t,[s]:Array.isArray(o)?[...o]:o}},{});var oa=(e,t={})=>{var n;let{headers:s,query:o={}}=typeof e.clone=="function"?e.clone():Cn(e);for(let r of Object.keys(s)){let a=r.toLowerCase();a.slice(0,6)==="x-amz-"&&!((n=t.unhoistableHeaders)!=null&&n.has(a))&&(o[r]=s[r],delete s[r])}return{...e,headers:s,query:o}};var vn=e=>{e=typeof e.clone=="function"?e.clone():Cn(e);for(let t of Object.keys(e.headers))Xc.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var md=e=>$h(e).toISOString().replace(/\.\d{3}Z$/,"Z"),$h=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var Ro=class{constructor({applyChecksum:t,credentials:s,region:o,service:n,sha256:r,uriEscapePath:a=!0}){this.service=n,this.sha256=r,this.uriEscapePath=a,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=V(o),this.credentialProvider=V(s)}async presign(t,s={}){let{signingDate:o=new Date,expiresIn:n=3600,unsignableHeaders:r,unhoistableHeaders:a,signableHeaders:i,signingRegion:c,signingService:d}=s,l=await this.credentialProvider();this.validateResolvedCredentials(l);let m=c??await this.regionProvider(),{longDate:p,shortDate:u}=_n(o);if(n>id)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let f=In(u,m,d??this.service),h=oa(vn(t),{unhoistableHeaders:a});l.sessionToken&&(h.query[Qr]=l.sessionToken),h.query[Jc]=xn,h.query[Kc]=`${l.accessKeyId}/${f}`,h.query[Kr]=p,h.query[Qc]=n.toString(10);let E=Sn(h,r,i);return h.query[Yc]=pd(E),h.query[Yr]=await this.getSignature(p,f,this.getSigningKey(l,m,u,d),this.createCanonicalRequest(h,E,await To(t,this.sha256))),h}async sign(t,s){return typeof t=="string"?this.signString(t,s):t.headers&&t.payload?this.signEvent(t,s):this.signRequest(t,s)}async signEvent({headers:t,payload:s},{signingDate:o=new Date,priorSignature:n,signingRegion:r,signingService:a}){let i=r??await this.regionProvider(),{shortDate:c,longDate:d}=_n(o),l=In(c,i,a??this.service),m=await To({headers:{},body:s},this.sha256),p=new this.sha256;p.update(t);let u=wt(await p.digest()),f=[nd,d,l,n,u,m].join(`
`);return this.signString(f,{signingDate:o,signingRegion:i,signingService:a})}async signString(t,{signingDate:s=new Date,signingRegion:o,signingService:n}={}){let r=await this.credentialProvider();this.validateResolvedCredentials(r);let a=o??await this.regionProvider(),{shortDate:i}=_n(s),c=new this.sha256(await this.getSigningKey(r,a,i,n));return c.update(Ye(t)),wt(await c.digest())}async signRequest(t,{signingDate:s=new Date,signableHeaders:o,unsignableHeaders:n,signingRegion:r,signingService:a}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let c=r??await this.regionProvider(),d=vn(t),{longDate:l,shortDate:m}=_n(s),p=In(m,c,a??this.service);d.headers[Zr]=l,i.sessionToken&&(d.headers[ed]=i.sessionToken);let u=await To(d,this.sha256);!ld(_o,d.headers)&&this.applyChecksum&&(d.headers[_o]=u);let f=Sn(d,n,o),h=await this.getSignature(l,p,this.getSigningKey(i,c,m,a),this.createCanonicalRequest(d,f,u));return d.headers[Xr]=`${xn} Credential=${i.accessKeyId}/${p}, SignedHeaders=${pd(f)}, Signature=${h}`,d}createCanonicalRequest(t,s,o){let n=Object.keys(s).sort();return`${t.method}
${this.getCanonicalPath(t)}
${sa(t)}
${n.map(r=>`${r}:${s[r]}`).join(`
`)}

${n.join(";")}
${o}`}async createStringToSign(t,s,o){let n=new this.sha256;n.update(Ye(o));let r=await n.digest();return`${xn}
${t}
${s}
${wt(r)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let s=[];for(let r of t.split("/"))(r==null?void 0:r.length)!==0&&r!=="."&&(r===".."?s.pop():s.push(r));let o=`${t!=null&&t.startsWith("/")?"/":""}${s.join("/")}${s.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(o).replace(/%2F/g,"/")}return t}async getSignature(t,s,o,n){let r=await this.createStringToSign(t,s,n),a=new this.sha256(await o);return a.update(Ye(r)),wt(await a.digest())}getSigningKey(t,s,o,n){return dd(this.sha256,t,o,s,n||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},_n=e=>{let t=md(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},pd=e=>Object.keys(e).sort().join(";");var Fh=3e5,As=e=>{let t=e.credentials?Uh(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:s=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:n}=e,r;return e.signer?r=V(e.signer):e.regionInfoProvider?r=()=>V(e.region)().then(async a=>[await e.regionInfoProvider(a,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},a]).then(([a,i])=>{let{signingRegion:c,signingService:d}=a;e.signingRegion=e.signingRegion||c||i,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:n,uriEscapePath:s},m=e.signerConstructor||Ro;return new m(l)}):r=async a=>{a=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await V(e.region)(),properties:{}},a);let i=a.signingRegion,c=a.signingName;e.signingRegion=e.signingRegion||i,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:n,uriEscapePath:s},l=e.signerConstructor||Ro;return new l(d)},{...e,systemClockOffset:o,signingEscapePath:s,credentials:t,signer:r}};var Uh=e=>typeof e=="function"?Mt(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Fh,t=>t.expiration!==void 0):V(e);var Tn=e=>new Date(Date.now()+e);var ud=(e,t)=>Math.abs(Tn(t).getTime()-e)>=3e5;var na=(e,t)=>{let s=Date.parse(e);return ud(s,t)?s-Date.now():t};var Bh=e=>(t,s)=>async function(o){var d,l,m,p;if(!R.isInstance(o.request))return t(o);let n=(m=(l=(d=s.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:m[0],r=(n==null?void 0:n.name)==="sigv4a"?(p=n==null?void 0:n.signingRegionSet)==null?void 0:p.join(","):void 0,a=await e.signer(n),i=await t({...o,request:await a.sign(o.request,{signingDate:Tn(e.systemClockOffset),signingRegion:r||s.signing_region,signingService:s.signing_service})}).catch(u=>{let f=u.ServerTime??fd(u.$response);throw f&&(e.systemClockOffset=na(f,e.systemClockOffset)),u}),c=fd(i.response);return c&&(e.systemClockOffset=na(c,e.systemClockOffset)),i},fd=e=>{var t,s;return ke.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((s=e.headers)==null?void 0:s.Date):void 0},Gh={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Ps=e=>({applyToStack:t=>{t.addRelativeTo(Bh(e),Gh)}});function Ze(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var ra={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var yd=ra,hd="",qh=e=>{let{partitions:t}=yd;for(let o of t){let{regions:n,outputs:r}=o;for(let[a,i]of Object.entries(n))if(a===e)return{...r,...i}}for(let o of t){let{regionRegex:n,outputs:r}=o;if(new RegExp(n).test(e))return{...r}}let s=t.find(o=>o.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},wd=(e,t="")=>{yd=e,hd=t},Wh=()=>{wd(ra,"")},aa=()=>hd;var Et="endpoints";function he(e){return typeof e!="object"||e==null?e:"ref"in e?`$${he(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(he).join(", ")})`:JSON.stringify(e,null,2)}var O=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var la={};cr(la,{aws:()=>ia,booleanEquals:()=>Kh,getAttr:()=>ca,isSet:()=>Yh,isValidHostLabel:()=>An,not:()=>Qh,parseURL:()=>Xh,stringEquals:()=>Zh,substring:()=>ew,uriEncode:()=>tw});var ia={};cr(ia,{getUserAgentPrefix:()=>aa,isVirtualHostableS3Bucket:()=>Ed,parseArn:()=>Jh,partition:()=>qh,setPartitionInfo:()=>wd,useDefaultPartitionInfo:()=>Wh});var jh=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Rn=e=>jh.test(e)||e.startsWith("[")&&e.endsWith("]");var Hh=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),An=(e,t=!1)=>{if(!t)return Hh.test(e);let s=e.split(".");for(let o of s)if(!An(o))return!1;return!0};var Ed=(e,t=!1)=>{if(t){for(let s of e.split("."))if(!Ed(s))return!1;return!0}return!(!An(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Rn(e))};var Jh=e=>{let t=e.split(":");if(t.length<6)return null;let[s,o,n,r,a,...i]=t;return s!=="arn"||o===""||n===""||i[0]===""?null:{partition:o,service:n,region:r,accountId:a,resourceId:i[0].includes("/")?i[0].split("/"):i}};var Kh=(e,t)=>e===t;var gd=e=>{let t=e.split("."),s=[];for(let o of t){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new O(`Path: '${e}' does not end with ']'`);let r=o.slice(n+1,-1);if(Number.isNaN(parseInt(r)))throw new O(`Invalid array index: '${r}' in path: '${e}'`);n!==0&&s.push(o.slice(0,n)),s.push(r)}else s.push(o)}return s};var ca=(e,t)=>gd(t).reduce((s,o)=>{if(typeof s!="object")throw new O(`Index '${o}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(s)?s[parseInt(o)]:s[o]},e);var Yh=e=>e!=null;var Qh=e=>!e;var xd;(function(e){e.HEADER="header",e.QUERY="query"})(xd||(xd={}));var bd;(function(e){e.AAAA="AAAA",e.A="A"})(bd||(bd={}));var Os;(function(e){e.HTTP="http",e.HTTPS="https"})(Os||(Os={}));var Id;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Id||(Id={}));var da={[Os.HTTP]:80,[Os.HTTPS]:443},Xh=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:p,port:u,protocol:f="",path:h="",query:E={}}=e,Re=new URL(`${f}//${p}${u?`:${u}`:""}${h}`);return Re.search=Object.entries(E).map(([ei,Se])=>`${ei}=${Se}`).join("&"),Re}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let s=t.href,{host:o,hostname:n,pathname:r,protocol:a,search:i}=t;if(i)return null;let c=a.slice(0,-1);if(!Object.values(Os).includes(c))return null;let d=Rn(n),l=s.includes(`${o}:${da[c]}`)||typeof e=="string"&&e.includes(`${o}:${da[c]}`),m=`${o}${l?`:${da[c]}`:""}`;return{scheme:c,authority:m,path:r,normalizedPath:r.endsWith("/")?r:`${r}/`,isIp:d}};var Zh=(e,t)=>e===t;var ew=(e,t,s,o)=>t>=s||e.length<s?null:o?e.substring(e.length-s,e.length-t):e.substring(t,s);var tw=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Pn=(e,t)=>{let s=[],o={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let r=e.indexOf("{",n);if(r===-1){s.push(e.slice(n));break}s.push(e.slice(n,r));let a=e.indexOf("}",r);if(a===-1){s.push(e.slice(r));break}e[r+1]==="{"&&e[a+1]==="}"&&(s.push(e.slice(r+1,a)),n=a+2);let i=e.substring(r+1,a);if(i.includes("#")){let[c,d]=i.split("#");s.push(ca(o[c],d))}else s.push(o[i]);n=a+1}return s.join("")};var Sd=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var zt=(e,t,s)=>{if(typeof e=="string")return Pn(e,s);if(e.fn)return On(e,s);if(e.ref)return Sd(e,s);throw new O(`'${t}': ${String(e)} is not a string, function or reference.`)};var On=({fn:e,argv:t},s)=>{let o=t.map(n=>["boolean","number"].includes(typeof n)?n:zt(n,"arg",s));return e.split(".").reduce((n,r)=>n[r],la)(...o)};var Cd=({assign:e,...t},s)=>{var n,r;if(e&&e in s.referenceRecord)throw new O(`'${e}' is already defined in Reference Record.`);let o=On(t,s);return(r=(n=s.logger)==null?void 0:n.debug)==null||r.call(n,Et,`evaluateCondition: ${he(t)} = ${he(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}};var Ns=(e=[],t)=>{var o,n;let s={};for(let r of e){let{result:a,toAssign:i}=Cd(r,{...t,referenceRecord:{...t.referenceRecord,...s}});if(!a)return{result:a};i&&(s[i.name]=i.value,(n=(o=t.logger)==null?void 0:o.debug)==null||n.call(o,Et,`assign: ${i.name} := ${he(i.value)}`))}return{result:!0,referenceRecord:s}};var vd=(e,t)=>Object.entries(e).reduce((s,[o,n])=>({...s,[o]:n.map(r=>{let a=zt(r,"Header value entry",t);if(typeof a!="string")throw new O(`Header '${o}' value '${a}' is not a string`);return a})}),{});var ma=(e,t)=>{if(Array.isArray(e))return e.map(s=>ma(s,t));switch(typeof e){case"string":return Pn(e,t);case"object":if(e===null)throw new O(`Unexpected endpoint property: ${e}`);return Nn(e,t);case"boolean":return e;default:throw new O(`Unexpected endpoint property type: ${typeof e}`)}};var Nn=(e,t)=>Object.entries(e).reduce((s,[o,n])=>({...s,[o]:ma(n,t)}),{});var _d=(e,t)=>{let s=zt(e,"Endpoint URL",t);if(typeof s=="string")try{return new URL(s)}catch(o){throw console.error(`Failed to construct URL with ${s}`,o),o}throw new O(`Endpoint URL must be a string, got ${typeof s}`)};var Td=(e,t)=>{var l,m;let{conditions:s,endpoint:o}=e,{result:n,referenceRecord:r}=Ns(s,t);if(!n)return;let a={...t,referenceRecord:{...t.referenceRecord,...r}},{url:i,properties:c,headers:d}=o;return(m=(l=t.logger)==null?void 0:l.debug)==null||m.call(l,Et,`Resolving endpoint from template: ${he(o)}`),{...d!=null&&{headers:vd(d,a)},...c!=null&&{properties:Nn(c,a)},url:_d(i,a)}};var Rd=(e,t)=>{let{conditions:s,error:o}=e,{result:n,referenceRecord:r}=Ns(s,t);if(n)throw new O(zt(o,"Error",{...t,referenceRecord:{...t.referenceRecord,...r}}))};var Ad=(e,t)=>{let{conditions:s,rules:o}=e,{result:n,referenceRecord:r}=Ns(s,t);if(n)return Dn(o,{...t,referenceRecord:{...t.referenceRecord,...r}})};var Dn=(e,t)=>{for(let s of e)if(s.type==="endpoint"){let o=Td(s,t);if(o)return o}else if(s.type==="error")Rd(s,t);else if(s.type==="tree"){let o=Ad(s,t);if(o)return o}else throw new O(`Unknown endpoint rule: ${s}`);throw new O("Rules evaluation failed")};var et=(e,t)=>{var d,l,m,p,u;let{endpointParams:s,logger:o}=t,{parameters:n,rules:r}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,Et,`Initial EndpointParams: ${he(s)}`);let a=Object.entries(n).filter(([,f])=>f.default!=null).map(([f,h])=>[f,h.default]);if(a.length>0)for(let[f,h]of a)s[f]=s[f]??h;let i=Object.entries(n).filter(([,f])=>f.required).map(([f])=>f);for(let f of i)if(s[f]==null)throw new O(`Missing required parameter: '${f}'`);let c=Dn(r,{endpointParams:s,logger:o,referenceRecord:{}});if((m=t.endpointParams)!=null&&m.Endpoint)try{let f=new URL(t.endpointParams.Endpoint),{protocol:h,port:E}=f;c.url.protocol=h,c.url.port=E}catch{}return(u=(p=t.logger)==null?void 0:p.debug)==null||u.call(p,Et,`Resolved endpoint: ${he(c)}`),c};var pa="user-agent",Mn="x-amz-user-agent",ua=" ",Pd=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var sw=e=>(t,s)=>async o=>{var p,u;let{request:n}=o;if(!R.isInstance(n))return t(o);let{headers:r}=n,a=((p=s==null?void 0:s.userAgent)==null?void 0:p.map(fa))||[],i=(await e.defaultUserAgentProvider()).map(fa),c=((u=e==null?void 0:e.customUserAgent)==null?void 0:u.map(fa))||[],d=aa(),l=(d?[d]:[]).concat([...i,...a,...c]).join(ua),m=[...i.filter(f=>f.startsWith("aws-sdk-")),...c].join(ua);return e.runtime!=="browser"?(m&&(r[Mn]=r[Mn]?`${r[pa]} ${m}`:m),r[pa]=l):r[Mn]=l,t({...o,request:n})},fa=([e,t])=>{let s=e.indexOf("/"),o=e.substring(0,s),n=e.substring(s+1);return o==="api"&&(n=n.toLowerCase()),[o,n,t].filter(r=>r&&r.length>0).map(r=>r==null?void 0:r.replace(Pd,"_")).join("/")},ow={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},tt=e=>({applyToStack:t=>{t.add(sw(e),ow)}});var Od=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"ssm"});var Nd={name:"@aws-sdk/client-ssm",description:"AWS SDK for JavaScript Ssm Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo ssm"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.321.1","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.321.1","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0",tslib:"^2.5.0",uuid:"^8.3.2"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-ssm",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-ssm"}};var ll=oi(dl());var ae=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,ae.prototype)}};var Ds=class extends ae{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Ds.prototype)}},Ms=class extends ae{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,Ms.prototype)}},zs=class extends ae{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,zs.prototype)}},ks=class extends ae{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,ks.prototype)}},Ls=class extends ae{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,Ls.prototype)}},$s=class extends ae{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,$s.prototype)}},Fs=class extends ae{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,Fs.prototype)}};var ml=async(e,t)=>{let s=Cl,o;return o=_l({...mE(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Sl(t,s,"/",void 0,o)};var pl=async(e,t)=>{let s=Cl,o;return o=_l({...pE(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Sl(t,s,"/",void 0,o)};var ul=async(e,t)=>{if(e.statusCode>=300)return aE(e,t);let s=await va(e.body,t),o={};return o=wE(s.AssumeRoleResult,t),{$metadata:xt(e),...o}},aE=async(e,t)=>{let s={...e,body:await vl(e.body,t)},o=Tl(e,s.body);switch(o){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await yl(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await hl(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await wl(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await El(s,t);default:let n=s.body;return Il({output:e,parsedBody:n.Error,errorCode:o})}};var fl=async(e,t)=>{if(e.statusCode>=300)return iE(e,t);let s=await va(e.body,t),o={};return o=EE(s.AssumeRoleWithWebIdentityResult,t),{$metadata:xt(e),...o}},iE=async(e,t)=>{let s={...e,body:await vl(e.body,t)},o=Tl(e,s.body);switch(o){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await yl(s,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await cE(s,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await dE(s,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await lE(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await hl(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await wl(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await El(s,t);default:let n=s.body;return Il({output:e,parsedBody:n.Error,errorCode:o})}};var yl=async(e,t)=>{let s=e.body,o=gE(s.Error,t),n=new Ds({$metadata:xt(e),...o});return x(n,s)},cE=async(e,t)=>{let s=e.body,o=xE(s.Error,t),n=new Fs({$metadata:xt(e),...o});return x(n,s)},dE=async(e,t)=>{let s=e.body,o=bE(s.Error,t),n=new Ls({$metadata:xt(e),...o});return x(n,s)};var lE=async(e,t)=>{let s=e.body,o=IE(s.Error,t),n=new $s({$metadata:xt(e),...o});return x(n,s)},hl=async(e,t)=>{let s=e.body,o=SE(s.Error,t),n=new Ms({$metadata:xt(e),...o});return x(n,s)},wl=async(e,t)=>{let s=e.body,o=CE(s.Error,t),n=new zs({$metadata:xt(e),...o});return x(n,s)},El=async(e,t)=>{let s=e.body,o=vE(s.Error,t),n=new ks({$metadata:xt(e),...o});return x(n,s)},mE=(e,t)=>{var o,n,r;let s={};if(e.RoleArn!=null&&(s.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(s.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=gl(e.PolicyArns,t);((o=e.PolicyArns)==null?void 0:o.length)===0&&(s.PolicyArns=[]),Object.entries(a).forEach(([i,c])=>{let d=`PolicyArns.${i}`;s[d]=c})}if(e.Policy!=null&&(s.Policy=e.Policy),e.DurationSeconds!=null&&(s.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=hE(e.Tags,t);((n=e.Tags)==null?void 0:n.length)===0&&(s.Tags=[]),Object.entries(a).forEach(([i,c])=>{let d=`Tags.${i}`;s[d]=c})}if(e.TransitiveTagKeys!=null){let a=yE(e.TransitiveTagKeys,t);((r=e.TransitiveTagKeys)==null?void 0:r.length)===0&&(s.TransitiveTagKeys=[]),Object.entries(a).forEach(([i,c])=>{let d=`TransitiveTagKeys.${i}`;s[d]=c})}return e.ExternalId!=null&&(s.ExternalId=e.ExternalId),e.SerialNumber!=null&&(s.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(s.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(s.SourceIdentity=e.SourceIdentity),s};var pE=(e,t)=>{var o;let s={};if(e.RoleArn!=null&&(s.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(s.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(s.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(s.ProviderId=e.ProviderId),e.PolicyArns!=null){let n=gl(e.PolicyArns,t);((o=e.PolicyArns)==null?void 0:o.length)===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([r,a])=>{let i=`PolicyArns.${r}`;s[i]=a})}return e.Policy!=null&&(s.Policy=e.Policy),e.DurationSeconds!=null&&(s.DurationSeconds=e.DurationSeconds),s};var gl=(e,t)=>{let s={},o=1;for(let n of e){if(n===null)continue;let r=uE(n,t);Object.entries(r).forEach(([a,i])=>{s[`member.${o}.${a}`]=i}),o++}return s},uE=(e,t)=>{let s={};return e.arn!=null&&(s.arn=e.arn),s},fE=(e,t)=>{let s={};return e.Key!=null&&(s.Key=e.Key),e.Value!=null&&(s.Value=e.Value),s},yE=(e,t)=>{let s={},o=1;for(let n of e)n!==null&&(s[`member.${o}`]=n,o++);return s},hE=(e,t)=>{let s={},o=1;for(let n of e){if(n===null)continue;let r=fE(n,t);Object.entries(r).forEach(([a,i])=>{s[`member.${o}.${a}`]=i}),o++}return s},xl=(e,t)=>{let s={};return e.AssumedRoleId!==void 0&&(s.AssumedRoleId=y(e.AssumedRoleId)),e.Arn!==void 0&&(s.Arn=y(e.Arn)),s},wE=(e,t)=>{let s={};return e.Credentials!==void 0&&(s.Credentials=bl(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(s.AssumedRoleUser=xl(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(s.PackedPolicySize=Mr(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(s.SourceIdentity=y(e.SourceIdentity)),s};var EE=(e,t)=>{let s={};return e.Credentials!==void 0&&(s.Credentials=bl(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(s.SubjectFromWebIdentityToken=y(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(s.AssumedRoleUser=xl(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(s.PackedPolicySize=Mr(e.PackedPolicySize)),e.Provider!==void 0&&(s.Provider=y(e.Provider)),e.Audience!==void 0&&(s.Audience=y(e.Audience)),e.SourceIdentity!==void 0&&(s.SourceIdentity=y(e.SourceIdentity)),s},bl=(e,t)=>{let s={};return e.AccessKeyId!==void 0&&(s.AccessKeyId=y(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(s.SecretAccessKey=y(e.SecretAccessKey)),e.SessionToken!==void 0&&(s.SessionToken=y(e.SessionToken)),e.Expiration!==void 0&&(s.Expiration=X(lc(e.Expiration))),s};var gE=(e,t)=>{let s={};return e.message!==void 0&&(s.message=y(e.message)),s};var xE=(e,t)=>{let s={};return e.message!==void 0&&(s.message=y(e.message)),s},bE=(e,t)=>{let s={};return e.message!==void 0&&(s.message=y(e.message)),s};var IE=(e,t)=>{let s={};return e.message!==void 0&&(s.message=y(e.message)),s},SE=(e,t)=>{let s={};return e.message!==void 0&&(s.message=y(e.message)),s},CE=(e,t)=>{let s={};return e.message!==void 0&&(s.message=y(e.message)),s},vE=(e,t)=>{let s={};return e.message!==void 0&&(s.message=y(e.message)),s},xt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),_E=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),TE=(e,t)=>_E(e,t).then(s=>t.utf8Encoder(s)),Il=Ne(ae),Sl=async(e,t,s,o,n)=>{let{hostname:r,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:r,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return o!==void 0&&(d.hostname=o),n!==void 0&&(d.body=n),new R(d)},Cl={"content-type":"application/x-www-form-urlencoded"},va=(e,t)=>TE(e,t).then(s=>{if(s.length){let o=new ll.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});o.addEntity("#xD","\r"),o.addEntity("#10",`
`);let n=o.parse(s),r="#text",a=Object.keys(n)[0],i=n[a];return i[r]&&(i[a]=i[r],delete i[r]),zr(i)}return{}}),vl=async(e,t)=>{let s=await va(e,t);return s.Error&&(s.Error.message=s.Error.message??s.Error.Message),s},_l=e=>Object.entries(e).map(([t,s])=>ln(t)+"="+ln(s)).join("&"),Tl=(e,t)=>{var s;if(((s=t.Error)==null?void 0:s.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Us=class extends U{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,Us.getEndpointParameterInstructions())),this.middlewareStack.use(Ps(s));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return ml(t,s)}deserialize(t,s){return ul(t,s)}};var Bs=class extends U{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,Bs.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return pl(t,s)}deserialize(t,s){return fl(t,s)}};var Rl=(e,{stsClientCtor:t})=>As({...e,stsClientCtor:t});var Al=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Pl={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.321.1","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Ol="us-east-1",Nl=e=>typeof e!="function"?e===void 0?Ol:e:async()=>{try{return await e()}catch{return Ol}},_a=(e,t)=>{let s,o;return async(n,r)=>{if(o=n,!s){let{logger:i,region:c,requestHandler:d}=e;s=new t({logger:i,credentialDefaultProvider:()=>async()=>o,region:Nl(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:a}=await s.send(new Us(r));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${r.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},Ta=(e,t)=>{let s;return async o=>{if(!s){let{logger:r,region:a,requestHandler:i}=e;s=new t({logger:r,region:Nl(a||e.region),...i?{requestHandler:i}:{}})}let{Credentials:n}=await s.send(new Bs(o));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${o.RoleArn}`);return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration}}},Dl=e=>t=>e({roleAssumer:_a(t,t.stsClientCtor),roleAssumerWithWebIdentity:Ta(t,t.stsClientCtor),...t});var AE="AWS_ACCESS_KEY_ID",PE="AWS_SECRET_ACCESS_KEY",OE="AWS_SESSION_TOKEN",NE="AWS_CREDENTIAL_EXPIRATION",zn=()=>async()=>{let e=process.env[AE],t=process.env[PE],s=process.env[OE],o=process.env[NE];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...s&&{sessionToken:s},...o&&{expiration:new Date(o)}};throw new g("Unable to find environment variable credentials.")};import{homedir as DE}from"os";import{sep as ME}from"path";var Gs=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:s,HOMEDRIVE:o=`C:${ME}`}=process.env;return e||t||(s?`${o}${s}`:DE())};var Ra="AWS_PROFILE",zE="default",we=e=>e.profile||process.env[Ra]||zE;import{createHash as kE}from"crypto";import{join as LE}from"path";var kn=e=>{let s=kE("sha1").update(e).digest("hex");return LE(Gs(),".aws","sso","cache",`${s}.json`)};import{promises as $E}from"fs";var{readFile:FE}=$E,Ln=async e=>{let t=kn(e),s=await FE(t,"utf8");return JSON.parse(s)};import{join as UE}from"path";var BE="AWS_CONFIG_FILE",$n=()=>process.env[BE]||UE(Gs(),".aws","config");import{join as GE}from"path";var VE="AWS_SHARED_CREDENTIALS_FILE",Ml=()=>process.env[VE]||GE(Gs(),".aws","credentials");var zl=/^profile\s(["'])?([^\1]+)\1$/,kl=e=>Object.entries(e).filter(([t])=>zl.test(t)).reduce((t,[s,o])=>({...t,[zl.exec(s)[2]]:o}),{...e.default&&{default:e.default}});var qE=["__proto__","profile __proto__"],Oo=e=>{let t={},s;for(let o of e.split(/\r?\n/))if(o=o.split(/(^|\s)[;#]/)[0].trim(),o[0]==="["&&o[o.length-1]==="]"){if(s=o.substring(1,o.length-1),qE.includes(s))throw new Error(`Found invalid profile name "${s}"`)}else if(s){let r=o.indexOf("="),a=0,i=o.length-1;if(r!==-1&&r!==a&&r!==i){let[d,l]=[o.substring(0,r).trim(),o.substring(r+1).trim()];t[s]=t[s]||{},t[s][d]=l}}return t};import{promises as WE}from"fs";var{readFile:jE}=WE,Aa={},No=(e,t)=>((!Aa[e]||t!=null&&t.ignoreCache)&&(Aa[e]=jE(e,"utf8")),Aa[e]);var Ll=()=>({}),Fn=async(e={})=>{let{filepath:t=Ml(),configFilepath:s=$n()}=e,o=await Promise.all([No(s,{ignoreCache:e.ignoreCache}).then(Oo).then(kl).catch(Ll),No(t,{ignoreCache:e.ignoreCache}).then(Oo).catch(Ll)]);return{configFile:o[0],credentialsFile:o[1]}};var $l=/^sso-session\s(["'])?([^\1]+)\1$/,Fl=e=>Object.entries(e).filter(([t])=>$l.test(t)).reduce((t,[s,o])=>({...t,[$l.exec(s)[2]]:o}),{});var HE=()=>({}),Un=async(e={})=>No(e.configFilepath??$n()).then(Oo).then(Fl).catch(HE);var Ul=(...e)=>{let t={};for(let s of e)for(let[o,n]of Object.entries(s))t[o]!==void 0?Object.assign(t[o],n):t[o]=n;return t};var Lt=async e=>{let t=await Fn(e);return Ul(t.configFile,t.credentialsFile)};import{parse as YE}from"url";import{Buffer as JE}from"buffer";import{request as KE}from"http";function bt(e){return new Promise((t,s)=>{var n;let o=KE({method:"GET",...e,hostname:(n=e.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});o.on("error",r=>{s(Object.assign(new oe("Unable to connect to instance metadata service"),r)),o.destroy()}),o.on("timeout",()=>{s(new oe("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",r=>{let{statusCode:a=400}=r;(a<200||300<=a)&&(s(Object.assign(new oe("Error response received from instance metadata service"),{statusCode:a})),o.destroy());let i=[];r.on("data",c=>{i.push(c)}),r.on("end",()=>{t(JE.concat(i)),o.destroy()})}),o.end()})}var Bn=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Gn=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Vn=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var Do=(e,t)=>{let s=e();for(let o=0;o<t;o++)s=s.catch(e);return s};var Mo="AWS_CONTAINER_CREDENTIALS_FULL_URI",zo="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Bl="AWS_CONTAINER_AUTHORIZATION_TOKEN",qn=(e={})=>{let{timeout:t,maxRetries:s}=Vn(e);return()=>Do(async()=>{let o=await tg(),n=JSON.parse(await QE(t,o));if(!Bn(n))throw new g("Invalid response received from instance metadata service.");return Gn(n)},s)},QE=async(e,t)=>(process.env[Bl]&&(t.headers={...t.headers,Authorization:process.env[Bl]}),(await bt({...t,timeout:e})).toString()),XE="169.254.170.2",ZE={localhost:!0,"127.0.0.1":!0},eg={"http:":!0,"https:":!0},tg=async()=>{if(process.env[zo])return{hostname:XE,path:process.env[zo]};if(process.env[Mo]){let e=YE(process.env[Mo]);if(!e.hostname||!(e.hostname in ZE))throw new g(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in eg))throw new g(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new g(`The container metadata credential provider cannot be used unless the ${zo} or ${Mo} environment variable is set`,!1)};var Gl=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new g(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var Vl=(e,{preferredFile:t="config",...s}={})=>async()=>{let o=we(s),{configFile:n,credentialsFile:r}=await Fn(s),a=r[o]||{},i=n[o]||{},c=t==="config"?{...a,...i}:{...i,...a};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new g(d.message||`Cannot load config for profile ${o} in SDK configuration files with getter: ${e}`)}};var sg=e=>typeof e=="function",ql=e=>sg(e)?async()=>await e():jc(e);var S=({environmentVariableSelector:e,configFileSelector:t,default:s},o={})=>Mt(En(Gl(e),Vl(t,o),ql(s)));var ko;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(ko||(ko={}));var og="AWS_EC2_METADATA_SERVICE_ENDPOINT",ng="ec2_metadata_service_endpoint",Wl={environmentVariableSelector:e=>e[og],configFileSelector:e=>e[ng],default:void 0};var $t;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})($t||($t={}));var rg="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",ag="ec2_metadata_service_endpoint_mode",jl={environmentVariableSelector:e=>e[rg],configFileSelector:e=>e[ag],default:$t.IPv4};var Lo=async()=>j(await ig()||await cg()),ig=async()=>S(Wl)(),cg=async()=>{let e=await S(jl)();switch(e){case $t.IPv4:return ko.IPv4;case $t.IPv6:return ko.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values($t)}`)}};var dg="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Pa=(e,t)=>{let s=300+Math.floor(Math.random()*300),o=new Date(Date.now()+s*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+dg);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:o}};var Hl=(e,t={})=>{let s=(t==null?void 0:t.logger)||console,o;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=Pa(n,s))}catch(r){if(o)s.warn("Credential renew failed: ",r),n=Pa(o,s);else throw r}return o=n,n}};var Jl="/latest/meta-data/iam/security-credentials/",lg="/latest/api/token",Wn=(e={})=>Hl(mg(e),{logger:e.logger}),mg=e=>{let t=!1,{timeout:s,maxRetries:o}=Vn(e),n=async(r,a)=>{let i=(await Do(async()=>{let c;try{c=await ug(a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},r)).trim();return Do(async()=>{let c;try{c=await fg(i,a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},r)};return async()=>{let r=await Lo();if(t)return n(o,{...r,timeout:s});{let a;try{a=(await pg({...r,timeout:s})).toString()}catch(i){if((i==null?void 0:i.statusCode)===400)throw Object.assign(i,{message:"EC2 Metadata token request returned error"});return(i.message==="TimeoutError"||[403,404,405].includes(i.statusCode))&&(t=!0),n(o,{...r,timeout:s})}return n(o,{...r,headers:{"x-aws-ec2-metadata-token":a},timeout:s})}}},pg=async e=>bt({...e,path:lg,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),ug=async e=>(await bt({...e,path:Jl})).toString(),fg=async(e,t)=>{let s=JSON.parse((await bt({...t,path:Jl+e})).toString());if(!Bn(s))throw new g("Invalid response received from instance metadata service.");return Gn(s)};var Kl=(e,t)=>{let s={EcsContainer:qn,Ec2InstanceMetadata:Wn,Environment:zn};if(e in s)return s[e]();throw new g(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var Yl=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(yg(e)||hg(e)),yg=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",hg=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",Ql=async(e,t,s,o={})=>{let n=t[e];if(!s.roleAssumer)throw new g(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:r}=n;if(r&&r in o)throw new g(`Detected a cycle attempting to resolve credentials for profile ${we(s)}. Profiles visited: `+Object.keys(o).join(", "),!1);let a=r?jn(r,t,s,{...o,[r]:!0}):Kl(n.credential_source,e)(),i={RoleArn:n.role_arn,RoleSessionName:n.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:n.external_id},{mfa_serial:c}=n;if(c){if(!s.mfaCodeProvider)throw new g(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);i.SerialNumber=c,i.TokenCode=await s.mfaCodeProvider(c)}let d=await a;return s.roleAssumer(d,i)};import{exec as wg}from"child_process";import{promisify as Eg}from"util";var Xl=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Zl=async(e,t)=>{let s=t[e];if(t[e]){let o=s.credential_process;if(o!==void 0){let n=Eg(wg);try{let{stdout:r}=await n(o),a;try{a=JSON.parse(r.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Xl(e,a)}catch(r){throw new g(r.message)}}else throw new g(`Profile ${e} did not contain credential_process.`)}else throw new g(`Profile ${e} could not be found in shared credentials file.`)};var Hn=(e={})=>async()=>{let t=await Lt(e);return Zl(we(e),t)};var em=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",tm=async(e,t)=>Hn({...e,profile:t})();var $o=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var ve=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,ve.prototype)}};var Vs=class extends ve{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Vs.prototype)}},qs=class extends ve{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,qs.prototype)}},Ws=class extends ve{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Ws.prototype)}},js=class extends ve{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,js.prototype)}},sm=e=>({...e,...e.accessToken&&{accessToken:Nt}}),gg=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Nt},...e.sessionToken&&{sessionToken:Nt}}),om=e=>({...e,...e.roleCredentials&&{roleCredentials:gg(e.roleCredentials)}});var nm=async(e,t)=>{let{hostname:s,protocol:o="https",port:n,path:r}=await t.endpoint(),a=z({},Rg,{"x-amz-sso_bearer_token":e.accessToken}),i=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}/federation/credentials`,c=z({role_name:[,X(e.roleName,"roleName")],account_id:[,X(e.accountId,"accountId")]}),d;return new R({protocol:o,hostname:s,port:n,method:"GET",headers:a,path:i,query:c,body:d})};var rm=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return xg(e,t);let s=z({$metadata:Fo(e)}),o=X(dn(await am(e.body,t)),"body"),n=A(o,{roleCredentials:I});return Object.assign(s,n),s},xg=async(e,t)=>{let s={...e,body:await Ag(e.body,t)},o=Pg(e,s.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ig(s,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Sg(s,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Cg(s,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await vg(s,t);default:let n=s.body;return bg({output:e,parsedBody:n,errorCode:o})}};var bg=Ne(ve),Ig=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{message:y});Object.assign(s,n);let r=new Vs({$metadata:Fo(e),...s});return x(r,e.body)},Sg=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{message:y});Object.assign(s,n);let r=new qs({$metadata:Fo(e),...s});return x(r,e.body)},Cg=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{message:y});Object.assign(s,n);let r=new Ws({$metadata:Fo(e),...s});return x(r,e.body)},vg=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{message:y});Object.assign(s,n);let r=new js({$metadata:Fo(e),...s});return x(r,e.body)},Fo=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),_g=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Tg=(e,t)=>_g(e,t).then(s=>t.utf8Encoder(s)),Rg=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),am=(e,t)=>Tg(e,t).then(s=>s.length?JSON.parse(s):{}),Ag=async(e,t)=>{let s=await am(e,t);return s.message=s.message??s.Message,s},Pg=(e,t)=>{let s=(r,a)=>Object.keys(r).find(i=>i.toLowerCase()===a.toLowerCase()),o=r=>{let a=r;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},n=s(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)};var Hs=class extends U{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,Hs.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:sm,outputFilterSensitiveLog:om},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return nm(t,s)}deserialize(t,s){return rm(t,s)}};var im=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var cm={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};import{Buffer as Ng}from"buffer";import{createHash as Dg,createHmac as Mg}from"crypto";var Ee=class{constructor(t,s){this.algorithmIdentifier=t,this.secret=s,this.reset()}update(t,s){this.hash.update(Ye(dm(t,s)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?Mg(this.algorithmIdentifier,dm(this.secret)):Dg(this.algorithmIdentifier)}};function dm(e,t){return Ng.isBuffer(e)?e:typeof e=="string"?Rs(e,t):ArrayBuffer.isView(e)?qt(e.buffer,e.byteOffset,e.byteLength):qt(e)}function Oa(e){let t=[];for(let s of Object.keys(e).sort()){let o=e[s];if(s=Xe(s),Array.isArray(o))for(let n=0,r=o.length;n<r;n++)t.push(`${s}=${Xe(o[n])}`);else{let n=s;(o||typeof o=="string")&&(n+=`=${Xe(o)}`),t.push(n)}}return t.join("&")}import{Agent as kg,request as Lg}from"http";import{Agent as $g,request as Fg}from"https";var lm=["ECONNRESET","EPIPE","ETIMEDOUT"];var Na=e=>{let t={};for(let s of Object.keys(e)){let o=e[s];t[s]=Array.isArray(o)?o.join(","):o}return t};var mm=(e,t,s=0)=>{s&&e.on("socket",o=>{if(o.connecting){let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${s} ms`),{name:"TimeoutError"}))},s);o.on("connect",()=>{clearTimeout(n)})}})};var pm=(e,t,s=0)=>{e.setTimeout(s,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${s} ms`),{name:"TimeoutError"}))})};import{Readable as zg}from"stream";function Da(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{um(e,t.body)}):um(e,t.body)}function um(e,t){t instanceof zg?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var ge=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((s,o)=>{typeof t=="function"?t().then(n=>{s(this.resolveDefaultConfig(n))}).catch(o):s(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:s,connectionTimeout:o,socketTimeout:n,httpAgent:r,httpsAgent:a}=t||{},i=!0,c=50;return{connectionTimeout:o,requestTimeout:s??n,httpAgent:r||new kg({keepAlive:i,maxSockets:c}),httpsAgent:a||new $g({keepAlive:i,maxSockets:c})}}destroy(){var t,s,o,n;(s=(t=this.config)==null?void 0:t.httpAgent)==null||s.destroy(),(n=(o=this.config)==null?void 0:o.httpsAgent)==null||n.destroy()}async handle(t,{abortSignal:s}={}){return this.config||(this.config=await this.configProvider),new Promise((o,n)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(s!=null&&s.aborted){let l=new Error("Request aborted");l.name="AbortError",n(l);return}let r=t.protocol==="https:",a=Oa(t.query||{}),i={headers:t.headers,host:t.hostname,method:t.method,path:a?`${t.path}?${a}`:t.path,port:t.port,agent:r?this.config.httpsAgent:this.config.httpAgent},d=(r?Fg:Lg)(i,l=>{let m=new ke({statusCode:l.statusCode||-1,headers:Na(l.headers),body:l});o({response:m})});d.on("error",l=>{lm.includes(l.code)?n(Object.assign(l,{name:"TimeoutError"})):n(l)}),mm(d,n,this.config.connectionTimeout),pm(d,n,this.config.requestTimeout),s&&(s.onabort=()=>{d.abort();let l=new Error("Request aborted");l.name="AbortError",n(l)}),Da(d,t)})}};var Ma=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(s=>s!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let s of this.sessions)s===t&&(s.destroyed||s.destroy())}};import{Writable as Ug}from"stream";var Jn=class extends Ug{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,s,o){this.bufferedBytes.push(t),o()}};var st=e=>new Promise((t,s)=>{let o=new Jn;e.pipe(o),e.on("error",n=>{o.end(),s(n)}),o.on("error",s),o.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));t(n)})});import{fstatSync as Bg,lstatSync as Gg}from"fs";var ot=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return Gg(e.path).size;if(typeof e.fd=="number")return Bg(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};import{platform as Vg,release as qg}from"os";import{env as ym,versions as Wg}from"process";var fm=()=>{try{return typeof k=="function"&&typeof module<"u"&&k("aws-crt")?["md/crt-avail"]:null}catch{return null}};var jg="AWS_SDK_UA_APP_ID",Hg="sdk-ua-app-id",nt=({serviceId:e,clientVersion:t})=>{let s=[["aws-sdk-js",t],[`os/${Vg()}`,qg()],["lang/js"],["md/nodejs",`${Wg.node}`]],o=fm();o&&s.push(o),e&&s.push([`api/${e}`,t]),ym.AWS_EXECUTION_ENV&&s.push([`exec-env/${ym.AWS_EXECUTION_ENV}`]);let n=S({environmentVariableSelector:a=>a[jg],configFileSelector:a=>a[Hg],default:void 0})(),r;return async()=>{if(!r){let a=await n;r=a?[...s,[`app/${a}`]]:[...s]}return r}};var Jg=/^[A-Za-z0-9+/]*={0,2}$/,rt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Jg.exec(e))throw new TypeError("Invalid base64 string.");let t=Rs(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var at=e=>qt(e.buffer,e.byteOffset,e.byteLength).toString("base64");var Sm="required",It="fn",St="argv",Js="ref",za="PartitionResult",it="tree",Uo="error",Bo="endpoint",hm={[Sm]:!1,type:"String"},wm={[Sm]:!0,default:!1,type:"Boolean"},Cm={[Js]:"Endpoint"},vm={[It]:"booleanEquals",[St]:[{[Js]:"UseFIPS"},!0]},_m={[It]:"booleanEquals",[St]:[{[Js]:"UseDualStack"},!0]},ct={},Em={[It]:"booleanEquals",[St]:[!0,{[It]:"getAttr",[St]:[{[Js]:za},"supportsFIPS"]}]},gm={[It]:"booleanEquals",[St]:[!0,{[It]:"getAttr",[St]:[{[Js]:za},"supportsDualStack"]}]},xm=[Cm],bm=[vm],Im=[_m],Kg={version:"1.0",parameters:{Region:hm,UseDualStack:wm,UseFIPS:wm,Endpoint:hm},rules:[{conditions:[{[It]:"aws.partition",[St]:[{[Js]:"Region"}],assign:za}],type:it,rules:[{conditions:[{[It]:"isSet",[St]:xm},{[It]:"parseURL",[St]:xm,assign:"url"}],type:it,rules:[{conditions:bm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Uo},{type:it,rules:[{conditions:Im,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Uo},{endpoint:{url:Cm,properties:ct,headers:ct},type:Bo}]}]},{conditions:[vm,_m],type:it,rules:[{conditions:[Em,gm],type:it,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:Bo}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Uo}]},{conditions:bm,type:it,rules:[{conditions:[Em],type:it,rules:[{type:it,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:Bo}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Uo}]},{conditions:Im,type:it,rules:[{conditions:[gm],type:it,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:Bo}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Uo}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:Bo}]}]},Tm=Kg;var Rm=(e,t={})=>et(Tm,{endpointParams:e,logger:t.logger});var Am=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??rt,base64Encoder:(e==null?void 0:e.base64Encoder)??at,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Rm,logger:(e==null?void 0:e.logger)??new me,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ye,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Qe});var Pm="AWS_EXECUTION_ENV",ka="AWS_REGION",La="AWS_DEFAULT_REGION",Om="AWS_EC2_METADATA_DISABLED",Nm=["in-region","cross-region","mobile","standard","legacy"],Dm="/latest/meta-data/placement/region";var Yg="AWS_DEFAULTS_MODE",Qg="defaults_mode",Mm={environmentVariableSelector:e=>e[Yg],configFileSelector:e=>e[Qg],default:"legacy"};var dt=({region:e=S(ue),defaultsMode:t=S(Mm)}={})=>Mt(async()=>{let s=typeof t=="function"?await t():t;switch(s==null?void 0:s.toLowerCase()){case"auto":return Xg(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(s==null?void 0:s.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Nm.join(", ")}, got ${s}`)}}),Xg=async e=>{if(e){let t=typeof e=="function"?await e():e,s=await Zg();return s?t===s?"in-region":"cross-region":"standard"}return"standard"},Zg=async()=>{if(process.env[Pm]&&(process.env[ka]||process.env[La]))return process.env[ka]??process.env[La];if(!process.env[Om])try{let e=await Lo();return(await bt({...e,path:Dm})).toString()}catch{}};var zm=e=>{Me(process.version);let t=dt(e),s=()=>t().then(De),o=Am(e);return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ot,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??nt({serviceId:o.serviceId,clientVersion:cm.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??S(je),region:(e==null?void 0:e.region)??S(ue,Fe),requestHandler:(e==null?void 0:e.requestHandler)??new ge(s),retryMode:(e==null?void 0:e.retryMode)??S({...Je,default:async()=>(await s()).retryMode||fe}),sha256:(e==null?void 0:e.sha256)??Ee.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??st,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??S(Le),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??S($e)}};var Kn=class extends pe{constructor(t){let s=zm(t),o=im(s),n=Ue(o),r=ze(n),a=He(r),i=a,c=Ze(i);super(c),this.config=c,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Be(this.config)),this.middlewareStack.use(Ge(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(qe(this.config)),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}};var Ks="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var B=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,B.prototype)}};var Ys=class extends B{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Ys.prototype),this.error=t.error,this.error_description=t.error_description}},Qs=class extends B{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Qs.prototype),this.error=t.error,this.error_description=t.error_description}},Xs=class extends B{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Xs.prototype),this.error=t.error,this.error_description=t.error_description}},Zs=class extends B{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Zs.prototype),this.error=t.error,this.error_description=t.error_description}},eo=class extends B{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,eo.prototype),this.error=t.error,this.error_description=t.error_description}},to=class extends B{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,to.prototype),this.error=t.error,this.error_description=t.error_description}},so=class extends B{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,so.prototype),this.error=t.error,this.error_description=t.error_description}},oo=class extends B{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,oo.prototype),this.error=t.error,this.error_description=t.error_description}},no=class extends B{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,no.prototype),this.error=t.error,this.error_description=t.error_description}},ro=class extends B{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,ro.prototype),this.error=t.error,this.error_description=t.error_description}},ao=class extends B{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,ao.prototype),this.error=t.error,this.error_description=t.error_description}};var km=async(e,t)=>{let{hostname:s,protocol:o="https",port:n,path:r}=await t.endpoint(),a={"content-type":"application/json"},i=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}/token`,c;return c=JSON.stringify(A(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>I(d)})),new R({protocol:o,hostname:s,port:n,method:"POST",headers:a,path:i,body:c})};var Lm=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ex(e,t);let s=z({$metadata:xe(e)}),o=X(dn(await $m(e.body,t)),"body"),n=A(o,{accessToken:y,expiresIn:Oe,idToken:y,refreshToken:y,tokenType:y});return Object.assign(s,n),s},ex=async(e,t)=>{let s={...e,body:await yx(e.body,t)},o=hx(e,s.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await sx(s,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await ox(s,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await nx(s,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await rx(s,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await ax(s,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await ix(s,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await cx(s,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await dx(s,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await lx(s,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await mx(s,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await px(s,t);default:let n=s.body;return tx({output:e,parsedBody:n,errorCode:o})}};var tx=Ne(B),sx=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new Ys({$metadata:xe(e),...s});return x(r,e.body)},ox=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new Qs({$metadata:xe(e),...s});return x(r,e.body)},nx=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new Xs({$metadata:xe(e),...s});return x(r,e.body)},rx=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new Zs({$metadata:xe(e),...s});return x(r,e.body)},ax=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new eo({$metadata:xe(e),...s});return x(r,e.body)};var ix=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new to({$metadata:xe(e),...s});return x(r,e.body)},cx=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new so({$metadata:xe(e),...s});return x(r,e.body)},dx=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new oo({$metadata:xe(e),...s});return x(r,e.body)},lx=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new no({$metadata:xe(e),...s});return x(r,e.body)},mx=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new ro({$metadata:xe(e),...s});return x(r,e.body)},px=async(e,t)=>{let s=z({}),o=e.body,n=A(o,{error:y,error_description:y});Object.assign(s,n);let r=new ao({$metadata:xe(e),...s});return x(r,e.body)},xe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ux=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),fx=(e,t)=>ux(e,t).then(s=>t.utf8Encoder(s));var $m=(e,t)=>fx(e,t).then(s=>s.length?JSON.parse(s):{}),yx=async(e,t)=>{let s=await $m(e,t);return s.message=s.message??s.Message,s},hx=(e,t)=>{let s=(r,a)=>Object.keys(r).find(i=>i.toLowerCase()===a.toLowerCase()),o=r=>{let a=r;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},n=s(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)};var io=class extends U{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,io.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return km(t,s)}deserialize(t,s){return Lm(t,s)}};var Fm=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Um={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var Jm="required",Ct="fn",vt="argv",co="ref",$a="PartitionResult",lt="tree",Go="error",Vo="endpoint",Bm={[Jm]:!1,type:"String"},Gm={[Jm]:!0,default:!1,type:"Boolean"},Km={[co]:"Endpoint"},Ym={[Ct]:"booleanEquals",[vt]:[{[co]:"UseFIPS"},!0]},Qm={[Ct]:"booleanEquals",[vt]:[{[co]:"UseDualStack"},!0]},mt={},Vm={[Ct]:"booleanEquals",[vt]:[!0,{[Ct]:"getAttr",[vt]:[{[co]:$a},"supportsFIPS"]}]},qm={[Ct]:"booleanEquals",[vt]:[!0,{[Ct]:"getAttr",[vt]:[{[co]:$a},"supportsDualStack"]}]},Wm=[Km],jm=[Ym],Hm=[Qm],Ex={version:"1.0",parameters:{Region:Bm,UseDualStack:Gm,UseFIPS:Gm,Endpoint:Bm},rules:[{conditions:[{[Ct]:"aws.partition",[vt]:[{[co]:"Region"}],assign:$a}],type:lt,rules:[{conditions:[{[Ct]:"isSet",[vt]:Wm},{[Ct]:"parseURL",[vt]:Wm,assign:"url"}],type:lt,rules:[{conditions:jm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Go},{type:lt,rules:[{conditions:Hm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Go},{endpoint:{url:Km,properties:mt,headers:mt},type:Vo}]}]},{conditions:[Ym,Qm],type:lt,rules:[{conditions:[Vm,qm],type:lt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},type:Vo}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Go}]},{conditions:jm,type:lt,rules:[{conditions:[Vm],type:lt,rules:[{type:lt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:mt,headers:mt},type:Vo}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Go}]},{conditions:Hm,type:lt,rules:[{conditions:[qm],type:lt,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},type:Vo}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Go}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:mt,headers:mt},type:Vo}]}]},Xm=Ex;var Zm=(e,t={})=>et(Xm,{endpointParams:e,logger:t.logger});var ep=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??rt,base64Encoder:(e==null?void 0:e.base64Encoder)??at,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Zm,logger:(e==null?void 0:e.logger)??new me,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ye,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Qe});var tp=e=>{Me(process.version);let t=dt(e),s=()=>t().then(De),o=ep(e);return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ot,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??nt({serviceId:o.serviceId,clientVersion:Um.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??S(je),region:(e==null?void 0:e.region)??S(ue,Fe),requestHandler:(e==null?void 0:e.requestHandler)??new ge(s),retryMode:(e==null?void 0:e.retryMode)??S({...Je,default:async()=>(await s()).retryMode||fe}),sha256:(e==null?void 0:e.sha256)??Ee.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??st,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??S(Le),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??S($e)}};var Qn=class extends pe{constructor(t){let s=tp(t),o=Fm(s),n=Ue(o),r=ze(n),a=He(r),i=a,c=Ze(i);super(c),this.config=c,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Be(this.config)),this.middlewareStack.use(Ge(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(qe(this.config)),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}};var Fa={},sp=e=>{if(Fa[e])return Fa[e];let t=new Qn({region:e});return Fa[e]=t,t};var op=(e,t)=>sp(t).send(new io({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var Ua=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new ne(`Token is expired. ${Ks}`,!1)};var Ft=(e,t,s=!1)=>{if(typeof t>"u")throw new ne(`Value not present for '${e}' in SSO Token${s?". Cannot refresh":""}. ${Ks}`,!1)};import{promises as gx}from"fs";var{writeFile:xx}=gx,np=(e,t)=>{let s=kn(e),o=JSON.stringify(t,null,2);return xx(s,o)};var rp=new Date(0),ap=(e={})=>async()=>{let t=await Lt(e),s=we(e),o=t[s];if(o){if(!o.sso_session)throw new ne(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new ne(`Profile '${s}' could not be found in shared credentials file.`,!1);let n=o.sso_session,a=(await Un(e))[n];if(!a)throw new ne(`Sso session '${n}' could not be found in shared credentials file.`,!1);for(let u of["sso_start_url","sso_region"])if(!a[u])throw new ne(`Sso session '${n}' is missing required property '${u}'.`,!1);let i=a.sso_start_url,c=a.sso_region,d;try{d=await Ln(n)}catch{throw new ne(`The SSO session token associated with profile=${s} was not found or is invalid. ${Ks}`,!1)}Ft("accessToken",d.accessToken),Ft("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:m}=d,p={token:l,expiration:new Date(m)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-rp.getTime()<30*1e3)return Ua(p),p;Ft("clientId",d.clientId,!0),Ft("clientSecret",d.clientSecret,!0),Ft("refreshToken",d.refreshToken,!0);try{rp.setTime(Date.now());let u=await op(d,c);Ft("accessToken",u.accessToken),Ft("expiresIn",u.expiresIn);let f=new Date(Date.now()+u.expiresIn*1e3);try{await np(n,{...d,accessToken:u.accessToken,expiresAt:f.toISOString(),refreshToken:u.refreshToken})}catch{}return{token:u.accessToken,expiration:f}}catch{return Ua(p),p}};var Ix=15*60*1e3,qo=!1,Ba=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:s,ssoRegion:o,ssoRoleName:n,ssoClient:r,profile:a})=>{let i,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await ap({profile:a})();i={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new g(E.message,qo)}else try{i=await Ln(e)}catch{throw new g(`The SSO session associated with this profile is invalid. ${c}`,qo)}if(new Date(i.expiresAt).getTime()-Date.now()<=Ix)throw new g(`The SSO session associated with this profile has expired. ${c}`,qo);let{accessToken:d}=i,l=r||new Kn({region:o}),m;try{m=await l.send(new Hs({accountId:s,roleName:n,accessToken:d}))}catch(E){throw g.from(E,qo)}let{roleCredentials:{accessKeyId:p,secretAccessKey:u,sessionToken:f,expiration:h}={}}=m;if(!p||!u||!f||!h)throw new g("SSO returns an invalid temporary credential.",qo);return{accessKeyId:p,secretAccessKey:u,sessionToken:f,expiration:new Date(h)}};var Xn=e=>{let{sso_start_url:t,sso_account_id:s,sso_region:o,sso_role_name:n}=e;if(!t||!s||!o||!n)throw new g(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Zn=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:s,ssoRegion:o,ssoRoleName:n,ssoClient:r,ssoSession:a}=e,i=we(e);if(!t&&!s&&!o&&!n&&!a){let d=(await Lt(e))[i];if(!d)throw new g(`Profile ${i} was not found.`);if(!$o(d))throw new g(`Profile ${i} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let E=(await Un(e))[d.sso_session],Re=` configurations in profile ${i} and sso-session ${d.sso_session}`;if(o&&o!==E.sso_region)throw new g("Conflicting SSO region"+Re,!1);if(t&&t!==E.sso_start_url)throw new g("Conflicting SSO start_url"+Re,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:m,sso_region:p,sso_role_name:u,sso_session:f}=Xn(d);return Ba({ssoStartUrl:l,ssoSession:f,ssoAccountId:m,ssoRegion:p,ssoRoleName:u,ssoClient:r,profile:i})}else{if(!t||!s||!o||!n)throw new g('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Ba({ssoStartUrl:t,ssoSession:a,ssoAccountId:s,ssoRegion:o,ssoRoleName:n,ssoClient:r,profile:i})}};var ip=e=>{let{sso_start_url:t,sso_account_id:s,sso_session:o,sso_region:n,sso_role_name:r}=Xn(e);return Zn({ssoStartUrl:t,ssoAccountId:s,ssoSession:o,ssoRegion:n,ssoRoleName:r})()};var Ga=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Va=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});import{readFileSync as Sx}from"fs";var cp=e=>()=>{let{roleArn:t,roleSessionName:s,webIdentityToken:o,providerId:n,policyArns:r,policy:a,durationSeconds:i,roleAssumerWithWebIdentity:c}=e;if(!c)throw new g(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:n,PolicyArns:r,Policy:a,DurationSeconds:i})};var Cx="AWS_WEB_IDENTITY_TOKEN_FILE",vx="AWS_ROLE_ARN",_x="AWS_ROLE_SESSION_NAME",er=(e={})=>async()=>Tx(e),Tx=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[Cx],s=(e==null?void 0:e.roleArn)??process.env[vx],o=(e==null?void 0:e.roleSessionName)??process.env[_x];if(!t||!s)throw new g("Web identity configuration not specified");return cp({...e,webIdentityToken:Sx(t,{encoding:"ascii"}),roleArn:s,roleSessionName:o})()};var dp=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,lp=async(e,t)=>er({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var jn=async(e,t,s,o={})=>{let n=t[e];if(Object.keys(o).length>0&&Ga(n))return Va(n);if(Yl(n))return Ql(e,t,s,o);if(Ga(n))return Va(n);if(dp(n))return lp(n,s);if(em(n))return tm(s,e);if($o(n))return ip(n);throw new g(`Profile ${e} could not be found or parsed in shared credentials file.`)};var mp=(e={})=>async()=>{let t=await Lt(e);return jn(we(e),t,e)};var Rx="AWS_EC2_METADATA_DISABLED",pp=e=>process.env[zo]||process.env[Mo]?qn(e):process.env[Rx]?async()=>{throw new g("EC2 Instance Metadata Service access disabled")}:Wn(e);var lo=(e={})=>Mt(En(...e.profile||process.env[Ra]?[]:[zn()],Zn(e),mp(e),Hn(e),er(e),pp(e),async()=>{throw new g("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var bp="required",b="type",v="fn",_="argv",Ut="ref",jt="properties",Ht="headers";var Wa="PartitionResult",be="tree",Jt="booleanEquals",q="stringEquals",Ip="sigv4",Sp="us-east-1",Cp="sts",D="endpoint",vp="https://sts.{Region}.{PartitionResult#dnsSuffix}",Wo="error",ja="getAttr",up={[bp]:!1,[b]:"String"},qa={[bp]:!0,default:!1,[b]:"Boolean"},W={[Ut]:"Region"},_p={[Ut]:"UseFIPS"},Tp={[Ut]:"UseDualStack"},fp={[v]:"isSet",[_]:[{[Ut]:"Endpoint"}]},Rp={[Ut]:"Endpoint"},K={url:"https://sts.amazonaws.com",[jt]:{authSchemes:[{name:Ip,signingRegion:Sp,signingName:Cp}]},[Ht]:{}},_t={},yp={conditions:[{[v]:q,[_]:[W,"aws-global"]}],[D]:K,[b]:D},Ap={[v]:Jt,[_]:[_p,!0]},Pp={[v]:Jt,[_]:[Tp,!0]},hp={[v]:Jt,[_]:[!0,{[v]:ja,[_]:[{[Ut]:Wa},"supportsFIPS"]}]},Op={[Ut]:Wa},wp={[v]:Jt,[_]:[!0,{[v]:ja,[_]:[Op,"supportsDualStack"]}]},Ep={url:vp,[jt]:{},[Ht]:{}},Ax=[Rp],gp=[Ap],xp=[Pp],Px={version:"1.0",parameters:{Region:up,UseDualStack:qa,UseFIPS:qa,Endpoint:up,UseGlobalEndpoint:qa},rules:[{conditions:[{[v]:"aws.partition",[_]:[W],assign:Wa}],[b]:be,rules:[{conditions:[{[v]:Jt,[_]:[{[Ut]:"UseGlobalEndpoint"},!0]},{[v]:Jt,[_]:[_p,!1]},{[v]:Jt,[_]:[Tp,!1]},{[v]:"not",[_]:[fp]}],[b]:be,rules:[{conditions:[{[v]:q,[_]:[W,"ap-northeast-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"ap-south-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"ap-southeast-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"ap-southeast-2"]}],endpoint:K,[b]:D},yp,{conditions:[{[v]:q,[_]:[W,"ca-central-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"eu-central-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"eu-north-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"eu-west-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"eu-west-2"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"eu-west-3"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"sa-east-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,Sp]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"us-east-2"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"us-west-1"]}],endpoint:K,[b]:D},{conditions:[{[v]:q,[_]:[W,"us-west-2"]}],endpoint:K,[b]:D},{endpoint:{url:vp,[jt]:{authSchemes:[{name:Ip,signingRegion:"{Region}",signingName:Cp}]},[Ht]:_t},[b]:D}]},{conditions:[fp,{[v]:"parseURL",[_]:Ax,assign:"url"}],[b]:be,rules:[{conditions:gp,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[b]:Wo},{[b]:be,rules:[{conditions:xp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[b]:Wo},{endpoint:{url:Rp,[jt]:_t,[Ht]:_t},[b]:D}]}]},{conditions:[Ap,Pp],[b]:be,rules:[{conditions:[hp,wp],[b]:be,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[jt]:_t,[Ht]:_t},[b]:D}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[b]:Wo}]},{conditions:gp,[b]:be,rules:[{conditions:[hp],[b]:be,rules:[{[b]:be,rules:[{conditions:[{[v]:q,[_]:["aws-us-gov",{[v]:ja,[_]:[Op,"name"]}]}],endpoint:Ep,[b]:D},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[jt]:_t,[Ht]:_t},[b]:D}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[b]:Wo}]},{conditions:xp,[b]:be,rules:[{conditions:[wp],[b]:be,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[jt]:_t,[Ht]:_t},[b]:D}]},{error:"DualStack is enabled but this partition does not support DualStack",[b]:Wo}]},{[b]:be,rules:[yp,{endpoint:Ep,[b]:D}]}]}]},Np=Px;var Dp=(e,t={})=>et(Np,{endpointParams:e,logger:t.logger});var Mp=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??rt,base64Encoder:(e==null?void 0:e.base64Encoder)??at,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Dp,logger:(e==null?void 0:e.logger)??new me,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ye,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Qe});var zp=e=>{Me(process.version);let t=dt(e),s=()=>t().then(De),o=Mp(e);return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ot,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Dl(lo),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??nt({serviceId:o.serviceId,clientVersion:Pl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??S(je),region:(e==null?void 0:e.region)??S(ue,Fe),requestHandler:(e==null?void 0:e.requestHandler)??new ge(s),retryMode:(e==null?void 0:e.retryMode)??S({...Je,default:async()=>(await s()).retryMode||fe}),sha256:(e==null?void 0:e.sha256)??Ee.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??st,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??S(Le),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??S($e)}};var Kt=class extends pe{constructor(t){let s=zp(t),o=Al(s),n=Ue(o),r=ze(n),a=He(r),i=a,c=Rl(i,{stsClientCtor:Kt}),d=Ze(c);super(d),this.config=d,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Be(this.config)),this.middlewareStack.use(Ge(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(qe(this.config)),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}};var kp=(e,t)=>t?class extends e{constructor(o){super(o);for(let n of t)this.middlewareStack.use(n)}}:e,Ox=(e={},t)=>_a(e,kp(Kt,t)),Nx=(e={},t)=>Ta(e,kp(Kt,t)),tr=e=>t=>e({roleAssumer:Ox(t),roleAssumerWithWebIdentity:Nx(t),...t});var jp="required",_e="fn",Te="argv",uo="ref",Lp="isSet",Z="tree",mo="error",po="endpoint",Ha="PartitionResult",Ja="getAttr",$p={[jp]:!1,type:"String"},Fp={[jp]:!0,default:!1,type:"Boolean"},Up={[uo]:"Endpoint"},Hp={[_e]:"booleanEquals",[Te]:[{[uo]:"UseFIPS"},!0]},Jp={[_e]:"booleanEquals",[Te]:[{[uo]:"UseDualStack"},!0]},Ie={},Bp={[_e]:"booleanEquals",[Te]:[!0,{[_e]:Ja,[Te]:[{[uo]:Ha},"supportsFIPS"]}]},Kp={[uo]:Ha},Gp={[_e]:"booleanEquals",[Te]:[!0,{[_e]:Ja,[Te]:[Kp,"supportsDualStack"]}]},Vp=[Hp],qp=[Jp],Wp=[{[uo]:"Region"}],Dx={version:"1.0",parameters:{Region:$p,UseDualStack:Fp,UseFIPS:Fp,Endpoint:$p},rules:[{conditions:[{[_e]:Lp,[Te]:[Up]}],type:Z,rules:[{conditions:Vp,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:mo},{type:Z,rules:[{conditions:qp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:mo},{endpoint:{url:Up,properties:Ie,headers:Ie},type:po}]}]},{type:Z,rules:[{conditions:[{[_e]:Lp,[Te]:Wp}],type:Z,rules:[{conditions:[{[_e]:"aws.partition",[Te]:Wp,assign:Ha}],type:Z,rules:[{conditions:[Hp,Jp],type:Z,rules:[{conditions:[Bp,Gp],type:Z,rules:[{type:Z,rules:[{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ie,headers:Ie},type:po}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:mo}]},{conditions:Vp,type:Z,rules:[{conditions:[Bp],type:Z,rules:[{type:Z,rules:[{conditions:[{[_e]:"stringEquals",[Te]:["aws-us-gov",{[_e]:Ja,[Te]:[Kp,"name"]}]}],endpoint:{url:"https://ssm.{Region}.amazonaws.com",properties:Ie,headers:Ie},type:po},{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ie,headers:Ie},type:po}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:mo}]},{conditions:qp,type:Z,rules:[{conditions:[Gp],type:Z,rules:[{type:Z,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ie,headers:Ie},type:po}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:mo}]},{type:Z,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dnsSuffix}",properties:Ie,headers:Ie},type:po}]}]}]},{error:"Invalid Configuration: Missing Region",type:mo}]}]},Yp=Dx;var Qp=(e,t={})=>et(Yp,{endpointParams:e,logger:t.logger});var Xp=e=>({apiVersion:"2014-11-06",base64Decoder:(e==null?void 0:e.base64Decoder)??rt,base64Encoder:(e==null?void 0:e.base64Encoder)??at,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Qp,logger:(e==null?void 0:e.logger)??new me,serviceId:(e==null?void 0:e.serviceId)??"SSM",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ye,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Qe});var Zp=e=>{Me(process.version);let t=dt(e),s=()=>t().then(De),o=Xp(e);return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ot,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??tr(lo),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??nt({serviceId:o.serviceId,clientVersion:Nd.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??S(je),region:(e==null?void 0:e.region)??S(ue,Fe),requestHandler:(e==null?void 0:e.requestHandler)??new ge(s),retryMode:(e==null?void 0:e.retryMode)??S({...Je,default:async()=>(await s()).retryMode||fe}),sha256:(e==null?void 0:e.sha256)??Ee.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??st,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??S(Le),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??S($e)}};var sr=class extends pe{constructor(t){let s=Zp(t),o=Od(s),n=Ue(o),r=ze(n),a=He(r),i=a,c=As(i),d=Ze(c);super(d),this.config=d,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Be(this.config)),this.middlewareStack.use(Ge(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(qe(this.config)),this.middlewareStack.use(Ps(this.config)),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}};var eu=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"logs"});var tu={name:"@aws-sdk/client-cloudwatch-logs",description:"AWS SDK for JavaScript Cloudwatch Logs Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cloudwatch-logs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.321.1","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.321.1","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cloudwatch-logs",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cloudwatch-logs"}};var ut="fn",ft="argv",fo="ref";var su="String",Ya="PartitionResult",pt="tree",jo="error",Yt="endpoint",ou="stringEquals",nu={required:!0,default:!1,type:"Boolean"},Ka={[fo]:"Region"},ru={[fo]:"Endpoint"},lu={[ut]:"booleanEquals",[ft]:[{[fo]:"UseFIPS"},!0]},mu={[ut]:"booleanEquals",[ft]:[{[fo]:"UseDualStack"},!0]},ie={},au={[ut]:"booleanEquals",[ft]:[!0,{[ut]:"getAttr",[ft]:[{[fo]:Ya},"supportsFIPS"]}]},iu={[ut]:"booleanEquals",[ft]:[!0,{[ut]:"getAttr",[ft]:[{[fo]:Ya},"supportsDualStack"]}]},cu=[lu],du=[mu],zx={version:"1.0",parameters:{Region:{required:!0,type:su},UseDualStack:nu,UseFIPS:nu,Endpoint:{required:!1,type:su}},rules:[{conditions:[{[ut]:"aws.partition",[ft]:[Ka],assign:Ya}],type:pt,rules:[{conditions:[{[ut]:"isSet",[ft]:[ru]}],type:pt,rules:[{conditions:cu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:jo},{type:pt,rules:[{conditions:du,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:jo},{endpoint:{url:ru,properties:ie,headers:ie},type:Yt}]}]},{conditions:[lu,mu],type:pt,rules:[{conditions:[au,iu],type:pt,rules:[{endpoint:{url:"https://logs-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ie,headers:ie},type:Yt}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:jo}]},{conditions:cu,type:pt,rules:[{conditions:[au],type:pt,rules:[{type:pt,rules:[{conditions:[{[ut]:ou,[ft]:[Ka,"us-gov-east-1"]}],endpoint:{url:"https://logs.us-gov-east-1.amazonaws.com",properties:ie,headers:ie},type:Yt},{conditions:[{[ut]:ou,[ft]:[Ka,"us-gov-west-1"]}],endpoint:{url:"https://logs.us-gov-west-1.amazonaws.com",properties:ie,headers:ie},type:Yt},{endpoint:{url:"https://logs-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ie,headers:ie},type:Yt}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:jo}]},{conditions:du,type:pt,rules:[{conditions:[iu],type:pt,rules:[{endpoint:{url:"https://logs.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ie,headers:ie},type:Yt}]},{error:"DualStack is enabled but this partition does not support DualStack",type:jo}]},{endpoint:{url:"https://logs.{Region}.{PartitionResult#dnsSuffix}",properties:ie,headers:ie},type:Yt}]}]},pu=zx;var uu=(e,t={})=>et(pu,{endpointParams:e,logger:t.logger});var fu=e=>({apiVersion:"2014-03-28",base64Decoder:(e==null?void 0:e.base64Decoder)??rt,base64Encoder:(e==null?void 0:e.base64Encoder)??at,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??uu,logger:(e==null?void 0:e.logger)??new me,serviceId:(e==null?void 0:e.serviceId)??"CloudWatch Logs",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ye,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Qe});var yu=e=>{Me(process.version);let t=dt(e),s=()=>t().then(De),o=fu(e);return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ot,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??tr(lo),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??nt({serviceId:o.serviceId,clientVersion:tu.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??S(je),region:(e==null?void 0:e.region)??S(ue,Fe),requestHandler:(e==null?void 0:e.requestHandler)??new ge(s),retryMode:(e==null?void 0:e.retryMode)??S({...Je,default:async()=>(await s()).retryMode||fe}),sha256:(e==null?void 0:e.sha256)??Ee.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??st,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??S(Le),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??S($e)}};var or=class extends pe{constructor(t){let s=yu(t),o=eu(s),n=Ue(o),r=ze(n),a=He(r),i=a,c=As(i),d=Ze(c);super(d),this.config=d,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Be(this.config)),this.middlewareStack.use(Ge(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(qe(this.config)),this.middlewareStack.use(Ps(this.config)),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}};var yt=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,yt.prototype)}};var yo=class extends yt{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,yo.prototype)}};var ho=class extends yt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,ho.prototype)}},wo=class extends yt{constructor(t){super({name:"ServiceUnavailableException",$fault:"server",...t}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,wo.prototype)}};var hu=async(e,t)=>{let s=qx("GetLogEvents"),o;return o=JSON.stringify(I(e)),Vx(t,s,"/",void 0,o)};var wu=async(e,t)=>{if(e.statusCode>=300)return kx(e,t);let s=await Eu(e.body,t),o={};return o=I(s),{$metadata:nr(e),...o}},kx=async(e,t)=>{let s={...e,body:await Wx(e.body,t)},o=jx(e,s.body);switch(o){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":throw await Lx(s,t);case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":throw await $x(s,t);case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":throw await Fx(s,t);default:let n=s.body;return Gx({output:e,parsedBody:n,errorCode:o})}};var Lx=async(e,t)=>{let s=e.body,o=I(s),n=new yo({$metadata:nr(e),...o});return x(n,s)};var $x=async(e,t)=>{let s=e.body,o=I(s),n=new ho({$metadata:nr(e),...o});return x(n,s)},Fx=async(e,t)=>{let s=e.body,o=I(s),n=new wo({$metadata:nr(e),...o});return x(n,s)};var nr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ux=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Bx=(e,t)=>Ux(e,t).then(s=>t.utf8Encoder(s)),Gx=Ne(yt),Vx=async(e,t,s,o,n)=>{let{hostname:r,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:r,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return o!==void 0&&(d.hostname=o),n!==void 0&&(d.body=n),new R(d)};function qx(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`Logs_20140328.${e}`}}var Eu=(e,t)=>Bx(e,t).then(s=>s.length?JSON.parse(s):{}),Wx=async(e,t)=>{let s=await Eu(e,t);return s.message=s.message??s.Message,s},jx=(e,t)=>{let s=(r,a)=>Object.keys(r).find(i=>i.toLowerCase()===a.toLowerCase()),o=r=>{let a=r;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},n=s(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)};var Eo=class extends U{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,o){this.middlewareStack.use(H(s,this.serialize,this.deserialize)),this.middlewareStack.use(J(s,Eo.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:r}=s,c={logger:r,clientName:"CloudWatchLogsClient",commandName:"GetLogEventsCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return n.resolve(l=>d.handle(l.request,o||{}),c)}serialize(t,s){return hu(t,s)}deserialize(t,s){return wu(t,s)}};var gu=(e=0)=>t=>`\x1B[${t+e}m`,xu=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,bu=(e=0)=>(t,s,o)=>`\x1B[${38+e};2;${t};${s};${o}m`,M={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},gB=Object.keys(M.modifier),Hx=Object.keys(M.color),Jx=Object.keys(M.bgColor),xB=[...Hx,...Jx];function Kx(){let e=new Map;for(let[t,s]of Object.entries(M)){for(let[o,n]of Object.entries(s))M[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},s[o]=M[o],e.set(n[0],n[1]);Object.defineProperty(M,t,{value:s,enumerable:!1})}return Object.defineProperty(M,"codes",{value:e,enumerable:!1}),M.color.close="\x1B[39m",M.bgColor.close="\x1B[49m",M.color.ansi=gu(),M.color.ansi256=xu(),M.color.ansi16m=bu(),M.bgColor.ansi=gu(10),M.bgColor.ansi256=xu(10),M.bgColor.ansi16m=bu(10),Object.defineProperties(M,{rgbToAnsi256:{value:(t,s,o)=>t===s&&s===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(o/255*5),enumerable:!1},hexToRgb:{value:t=>{let s=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!s)return[0,0,0];let[o]=s;o.length===3&&(o=[...o].map(r=>r+r).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>M.rgbToAnsi256(...M.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let s,o,n;if(t>=232)s=((t-232)*10+8)/255,o=s,n=s;else{t-=16;let i=t%36;s=Math.floor(t/36)/5,o=Math.floor(i/6)/5,n=i%6/5}let r=Math.max(s,o,n)*2;if(r===0)return 30;let a=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(s));return r===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(t,s,o)=>M.ansi256ToAnsi(M.rgbToAnsi256(t,s,o)),enumerable:!1},hexToAnsi:{value:t=>M.ansi256ToAnsi(M.hexToAnsi256(t)),enumerable:!1}}),M}var Yx=Kx(),go=Yx;var Za=new sr({}),Qx=new or({}),vu;try{let e=(0,C.getInput)("command",{required:!0}),t=(0,C.getInput)("instance-id")||process.env.SSM_COMMAND_INSTANCE_ID,s=(0,C.getBooleanInput)("powershell"),o=(0,C.getBooleanInput)("wait-for-agent");if(t===void 0&&((0,C.setFailed)(Error("An instance ID must be provided.")),process.exit(1)),o){(0,C.info)("Waiting for SSM agent to come online...");let d=Iu(()=>(0,C.info)("Still waiting..."),1e4);d.unref(),await _u(t),Su(d),(0,C.info)("SSM agent is online.")}let n=s?"AWS-RunPowerShellScript":"AWS-RunShellScript",r=await Za.send(new Ss({DocumentName:n,InstanceIds:[t],Parameters:{commands:[e]},CloudWatchOutputConfig:{CloudWatchOutputEnabled:!0}}));(0,C.isDebug)()&&(0,C.debug)(`sendCommandOutput: ${rr(r)}`);let a=(vu=r.Command)==null?void 0:vu.CommandId;a||((0,C.setFailed)(Error("The 'SSM Send Command' command failed to return a command ID.")),process.exit(1)),(0,C.info)("Waiting for remote command invocation to complete...");let i=Iu(()=>(0,C.info)("Still waiting..."),1e4);i.unref();let c=await Tu(t,a);if(Su(i),(0,C.info)(`Remote command invocation completed with status: "${c.Status}". Fetching output...`),c.StandardOutputContent){let d=await Qa(c,"stdout");Cu(d.join(""),"stdout")}if(c.StandardErrorContent){let d=await Qa(c,"stderr");Cu(d.join(""),"stderr")}!c.StandardOutputContent&&!c.StandardErrorContent&&(0,C.info)(go.gray.open+go.bold.open+"No output found."),c.ResponseCode!==void 0&&(0,C.setOutput)("exit-code",c.ResponseCode),(0,C.info)(`Remote command invocation has completed with exit code: ${c.ResponseCode}`)}catch(e){e instanceof Error&&(0,C.setFailed)(e)}async function _u(e,t=0){var o,n;let s=await Za.send(new bs({Filters:[{Key:"InstanceIds",Values:[e]}]}));(0,C.isDebug)()&&(0,C.debug)(`describeInstanceInformationOutput: ${rr(s)}`),((n=(o=s.InstanceInformationList)==null?void 0:o[0])==null?void 0:n.PingStatus)!=="Online"&&(await Xa.wait(5e3),_u(e,t+1))}async function Tu(e,t){await Xa.wait(5e3);let s=await Za.send(new Is({InstanceId:e,CommandId:t}));return(0,C.isDebug)()&&(0,C.debug)(`getCommandInvocationOutput: ${rr(s)}`),s.Status&&["Success","Failed","Cancelled","TimedOut"].includes(s.Status)?s:Tu(e,t)}function Cu(e,t){let s=t==="stdout"?go.cyan.open:go.red.open+go.bold.open;(0,C.info)(s+`----- BEGIN ${t.toUpperCase()} CONTENT -----`),e.trim().split(/\r?\n/).forEach(o=>(0,C.info)(s+o)),(0,C.info)(s+`----- END ${t.toUpperCase()} CONTENT -----`)}async function Qa(e,t,s){await Xa.wait(1e3);let{DocumentName:o,CommandId:n,InstanceId:r,PluginName:a}=e,i=await Qx.send(new Eo({logGroupName:"/aws/ssm/"+o,logStreamName:`${n}/${r}/${a==null?void 0:a.replace(":","-")}/${t}`,startFromHead:!0,nextToken:s}));(0,C.isDebug)()&&(0,C.debug)(`getLogEventsCommandOutput: ${rr(i)}`);let c=(i.events??[]).map(d=>d.message).filter(d=>d!==void 0);return s===i.nextForwardToken?c:c.concat(await Qa(e,t,i.nextForwardToken))}
