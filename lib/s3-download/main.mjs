import { createRequire } from "module";const require = createRequire(import.meta.url);
var Qy=Object.create;var Io=Object.defineProperty;var Xy=Object.getOwnPropertyDescriptor;var Jy=Object.getOwnPropertyNames;var Zy=Object.getPrototypeOf,eg=Object.prototype.hasOwnProperty;var ie=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var de=(e,t)=>()=>(e&&(t=e(e=0)),t);var G=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zr=(e,t)=>{for(var r in t)Io(e,r,{get:t[r],enumerable:!0})},zc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Jy(t))!eg.call(e,o)&&o!==r&&Io(e,o,{get:()=>t[o],enumerable:!(n=Xy(t,o))||n.enumerable});return e};var kr=(e,t,r)=>(r=e!=null?Qy(Zy(e)):{},zc(t||!e||!e.__esModule?Io(r,"default",{value:e,enumerable:!0}):r,e)),Ur=e=>zc(Io({},"__esModule",{value:!0}),e);var vo=G($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.toCommandProperties=$r.toCommandValue=void 0;function tg(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}$r.toCommandValue=tg;function rg(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}$r.toCommandProperties=rg});var qc=G(je=>{"use strict";var ng=je&&je.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),og=je&&je.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sg=je&&je.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ng(t,e,r);return og(t,e),t};Object.defineProperty(je,"__esModule",{value:!0});je.issue=je.issueCommand=void 0;var ig=sg(ie("os")),$c=vo();function jc(e,t,r){let n=new ci(e,t,r);process.stdout.write(n.toString()+ig.EOL)}je.issueCommand=jc;function ag(e,t=""){jc(e,{},t)}je.issue=ag;var Uc="::",ci=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Uc+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${dg(o)}`)}}return t+=`${Uc}${cg(this.message)}`,t}};function cg(e){return $c.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function dg(e){return $c.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});import lg from"crypto";function $n(){return Oo>Do.length-16&&(lg.randomFillSync(Do),Oo=0),Do.slice(Oo,Oo+=16)}var Do,Oo,di=de(()=>{Do=new Uint8Array(256),Oo=Do.length});var Kc,Gc=de(()=>{Kc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function fg(e){return typeof e=="string"&&Kc.test(e)}var Dt,jn=de(()=>{Gc();Dt=fg});function mg(e,t=0){let r=(xe[e[t+0]]+xe[e[t+1]]+xe[e[t+2]]+xe[e[t+3]]+"-"+xe[e[t+4]]+xe[e[t+5]]+"-"+xe[e[t+6]]+xe[e[t+7]]+"-"+xe[e[t+8]]+xe[e[t+9]]+"-"+xe[e[t+10]]+xe[e[t+11]]+xe[e[t+12]]+xe[e[t+13]]+xe[e[t+14]]+xe[e[t+15]]).toLowerCase();if(!Dt(r))throw TypeError("Stringified UUID is invalid");return r}var xe,Bt,qn=de(()=>{jn();xe=[];for(let e=0;e<256;++e)xe.push((e+256).toString(16).substr(1));Bt=mg});function ug(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||Hc,i=e.clockseq!==void 0?e.clockseq:li;if(s==null||i==null){let p=e.random||(e.rng||$n)();s==null&&(s=Hc=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),i==null&&(i=li=(p[6]<<8|p[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:mi+1,d=a-fi+(c-mi)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>fi)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fi=a,mi=c,li=i,a+=122192928e5;let f=((a&268435455)*1e4+c)%4294967296;o[n++]=f>>>24&255,o[n++]=f>>>16&255,o[n++]=f>>>8&255,o[n++]=f&255;let h=a/4294967296*1e4&268435455;o[n++]=h>>>8&255,o[n++]=h&255,o[n++]=h>>>24&15|16,o[n++]=h>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let p=0;p<6;++p)o[n+p]=s[p];return t||Bt(o)}var Hc,li,fi,mi,Vc,Wc=de(()=>{di();qn();fi=0,mi=0;Vc=ug});function hg(e){if(!Dt(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Bo,ui=de(()=>{jn();Bo=hg});function pg(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function Mo(e,t,r){function n(o,s,i,a){if(typeof o=="string"&&(o=pg(o)),typeof s=="string"&&(s=Bo(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){a=a||0;for(let d=0;d<16;++d)i[a+d]=c[d];return i}return Bt(c)}try{n.name=e}catch{}return n.DNS=yg,n.URL=gg,n}var yg,gg,hi=de(()=>{qn();ui();yg="6ba7b810-9dad-11d1-80b4-00c04fd430c8",gg="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import xg from"crypto";function Cg(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),xg.createHash("md5").update(e).digest()}var Yc,Qc=de(()=>{Yc=Cg});var wg,Xc,Jc=de(()=>{hi();Qc();wg=Mo("v3",48,Yc),Xc=wg});function Eg(e,t,r){e=e||{};let n=e.random||(e.rng||$n)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Bt(n)}var Fo,Zc=de(()=>{di();qn();Fo=Eg});import bg from"crypto";function Sg(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),bg.createHash("sha1").update(e).digest()}var ed,td=de(()=>{ed=Sg});var kg,rd,nd=de(()=>{hi();td();kg=Mo("v5",80,ed),rd=kg});var od,sd=de(()=>{od="00000000-0000-0000-0000-000000000000"});function Ag(e){if(!Dt(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var id,ad=de(()=>{jn();id=Ag});var cd={};zr(cd,{NIL:()=>od,parse:()=>Bo,stringify:()=>Bt,v1:()=>Vc,v3:()=>Xc,v4:()=>Fo,v5:()=>rd,validate:()=>Dt,version:()=>id});var pi=de(()=>{Wc();Jc();Zc();nd();sd();ad();jn();qn();ui()});var md=G(qe=>{"use strict";var _g=qe&&qe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Rg=qe&&qe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ld=qe&&qe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&_g(t,e,r);return Rg(t,e),t};Object.defineProperty(qe,"__esModule",{value:!0});qe.prepareKeyValueMessage=qe.issueFileCommand=void 0;var dd=ld(ie("fs")),yi=ld(ie("os")),Ng=(pi(),Ur(cd)),fd=vo();function Tg(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!dd.existsSync(r))throw new Error(`Missing file at path: ${r}`);dd.appendFileSync(r,`${fd.toCommandValue(t)}${yi.EOL}`,{encoding:"utf8"})}qe.issueFileCommand=Tg;function Pg(e,t){let r=`ghadelimiter_${Ng.v4()}`,n=fd.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${yi.EOL}${n}${yi.EOL}${r}`}qe.prepareKeyValueMessage=Pg});var hd=G(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.checkBypass=jr.getProxyUrl=void 0;function Ig(e){let t=e.protocol==="https:";if(ud(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}jr.getProxyUrl=Ig;function ud(e){if(!e.hostname)return!1;let t=e.hostname;if(vg(t))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);let o=[e.hostname.toUpperCase()];typeof n=="number"&&o.push(`${o[0]}:${n}`);for(let s of r.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(s==="*"||o.some(i=>i===s||i.endsWith(`.${s}`)||s.startsWith(".")&&i.endsWith(`${s}`)))return!0;return!1}jr.checkBypass=ud;function vg(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var xd=G(qr=>{"use strict";var BA=ie("net"),Og=ie("tls"),gi=ie("http"),pd=ie("https"),Dg=ie("events"),MA=ie("assert"),Bg=ie("util");qr.httpOverHttp=Mg;qr.httpsOverHttp=Fg;qr.httpOverHttps=Lg;qr.httpsOverHttps=zg;function Mg(e){var t=new bt(e);return t.request=gi.request,t}function Fg(e){var t=new bt(e);return t.request=gi.request,t.createSocket=yd,t.defaultPort=443,t}function Lg(e){var t=new bt(e);return t.request=pd.request,t}function zg(e){var t=new bt(e);return t.request=pd.request,t.createSocket=yd,t.defaultPort=443,t}function bt(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||gi.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,s,i){for(var a=gd(o,s,i),c=0,d=t.requests.length;c<d;++c){var f=t.requests[c];if(f.host===a.host&&f.port===a.port){t.requests.splice(c,1),f.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Bg.inherits(bt,Dg.EventEmitter);bt.prototype.addRequest=function(t,r,n,o){var s=this,i=xi({request:t},s.options,gd(r,n,o));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(a){a.on("free",c),a.on("close",d),a.on("agentRemove",d),t.onSocket(a);function c(){s.emit("free",a,i)}function d(f){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",d),a.removeListener("agentRemove",d)}})};bt.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=xi({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),Mt("making CONNECT request");var i=n.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",c),i.once("connect",d),i.once("error",f),i.end();function a(h){h.upgrade=!0}function c(h,p,E){process.nextTick(function(){d(h,p,E)})}function d(h,p,E){if(i.removeAllListeners(),p.removeAllListeners(),h.statusCode!==200){Mt("tunneling socket could not be established, statusCode=%d",h.statusCode),p.destroy();var b=new Error("tunneling socket could not be established, statusCode="+h.statusCode);b.code="ECONNRESET",t.request.emit("error",b),n.removeSocket(o);return}if(E.length>0){Mt("got illegal response body from proxy"),p.destroy();var b=new Error("got illegal response body from proxy");b.code="ECONNRESET",t.request.emit("error",b),n.removeSocket(o);return}return Mt("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=p,r(p)}function f(h){i.removeAllListeners(),Mt(`tunneling socket could not be established, cause=%s
`,h.message,h.stack);var p=new Error("tunneling socket could not be established, cause="+h.message);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(o)}};bt.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function yd(e,t){var r=this;bt.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=xi({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),i=Og.connect(0,s);r.sockets[r.sockets.indexOf(n)]=i,t(i)})}function gd(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function xi(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];n[a]!==void 0&&(e[a]=n[a])}}return e}var Mt;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Mt=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:Mt=function(){};qr.debug=Mt});var wd=G((LA,Cd)=>{Cd.exports=xd()});var bd=G(Z=>{"use strict";var Ug=Z&&Z.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$g=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),jo=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ug(t,e,r);return $g(t,e),t},ue=Z&&Z.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(f){try{d(n.next(f))}catch(h){i(h)}}function c(f){try{d(n.throw(f))}catch(h){i(h)}}function d(f){f.done?s(f.value):o(f.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Z,"__esModule",{value:!0});Z.HttpClient=Z.isHttps=Z.HttpClientResponse=Z.HttpClientError=Z.getProxyUrl=Z.MediaTypes=Z.Headers=Z.HttpCodes=void 0;var Lo=jo(ie("http")),Ci=jo(ie("https")),Ed=jo(hd()),zo=jo(wd()),et;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(et=Z.HttpCodes||(Z.HttpCodes={}));var Re;(function(e){e.Accept="accept",e.ContentType="content-type"})(Re=Z.Headers||(Z.Headers={}));var Ft;(function(e){e.ApplicationJson="application/json"})(Ft=Z.MediaTypes||(Z.MediaTypes={}));function jg(e){let t=Ed.getProxyUrl(new URL(e));return t?t.href:""}Z.getProxyUrl=jg;var qg=[et.MovedPermanently,et.ResourceMoved,et.SeeOther,et.TemporaryRedirect,et.PermanentRedirect],Kg=[et.BadGateway,et.ServiceUnavailable,et.GatewayTimeout],Gg=["OPTIONS","GET","DELETE","HEAD"],Hg=10,Vg=5,Kr=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,Kr.prototype)}};Z.HttpClientError=Kr;var $o=class{constructor(t){this.message=t}readBody(){return ue(this,void 0,void 0,function*(){return new Promise(t=>ue(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};Z.HttpClientResponse=$o;function Wg(e){return new URL(e).protocol==="https:"}Z.isHttps=Wg;var wi=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return ue(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return ue(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return ue(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return ue(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return ue(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return ue(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return ue(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return ue(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return ue(this,void 0,void 0,function*(){r[Re.Accept]=this._getExistingOrDefaultHeader(r,Re.Accept,Ft.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return ue(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Re.Accept]=this._getExistingOrDefaultHeader(n,Re.Accept,Ft.ApplicationJson),n[Re.ContentType]=this._getExistingOrDefaultHeader(n,Re.ContentType,Ft.ApplicationJson);let s=yield this.post(t,o,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return ue(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Re.Accept]=this._getExistingOrDefaultHeader(n,Re.Accept,Ft.ApplicationJson),n[Re.ContentType]=this._getExistingOrDefaultHeader(n,Re.ContentType,Ft.ApplicationJson);let s=yield this.put(t,o,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return ue(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Re.Accept]=this._getExistingOrDefaultHeader(n,Re.Accept,Ft.ApplicationJson),n[Re.ContentType]=this._getExistingOrDefaultHeader(n,Re.ContentType,Ft.ApplicationJson);let s=yield this.patch(t,o,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,o){return ue(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,o),a=this._allowRetries&&Gg.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(i,n),d&&d.message&&d.message.statusCode===et.Unauthorized){let h;for(let p of this.handlers)if(p.canHandleAuthentication(d)){h=p;break}return h?h.handleAuthentication(this,i,n):d}let f=this._maxRedirects;for(;d.message.statusCode&&qg.includes(d.message.statusCode)&&this._allowRedirects&&f>0;){let h=d.message.headers.location;if(!h)break;let p=new URL(h);if(s.protocol==="https:"&&s.protocol!==p.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),p.hostname!==s.hostname)for(let E in o)E.toLowerCase()==="authorization"&&delete o[E];i=this._prepareRequest(t,p,o),d=yield this.requestRaw(i,n),f--}if(!d.message.statusCode||!Kg.includes(d.message.statusCode))return d;c+=1,c<a&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<a);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return ue(this,void 0,void 0,function*(){return new Promise((n,o)=>{function s(i,a){i?o(i):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function s(c,d){o||(o=!0,n(c,d))}let i=t.httpModule.request(t.options,c=>{let d=new $o(c);s(void 0,d)}),a;i.on("socket",c=>{a=c}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(c){s(c)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let s=o.parsedUrl.protocol==="https:";o.httpModule=s?Ci:Lo;let i=s?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):i,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Uo(this.requestOptions.headers),Uo(t||{})):Uo(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=Uo(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=Ed.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||Lo.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";s?c=d?zo.httpsOverHttps:zo.httpsOverHttp:c=d?zo.httpOverHttps:zo.httpOverHttp,r=c(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=s?new Ci.Agent(a):new Lo.Agent(a),this._agent=r}return r||(r=s?Ci.globalAgent:Lo.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return ue(this,void 0,void 0,function*(){t=Math.min(Hg,t);let r=Vg*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return ue(this,void 0,void 0,function*(){return new Promise((n,o)=>ue(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===et.NotFound&&n(i);function a(f,h){if(typeof h=="string"){let p=new Date(h);if(!isNaN(p.valueOf()))return p}return h}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(r&&r.deserializeDates?c=JSON.parse(d,a):c=JSON.parse(d),i.result=c),i.headers=t.message.headers}catch{}if(s>299){let f;c&&c.message?f=c.message:d&&d.length>0?f=d:f=`Failed request: (${s})`;let h=new Kr(f,s);h.result=i.result,o(h)}else n(i)}))})}};Z.HttpClient=wi;var Uo=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Sd=G(ot=>{"use strict";var ki=ot&&ot.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(f){try{d(n.next(f))}catch(h){i(h)}}function c(f){try{d(n.throw(f))}catch(h){i(h)}}function d(f){f.done?s(f.value):o(f.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ot,"__esModule",{value:!0});ot.PersonalAccessTokenCredentialHandler=ot.BearerCredentialHandler=ot.BasicCredentialHandler=void 0;var Ei=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ki(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ot.BasicCredentialHandler=Ei;var bi=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return ki(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ot.BearerCredentialHandler=bi;var Si=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ki(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ot.PersonalAccessTokenCredentialHandler=Si});var _d=G(Gr=>{"use strict";var kd=Gr&&Gr.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(f){try{d(n.next(f))}catch(h){i(h)}}function c(f){try{d(n.throw(f))}catch(h){i(h)}}function d(f){f.done?s(f.value):o(f.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.OidcClient=void 0;var Yg=bd(),Qg=Sd(),Ad=Ai(),Lt=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Yg.HttpClient("actions/oidc-client",[new Qg.BearerCredentialHandler(Lt.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return kd(this,void 0,void 0,function*(){let s=(r=(yield Lt.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return kd(this,void 0,void 0,function*(){try{let r=Lt.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}Ad.debug(`ID token url is ${r}`);let n=yield Lt.getCall(r);return Ad.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Gr.OidcClient=Lt});var Ti=G(Te=>{"use strict";var _i=Te&&Te.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(f){try{d(n.next(f))}catch(h){i(h)}}function c(f){try{d(n.throw(f))}catch(h){i(h)}}function d(f){f.done?s(f.value):o(f.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Te,"__esModule",{value:!0});Te.summary=Te.markdownSummary=Te.SUMMARY_DOCS_URL=Te.SUMMARY_ENV_VAR=void 0;var Xg=ie("os"),Ri=ie("fs"),{access:Jg,appendFile:Zg,writeFile:ex}=Ri.promises;Te.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";Te.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Ni=class{constructor(){this._buffer=""}filePath(){return _i(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[Te.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${Te.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Jg(t,Ri.constants.R_OK|Ri.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return _i(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?ex:Zg)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return _i(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(Xg.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(n,o);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(o=>{let s=o.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:c,colspan:d,rowspan:f}=i,h=a?"th":"td",p=Object.assign(Object.assign({},d&&{colspan:d}),f&&{rowspan:f});return this.wrap(h,c,p)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:s}=n||{},i=Object.assign(Object.assign({},o&&{width:o}),s&&{height:s}),a=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(o,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Rd=new Ni;Te.markdownSummary=Rd;Te.summary=Rd});var Nd=G(Pe=>{"use strict";var tx=Pe&&Pe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rx=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),nx=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&tx(t,e,r);return rx(t,e),t};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.toPlatformPath=Pe.toWin32Path=Pe.toPosixPath=void 0;var ox=nx(ie("path"));function sx(e){return e.replace(/[\\]/g,"/")}Pe.toPosixPath=sx;function ix(e){return e.replace(/[/]/g,"\\")}Pe.toWin32Path=ix;function ax(e){return e.replace(/[/\\]/g,ox.sep)}Pe.toPlatformPath=ax});var Ai=G(I=>{"use strict";var cx=I&&I.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dx=I&&I.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Td=I&&I.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&cx(t,e,r);return dx(t,e),t},Pd=I&&I.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(f){try{d(n.next(f))}catch(h){i(h)}}function c(f){try{d(n.throw(f))}catch(h){i(h)}}function d(f){f.done?s(f.value):o(f.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.getIDToken=I.getState=I.saveState=I.group=I.endGroup=I.startGroup=I.info=I.notice=I.warning=I.error=I.debug=I.isDebug=I.setFailed=I.setCommandEcho=I.setOutput=I.getBooleanInput=I.getMultilineInput=I.getInput=I.addPath=I.setSecret=I.exportVariable=I.ExitCode=void 0;var Ke=qc(),Ar=md(),Hr=vo(),Id=Td(ie("os")),lx=Td(ie("path")),fx=_d(),vd;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(vd=I.ExitCode||(I.ExitCode={}));function mx(e,t){let r=Hr.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return Ar.issueFileCommand("ENV",Ar.prepareKeyValueMessage(e,t));Ke.issueCommand("set-env",{name:e},r)}I.exportVariable=mx;function ux(e){Ke.issueCommand("add-mask",{},e)}I.setSecret=ux;function hx(e){process.env.GITHUB_PATH||""?Ar.issueFileCommand("PATH",e):Ke.issueCommand("add-path",{},e),process.env.PATH=`${e}${lx.delimiter}${process.env.PATH}`}I.addPath=hx;function Pi(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}I.getInput=Pi;function px(e,t){let r=Pi(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}I.getMultilineInput=px;function yx(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=Pi(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}I.getBooleanInput=yx;function gx(e,t){if(process.env.GITHUB_OUTPUT||"")return Ar.issueFileCommand("OUTPUT",Ar.prepareKeyValueMessage(e,t));process.stdout.write(Id.EOL),Ke.issueCommand("set-output",{name:e},Hr.toCommandValue(t))}I.setOutput=gx;function xx(e){Ke.issue("echo",e?"on":"off")}I.setCommandEcho=xx;function Cx(e){process.exitCode=vd.Failure,Od(e)}I.setFailed=Cx;function wx(){return process.env.RUNNER_DEBUG==="1"}I.isDebug=wx;function Ex(e){Ke.issueCommand("debug",{},e)}I.debug=Ex;function Od(e,t={}){Ke.issueCommand("error",Hr.toCommandProperties(t),e instanceof Error?e.toString():e)}I.error=Od;function bx(e,t={}){Ke.issueCommand("warning",Hr.toCommandProperties(t),e instanceof Error?e.toString():e)}I.warning=bx;function Sx(e,t={}){Ke.issueCommand("notice",Hr.toCommandProperties(t),e instanceof Error?e.toString():e)}I.notice=Sx;function kx(e){process.stdout.write(e+Id.EOL)}I.info=kx;function Dd(e){Ke.issue("group",e)}I.startGroup=Dd;function Bd(){Ke.issue("endgroup")}I.endGroup=Bd;function Ax(e,t){return Pd(this,void 0,void 0,function*(){Dd(e);let r;try{r=yield t()}finally{Bd()}return r})}I.group=Ax;function _x(e,t){if(process.env.GITHUB_STATE||"")return Ar.issueFileCommand("STATE",Ar.prepareKeyValueMessage(e,t));Ke.issueCommand("save-state",{name:e},Hr.toCommandValue(t))}I.saveState=_x;function Rx(e){return process.env[`STATE_${e}`]||""}I.getState=Rx;function Nx(e){return Pd(this,void 0,void 0,function*(){return yield fx.OidcClient.getIDToken(e)})}I.getIDToken=Nx;var Tx=Ti();Object.defineProperty(I,"summary",{enumerable:!0,get:function(){return Tx.summary}});var Px=Ti();Object.defineProperty(I,"markdownSummary",{enumerable:!0,get:function(){return Px.markdownSummary}});var Ii=Nd();Object.defineProperty(I,"toPosixPath",{enumerable:!0,get:function(){return Ii.toPosixPath}});Object.defineProperty(I,"toWin32Path",{enumerable:!0,get:function(){return Ii.toWin32Path}});Object.defineProperty(I,"toPlatformPath",{enumerable:!0,get:function(){return Ii.toPlatformPath}})});var Ui=G(kt=>{"use strict";var tl=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",dC=tl+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",rl="["+tl+"]["+dC+"]*",lC=new RegExp("^"+rl+"$"),fC=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},mC=function(e){let t=lC.exec(e);return!(t===null||typeof t>"u")};kt.isExist=function(e){return typeof e<"u"};kt.isEmptyObject=function(e){return Object.keys(e).length===0};kt.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};kt.getValue=function(e){return kt.isExist(e)?e:""};kt.isName=mC;kt.getAllMatches=fC;kt.nameRegexp=rl});var ji=G(al=>{"use strict";var $i=Ui(),uC={allowBooleanAttributes:!1,unpairedTags:[]};al.validate=function(e,t){t=Object.assign({},uC,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=ol(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=sl(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!EC(c)){let h;return c.trim().length===0?h="Invalid space after '<'.":h="Tag '"+c+"' is an invalid name.",fe("InvalidTag",h,De(e,s))}let d=yC(e,s);if(d===!1)return fe("InvalidAttr","Attributes for '"+c+"' have open quote.",De(e,s));let f=d.value;if(s=d.index,f[f.length-1]==="/"){let h=s-f.length;f=f.substring(0,f.length-1);let p=il(f,t);if(p===!0)n=!0;else return fe(p.err.code,p.err.msg,De(e,h+p.err.line))}else if(a)if(d.tagClosed){if(f.trim().length>0)return fe("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",De(e,i));{let h=r.pop();if(c!==h.tagName){let p=De(e,h.tagStartPos);return fe("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",De(e,i))}r.length==0&&(o=!0)}}else return fe("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",De(e,s));else{let h=il(f,t);if(h!==!0)return fe(h.err.code,h.err.msg,De(e,s-f.length+h.err.line));if(o===!0)return fe("InvalidXml","Multiple possible root nodes found.",De(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=sl(e,s);continue}else if(e[s+1]==="?"){if(s=ol(e,++s),s.err)return s}else break;else if(e[s]==="&"){let h=CC(e,s);if(h==-1)return fe("InvalidChar","char '&' is not expected.",De(e,s));s=h}else if(o===!0&&!nl(e[s]))return fe("InvalidXml","Extra text at the end",De(e,s));e[s]==="<"&&s--}}else{if(nl(e[s]))continue;return fe("InvalidChar","char '"+e[s]+"' is not expected.",De(e,s))}if(n){if(r.length==1)return fe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",De(e,r[0].tagStartPos));if(r.length>0)return fe("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return fe("InvalidXml","Start tag expected.",1);return!0};function nl(e){return e===" "||e==="	"||e===`
`||e==="\r"}function ol(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return fe("InvalidXml","XML declaration allowed only at the start of the document.",De(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function sl(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var hC='"',pC="'";function yC(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===hC||e[t]===pC)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var gC=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function il(e,t){let r=$i.getAllMatches(e,gC),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return fe("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",Qn(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return fe("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",Qn(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return fe("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",Qn(r[o]));let s=r[o][2];if(!wC(s))return fe("InvalidAttr","Attribute '"+s+"' is an invalid name.",Qn(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return fe("InvalidAttr","Attribute '"+s+"' is repeated.",Qn(r[o]))}return!0}function xC(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function CC(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,xC(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function fe(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function wC(e){return $i.isName(e)}function EC(e){return $i.isName(e)}function De(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Qn(e){return e.startIndex+e[1].length}});var dl=G(qi=>{var cl={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},bC=function(e){return Object.assign({},cl,e)};qi.buildOptions=bC;qi.defaultOptions=cl});var fl=G((sN,ll)=>{"use strict";var Ki=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};ll.exports=Ki});var ul=G((iN,ml)=>{function SC(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i=!1,a="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(o&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,s=!0;else if(o&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(o&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(o&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")i=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,n--):(s&&(AC(a,r),s=!1),n--),n===0)break}else e[t]==="["?o=!0:a+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}var kC=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function AC(e,t){let r=kC.exec(e);r&&(t[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}ml.exports=SC});var pl=G((aN,hl)=>{var _C=/^[-+]?0x[a-fA-F0-9]+$/,RC=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var NC={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function TC(e,t={}){if(t=Object.assign({},NC,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&_C.test(r))return Number.parseInt(r,16);{let n=RC.exec(r);if(n){let o=n[1],s=n[2],i=PC(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function PC(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}hl.exports=TC});var gl=G((dN,yl)=>{"use strict";var Wi=Ui(),Xn=fl(),IC=ul(),vC=pl(),cN="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Wi.nameRegexp),Gi=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=OC,this.parseXml=LC,this.parseTextData=DC,this.resolveNameSpace=BC,this.buildAttributesMap=FC,this.isItStopNode=$C,this.replaceEntitiesValue=zC,this.readStopNodeData=qC,this.saveTextToParentTag=UC}};function OC(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function DC(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Vi(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Vi(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function BC(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var MC=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function FC(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let r=Wi.getAllMatches(e,MC),n=r.length,o={};for(let s=0;s<n;s++){let i=this.resolveNameSpace(r[s][1]),a=r[s][4],c=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);let d=this.options.attributeValueProcessor(i,a,t);d==null?o[c]=a:typeof d!=typeof a||d!==a?o[c]=d:o[c]=Vi(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[c]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=o,s}return o}}var LC=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Xn("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=Rr(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o)),o=o.substr(0,o.lastIndexOf(".")),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Hi(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new Xn(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o)),r.addChild(c)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=Rr(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=IC(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=Rr(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=Hi(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,f=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1)),c!==t.tagname&&(o+=o?"."+c:c);let p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,o,c)){let E="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let N=this.readStopNodeData(e,c,h+1);if(!N)throw new Error(`Unexpected end of ${c}`);s=N.i,E=N.tagContent}let b=new Xn(c);c!==d&&f&&(b[":@"]=this.buildAttributesMap(d,o)),E&&(E=this.parseTextData(E,c,o,!0,f,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),b.add(this.options.textNodeName,E),r.addChild(b)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let E=new Xn(c);c!==d&&f&&(E[":@"]=this.buildAttributesMap(d,o)),o=o.substr(0,o.lastIndexOf(".")),r.addChild(E)}else{let E=new Xn(c);this.tagsNodeStack.push(r),c!==d&&f&&(E[":@"]=this.buildAttributesMap(d,o)),r.addChild(E),r=E}n="",s=h}}else n+=e[s];return t.child},zC=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function UC(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function $C(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function jC(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Rr(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Hi(e,t,r,n=">"){let o=jC(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let f=c.indexOf(":");f!==-1&&(c=c.substr(f+1),d=c!==o.data.substr(f+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function qC(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Rr(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Rr(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Rr(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Rr(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Hi(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function Vi(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:vC(e,r)}else return Wi.isExist(e)?e:""}yl.exports=Gi});var wl=G(Cl=>{"use strict";function KC(e,t){return xl(e,t)}function xl(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=GC(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=xl(i[a],t,c),f=VC(d,t);i[":@"]?HC(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,f)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function GC(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function HC(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function VC(e,t){let r=Object.keys(e).length;return!!(r===0||r===1&&e[t.textNodeName])}Cl.prettify=KC});var bl=G((fN,El)=>{var{buildOptions:WC}=dl(),YC=gl(),{prettify:QC}=wl(),XC=ji(),Yi=class{constructor(t){this.externalEntities={},this.options=WC(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=XC.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new YC(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:QC(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};El.exports=Yi});var Rl=G((mN,_l)=>{var JC=`
`;function ZC(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=JC),kl(e,t,"",r)}function kl(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=ew(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let b=a[c];tw(d,t)||(b=t.tagValueProcessor(c,b),b=Al(b,t)),s&&(o+=n),o+=b,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let b=Sl(a[":@"],t),N=c==="?xml"?"":n,v=a[c][0][t.textNodeName];v=v.length!==0?" "+v:"",o+=N+`<${c}${v}${b}?>`,s=!0;continue}let f=n;f!==""&&(f+=t.indentBy);let h=Sl(a[":@"],t),p=n+`<${c}${h}`,E=kl(a[c],t,d,f);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=p+">":o+=p+"/>":(!E||E.length===0)&&t.suppressEmptyNode?o+=p+"/>":E&&E.endsWith(">")?o+=p+`>${E}${n}</${c}>`:(o+=p+">",E&&n!==""&&(E.includes("/>")||E.includes("</"))?o+=n+t.indentBy+E+n:o+=E,o+=`</${c}>`),s=!0}return o}function ew(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Sl(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=Al(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function tw(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function Al(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}_l.exports=ZC});var Tl=G((uN,Nl)=>{"use strict";var rw=Rl(),nw={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Kt(e){this.options=Object.assign({},nw,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=iw),this.processTextOrObjNode=ow,this.options.format?(this.indentate=sw,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Kt.prototype.build=function(e){return this.options.preserveOrder?rw(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Kt.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length;for(let i=0;i<s;i++){let a=e[o][i];typeof a>"u"||(a===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof a=="object"?n+=this.processTextOrObjNode(a,o,t):n+=this.buildTextValNode(a,o,"",t))}}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};Kt.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function ow(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Kt.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};Kt.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Kt.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};Kt.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function sw(e){return this.options.indentBy.repeat(e)}function iw(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Nl.exports=Kt});var Qi=G((hN,Pl)=>{"use strict";var aw=ji(),cw=bl(),dw=Tl();Pl.exports={XMLParser:cw,XMLValidator:aw,XMLBuilder:dw}});var sa={};zr(sa,{__assign:()=>na,__asyncDelegator:()=>zw,__asyncGenerator:()=>Lw,__asyncValues:()=>Uw,__await:()=>eo,__awaiter:()=>vw,__classPrivateFieldGet:()=>Kw,__classPrivateFieldSet:()=>Gw,__createBinding:()=>Dw,__decorate:()=>Tw,__exportStar:()=>Bw,__extends:()=>Rw,__generator:()=>Ow,__importDefault:()=>qw,__importStar:()=>jw,__makeTemplateObject:()=>$w,__metadata:()=>Iw,__param:()=>Pw,__read:()=>Yl,__rest:()=>Nw,__spread:()=>Mw,__spreadArrays:()=>Fw,__values:()=>oa});function Rw(e,t){ra(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Nw(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Tw(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function Pw(e,t){return function(r,n){t(r,n,e)}}function Iw(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function vw(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(f){try{d(n.next(f))}catch(h){i(h)}}function c(f){try{d(n.throw(f))}catch(h){i(h)}}function d(f){f.done?s(f.value):o(f.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function Ow(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Dw(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Bw(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function oa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yl(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function Mw(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yl(arguments[t]));return e}function Fw(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function eo(e){return this instanceof eo?(this.v=e,this):new eo(e)}function Lw(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(p){n[p]&&(o[p]=function(E){return new Promise(function(b,N){s.push([p,E,b,N])>1||a(p,E)})})}function a(p,E){try{c(n[p](E))}catch(b){h(s[0][3],b)}}function c(p){p.value instanceof eo?Promise.resolve(p.value.v).then(d,f):h(s[0][2],p)}function d(p){a("next",p)}function f(p){a("throw",p)}function h(p,E){p(E),s.shift(),s.length&&a(s[0][0],s[0][1])}}function zw(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:eo(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function Uw(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof oa=="function"?oa(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function $w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function jw(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function qw(e){return e&&e.__esModule?e:{default:e}}function Kw(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Gw(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var ra,na,ia=de(()=>{ra=function(e,t){return ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},ra(e,t)};na=function(){return na=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},na.apply(this,arguments)}});var Ql,Xl,Jl=de(()=>{Ql=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},Xl=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Zl(e){return new TextEncoder().encode(e)}function ef(e){return new TextDecoder("utf-8").decode(e)}var tf=de(()=>{});var rf={};zr(rf,{fromUtf8:()=>Hw,toUtf8:()=>Vw});var Hw,Vw,nf=de(()=>{Jl();tf();Hw=e=>typeof TextEncoder=="function"?Zl(e):Ql(e),Vw=e=>typeof TextDecoder=="function"?ef(e):Xl(e)});var of=G(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.convertToBuffer=void 0;var Ww=(nf(),Ur(rf)),Yw=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Ww.fromUtf8;function Qw(e){return e instanceof Uint8Array?e:typeof e=="string"?Yw(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Zo.convertToBuffer=Qw});var sf=G(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.isEmptyData=void 0;function Xw(e){return typeof e=="string"?e.length===0:e.byteLength===0}es.isEmptyData=Xw});var af=G(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.numToUint8=void 0;function Jw(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}ts.numToUint8=Jw});var cf=G(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.uint32ArrayFrom=void 0;function Zw(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}rs.uint32ArrayFrom=Zw});var to=G(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.uint32ArrayFrom=ct.numToUint8=ct.isEmptyData=ct.convertToBuffer=void 0;var eE=of();Object.defineProperty(ct,"convertToBuffer",{enumerable:!0,get:function(){return eE.convertToBuffer}});var tE=sf();Object.defineProperty(ct,"isEmptyData",{enumerable:!0,get:function(){return tE.isEmptyData}});var rE=af();Object.defineProperty(ct,"numToUint8",{enumerable:!0,get:function(){return rE.numToUint8}});var nE=cf();Object.defineProperty(ct,"uint32ArrayFrom",{enumerable:!0,get:function(){return nE.uint32ArrayFrom}})});var ff=G(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.AwsCrc32=void 0;var df=(ia(),Ur(sa)),aa=to(),lf=ro(),oE=function(){function e(){this.crc32=new lf.Crc32}return e.prototype.update=function(t){(0,aa.isEmptyData)(t)||this.crc32.update((0,aa.convertToBuffer)(t))},e.prototype.digest=function(){return df.__awaiter(this,void 0,void 0,function(){return df.__generator(this,function(t){return[2,(0,aa.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new lf.Crc32},e}();ns.AwsCrc32=oE});var ro=G(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.AwsCrc32=Gt.Crc32=Gt.crc32=void 0;var sE=(ia(),Ur(sa)),iE=to();function aE(e){return new mf().update(e).digest()}Gt.crc32=aE;var mf=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=sE.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^dE[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Gt.Crc32=mf;var cE=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],dE=(0,iE.uint32ArrayFrom)(cE),lE=ff();Object.defineProperty(Gt,"AwsCrc32",{enumerable:!0,get:function(){return lE.AwsCrc32}})});var fa={};zr(fa,{__assign:()=>da,__asyncDelegator:()=>SE,__asyncGenerator:()=>bE,__asyncValues:()=>kE,__await:()=>no,__awaiter:()=>yE,__classPrivateFieldGet:()=>NE,__classPrivateFieldSet:()=>TE,__createBinding:()=>xE,__decorate:()=>uE,__exportStar:()=>CE,__extends:()=>fE,__generator:()=>gE,__importDefault:()=>RE,__importStar:()=>_E,__makeTemplateObject:()=>AE,__metadata:()=>pE,__param:()=>hE,__read:()=>uf,__rest:()=>mE,__spread:()=>wE,__spreadArrays:()=>EE,__values:()=>la});function fE(e,t){ca(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function mE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function uE(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function hE(e,t){return function(r,n){t(r,n,e)}}function pE(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function yE(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(f){try{d(n.next(f))}catch(h){i(h)}}function c(f){try{d(n.throw(f))}catch(h){i(h)}}function d(f){f.done?s(f.value):o(f.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function gE(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function xE(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function CE(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function la(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function uf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function wE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(uf(arguments[t]));return e}function EE(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function no(e){return this instanceof no?(this.v=e,this):new no(e)}function bE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(p){n[p]&&(o[p]=function(E){return new Promise(function(b,N){s.push([p,E,b,N])>1||a(p,E)})})}function a(p,E){try{c(n[p](E))}catch(b){h(s[0][3],b)}}function c(p){p.value instanceof no?Promise.resolve(p.value.v).then(d,f):h(s[0][2],p)}function d(p){a("next",p)}function f(p){a("throw",p)}function h(p,E){p(E),s.shift(),s.length&&a(s[0][0],s[0][1])}}function SE(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:no(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function kE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof la=="function"?la(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function AE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _E(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function RE(e){return e&&e.__esModule?e:{default:e}}function NE(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function TE(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var ca,da,ma=de(()=>{ca=function(e,t){return ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},ca(e,t)};da=function(){return da=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},da.apply(this,arguments)}});var yf=G(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.AwsCrc32c=void 0;var hf=(ma(),Ur(fa)),ua=to(),pf=ha(),PE=function(){function e(){this.crc32c=new pf.Crc32c}return e.prototype.update=function(t){(0,ua.isEmptyData)(t)||this.crc32c.update((0,ua.convertToBuffer)(t))},e.prototype.digest=function(){return hf.__awaiter(this,void 0,void 0,function(){return hf.__generator(this,function(t){return[2,(0,ua.numToUint8)(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new pf.Crc32c},e}();os.AwsCrc32c=PE});var ha=G(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.AwsCrc32c=Ht.Crc32c=Ht.crc32c=void 0;var IE=(ma(),Ur(fa)),vE=to();function OE(e){return new gf().update(e).digest()}Ht.crc32c=OE;var gf=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=IE.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^BE[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Ht.Crc32c=gf;var DE=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],BE=(0,vE.uint32ArrayFrom)(DE),ME=yf();Object.defineProperty(Ht,"AwsCrc32c",{enumerable:!0,get:function(){return ME.AwsCrc32c}})});var pe=kr(Ai(),1);import{mkdir as Gy}from"node:fs/promises";import{createWriteStream as zk}from"node:fs";import{pipeline as Uk}from"node:stream/promises";import{join as $k,posix as jk,dirname as qk}from"node:path";import{inspect as Fc}from"node:util";var st=class{trace(){}debug(){}info(){}warn(){}error(){}};var Vr=()=>{let e=[],t=[],r=new Set,n=f=>f.sort((h,p)=>Md[p.step]-Md[h.step]||Fd[p.priority||"normal"]-Fd[h.priority||"normal"]),o=f=>{let h=!1,p=E=>E.name&&E.name===f?(h=!0,r.delete(f),!1):!0;return e=e.filter(p),t=t.filter(p),h},s=f=>{let h=!1,p=E=>E.middleware===f?(h=!0,E.name&&r.delete(E.name),!1):!0;return e=e.filter(p),t=t.filter(p),h},i=f=>(e.forEach(h=>{f.add(h.middleware,{...h})}),t.forEach(h=>{f.addRelativeTo(h.middleware,{...h})}),f),a=f=>{let h=[];return f.before.forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...a(p))}),h.push(f),f.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...a(p))}),h},c=(f=!1)=>{let h=[],p=[],E={};return e.forEach(N=>{let v={...N,before:[],after:[]};v.name&&(E[v.name]=v),h.push(v)}),t.forEach(N=>{let v={...N,before:[],after:[]};v.name&&(E[v.name]=v),p.push(v)}),p.forEach(N=>{if(N.toMiddleware){let v=E[N.toMiddleware];if(v===void 0){if(f)return;throw new Error(`${N.toMiddleware} is not found when adding ${N.name||"anonymous"} middleware ${N.relation} ${N.toMiddleware}`)}N.relation==="after"&&v.after.push(N),N.relation==="before"&&v.before.push(N)}}),n(h).map(a).reduce((N,v)=>(N.push(...v),N),[])},d={add:(f,h={})=>{let{name:p,override:E}=h,b={step:"initialize",priority:"normal",middleware:f,...h};if(p){if(r.has(p)){if(!E)throw new Error(`Duplicate middleware name '${p}'`);let N=e.findIndex($e=>$e.name===p),v=e[N];if(v.step!==b.step||v.priority!==b.priority)throw new Error(`"${p}" middleware with ${v.priority} priority in ${v.step} step cannot be overridden by same-name middleware with ${b.priority} priority in ${b.step} step.`);e.splice(N,1)}r.add(p)}e.push(b)},addRelativeTo:(f,h)=>{let{name:p,override:E}=h,b={middleware:f,...h};if(p){if(r.has(p)){if(!E)throw new Error(`Duplicate middleware name '${p}'`);let N=t.findIndex($e=>$e.name===p),v=t[N];if(v.toMiddleware!==b.toMiddleware||v.relation!==b.relation)throw new Error(`"${p}" middleware ${v.relation} "${v.toMiddleware}" middleware cannot be overridden by same-name middleware ${b.relation} "${b.toMiddleware}" middleware.`);t.splice(N,1)}r.add(p)}t.push(b)},clone:()=>i(Vr()),use:f=>{f.applyToStack(d)},remove:f=>typeof f=="string"?o(f):s(f),removeByTag:f=>{let h=!1,p=E=>{let{tags:b,name:N}=E;return b&&b.includes(f)?(N&&r.delete(N),h=!0,!1):!0};return e=e.filter(p),t=t.filter(p),h},concat:f=>{let h=i(Vr());return h.use(f),h},applyToStack:i,identify:()=>c(!0).map(f=>f.name+": "+(f.tags||[]).join(",")),resolve:(f,h)=>{for(let p of c().map(E=>E.middleware).reverse())f=p(f,h);return f}};return d},Md={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Fd={high:3,normal:2,low:1};var it=class{constructor(t){this.middlewareStack=Vr(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var Ie=class{constructor(){this.middlewareStack=Vr()}};var _r="***SensitiveInformation***";var Go=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var Ix=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Kd.warn(qd(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},vx=Math.ceil(34028234663852886e22),Ld=e=>{let t=Ix(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>vx)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},qo=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Ko=e=>vi(e,32),zd=e=>vi(e,16),Ud=e=>vi(e,8),vi=(e,t)=>{let r=qo(e);if(r!==void 0&&Ox(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Ox=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},ve=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Wr=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},T=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Kd.warn(qd(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var $d=e=>Ld(typeof e=="string"?Kn(e):e),Dx=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Kn=e=>{let t=e.match(Dx);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Oi=e=>qo(typeof e=="string"?Kn(e):e);var St=e=>Ko(typeof e=="string"?Kn(e):e),Gn=e=>zd(typeof e=="string"?Kn(e):e),jd=e=>Ud(typeof e=="string"?Kn(e):e),qd=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Kd={warn:console.warn};var Bx=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Bi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Vo(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,f=i<10?`0${i}`:`${i}`,h=a<10?`0${a}`:`${a}`;return`${Bx[n]}, ${c} ${Bi[r]} ${t} ${d}:${f}:${h} GMT`}var o_=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var Mx=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Vn=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Mx.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,f]=t,h=Gn(Hn(n)),p=zt(o,"month",1,12),E=zt(s,"day",1,31),b=Ho(h,p,E,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return f.toUpperCase()!="Z"&&b.setTime(b.getTime()-Vx(f)),b},Fx=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Lx=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),zx=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Mi=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Fx.exec(e);if(t){let[r,n,o,s,i,a,c,d]=t;return Ho(Gn(Hn(s)),Di(o),zt(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})}if(t=Lx.exec(e),t){let[r,n,o,s,i,a,c,d]=t;return jx(Ho(Ux(s),Di(o),zt(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d}))}if(t=zx.exec(e),t){let[r,n,o,s,i,a,c,d]=t;return Ho(Gn(Hn(d)),Di(n),zt(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")};var Ho=(e,t,r,n)=>{let o=t-1;return Kx(e,o,r),new Date(Date.UTC(e,o,r,zt(n.hours,"hour",0,23),zt(n.minutes,"minute",0,59),zt(n.seconds,"seconds",0,60),Hx(n.fractionalMilliseconds)))},Ux=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Gn(Hn(e));return r<t?r+100:r},$x=50*365*24*60*60*1e3,jx=e=>e.getTime()-new Date().getTime()>$x?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Di=e=>{let t=Bi.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},qx=[31,28,31,30,31,30,31,31,30,31,30,31],Kx=(e,t,r)=>{let n=qx[t];if(t===1&&Gx(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Bi[t]} in ${e}: ${r}`)},Gx=e=>e%4===0&&(e%100!==0||e%400===0),zt=(e,t,r,n)=>{let o=jd(Hn(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},Hx=e=>e==null?0:$d("0."+e)*1e3,Vx=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},Hn=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var Ge=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Ge.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},Y=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var Wx=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=Yx(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||s||"UnknownError",$fault:"client",$metadata:o});throw Y(i,t)},Ut=e=>({output:t,parsedBody:r,errorCode:n})=>{Wx({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},Yx=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var $t=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Gd=!1,jt=e=>{e&&!Gd&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Gd=!0)};function Yr(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Wo=e=>Array.isArray(e)?e:[e];var Wn=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Wn(e[r]));return e};var Fi=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Fi.prototype=Object.create(String.prototype,{constructor:{value:Fi,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Fi,String);function V(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,Qx(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}Hd(n,null,s,i)}return n}var le=(e,t)=>{let r={};for(let n in t)Hd(r,e,t,n);return r},Qx=(e,t,r)=>V(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),Hd=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=Xx,c=Jx,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},Xx=e=>e!=null,Jx=e=>e;var Yo=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>Yr(a)).join("/"):Yr(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var Yn=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Yn(e[r]));return t}return e};var Vd=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),nC(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!rC(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Zx=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,eC=/(\d+\.){3}\d+/,tC=/\.\./;var rC=e=>Zx.test(e)&&!eC.test(e)&&!tC.test(e),nC=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var Wd=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var Yd=async(e,t,r,n)=>{let o=await oC(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},oC=async(e,t,r)=>{var s;let n={},o=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=e[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await Wd(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Vd(n),n};function Qd(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var Oe=e=>{if(typeof e=="string")return Oe(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=Qd(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var Xd=e=>typeof e=="object"?"url"in e?Oe(e.url):e:Oe(e);var Jd=({config:e,instructions:t})=>(r,n)=>async o=>{var a,c;let s=await Yd(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=n.authSchemes)==null?void 0:c[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var Zd=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var el=(e,t)=>(r,n)=>async o=>{var a;let s=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var sC={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Li={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function He(e,t,r){return{applyToStack:n=>{n.add(Zd(e,r),sC),n.add(el(e,t),Li)}}}var iC={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Li.name},Ve=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Jd({config:e,instructions:t}),iC)}});var Ce=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var qt=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Xd(await Ce(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Ce(e.useDualstackEndpoint??!1),useFipsEndpoint:Ce(e.useFipsEndpoint??!1)}};var zi;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(zi||(zi={}));var q=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new q({...this,headers:{...this.headers}});return t.query&&(t.query=aC(t.query)),t}};function aC(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var tt=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var Ol=kr(Qi());var at=class extends Ge{constructor(t){super(t),Object.setPrototypeOf(this,at.prototype)}};var Xi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Xi||(Xi={}));var Ji;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Ji||(Ji={}));var Zi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Zi||(Zi={}));var ea;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(ea||(ea={}));var Qr=class extends at{constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,Qr.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},Xr=class extends at{constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,Xr.prototype)}};var Jr=class extends at{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,Jr.prototype)}};var Il=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:_r}}),vl=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:_r}});var Dl=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=V({},Qo,{"if-match":e.IfMatch,"if-modified-since":[()=>Qo(e.IfModifiedSince),()=>Vo(e.IfModifiedSince).toString()],"if-none-match":e.IfNoneMatch,"if-unmodified-since":[()=>Qo(e.IfUnmodifiedSince),()=>Vo(e.IfUnmodifiedSince).toString()],range:e.Range,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-checksum-mode":e.ChecksumMode}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/{Key+}`;a=Yo(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1),a=Yo(a,e,"Key",()=>e.Key,"{Key+}",!0);let c=V({"x-id":[,"GetObject"],"response-cache-control":[,e.ResponseCacheControl],"response-content-disposition":[,e.ResponseContentDisposition],"response-content-encoding":[,e.ResponseContentEncoding],"response-content-language":[,e.ResponseContentLanguage],"response-content-type":[,e.ResponseContentType],"response-expires":[()=>e.ResponseExpires!==void 0,()=>Vo(e.ResponseExpires).toString()],versionId:[,e.VersionId],partNumber:[()=>e.PartNumber!==void 0,()=>e.PartNumber.toString()]}),d;return new q({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Bl=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=V({},Qo,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/`;a=Yo(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1);let c=V({"list-type":[,"2"],delimiter:[,e.Delimiter],"encoding-type":[,e.EncodingType],"max-keys":[()=>e.MaxKeys!==void 0,()=>e.MaxKeys.toString()],prefix:[,e.Prefix],"continuation-token":[,e.ContinuationToken],"fetch-owner":[()=>e.FetchOwner!==void 0,()=>e.FetchOwner.toString()],"start-after":[,e.StartAfter]}),d;return new q({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Ml=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return lw(e,t);let r=V({$metadata:Jn(e),DeleteMarker:[()=>e.headers["x-amz-delete-marker"]!==void 0,()=>Go(e.headers["x-amz-delete-marker"])],AcceptRanges:[,e.headers["accept-ranges"]],Expiration:[,e.headers["x-amz-expiration"]],Restore:[,e.headers["x-amz-restore"]],LastModified:[()=>e.headers["last-modified"]!==void 0,()=>ve(Mi(e.headers["last-modified"]))],ContentLength:[()=>e.headers["content-length"]!==void 0,()=>Oi(e.headers["content-length"])],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],MissingMeta:[()=>e.headers["x-amz-missing-meta"]!==void 0,()=>St(e.headers["x-amz-missing-meta"])],VersionId:[,e.headers["x-amz-version-id"]],CacheControl:[,e.headers["cache-control"]],ContentDisposition:[,e.headers["content-disposition"]],ContentEncoding:[,e.headers["content-encoding"]],ContentLanguage:[,e.headers["content-language"]],ContentRange:[,e.headers["content-range"]],ContentType:[,e.headers["content-type"]],Expires:[()=>e.headers.expires!==void 0,()=>ve(Mi(e.headers.expires))],WebsiteRedirectLocation:[,e.headers["x-amz-website-redirect-location"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>Go(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],StorageClass:[,e.headers["x-amz-storage-class"]],RequestCharged:[,e.headers["x-amz-request-charged"]],ReplicationStatus:[,e.headers["x-amz-replication-status"]],PartsCount:[()=>e.headers["x-amz-mp-parts-count"]!==void 0,()=>St(e.headers["x-amz-mp-parts-count"])],TagCount:[()=>e.headers["x-amz-tagging-count"]!==void 0,()=>St(e.headers["x-amz-tagging-count"])],ObjectLockMode:[,e.headers["x-amz-object-lock-mode"]],ObjectLockRetainUntilDate:[()=>e.headers["x-amz-object-lock-retain-until-date"]!==void 0,()=>ve(Vn(e.headers["x-amz-object-lock-retain-until-date"]))],ObjectLockLegalHoldStatus:[,e.headers["x-amz-object-lock-legal-hold"]],Metadata:[,Object.keys(e.headers).filter(o=>o.startsWith("x-amz-meta-")).reduce((o,s)=>(o[s.substring(11)]=e.headers[s],o),{})]}),n=e.body;return t.sdkStreamMixin(n),r.Body=n,r},lw=async(e,t)=>{let r={...e,body:await Ul(e.body,t)},n=$l(e,r.body);switch(n){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await mw(r,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await hw(r,t);default:let o=r.body;return Ll({output:e,parsedBody:o,errorCode:n})}};var Fl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fw(e,t);let r=V({$metadata:Jn(e)}),n=ve(Wr(await zl(e.body,t)),"body");return n.CommonPrefixes===""?r.CommonPrefixes=[]:n.CommonPrefixes!==void 0&&(r.CommonPrefixes=gw(Wo(n.CommonPrefixes),t)),n.Contents===""?r.Contents=[]:n.Contents!==void 0&&(r.Contents=Cw(Wo(n.Contents),t)),n.ContinuationToken!==void 0&&(r.ContinuationToken=T(n.ContinuationToken)),n.Delimiter!==void 0&&(r.Delimiter=T(n.Delimiter)),n.EncodingType!==void 0&&(r.EncodingType=T(n.EncodingType)),n.IsTruncated!==void 0&&(r.IsTruncated=Go(n.IsTruncated)),n.KeyCount!==void 0&&(r.KeyCount=St(n.KeyCount)),n.MaxKeys!==void 0&&(r.MaxKeys=St(n.MaxKeys)),n.Name!==void 0&&(r.Name=T(n.Name)),n.NextContinuationToken!==void 0&&(r.NextContinuationToken=T(n.NextContinuationToken)),n.Prefix!==void 0&&(r.Prefix=T(n.Prefix)),n.StartAfter!==void 0&&(r.StartAfter=T(n.StartAfter)),r},fw=async(e,t)=>{let r={...e,body:await Ul(e.body,t)},n=$l(e,r.body);switch(n){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await uw(r,t);default:let o=r.body;return Ll({output:e,parsedBody:o,errorCode:n})}};var Ll=Ut(at);var mw=async(e,t)=>{let r=V({}),n=e.body;n.AccessTier!==void 0&&(r.AccessTier=T(n.AccessTier)),n.StorageClass!==void 0&&(r.StorageClass=T(n.StorageClass));let o=new Qr({$metadata:Jn(e),...r});return Y(o,e.body)},uw=async(e,t)=>{let r=V({}),n=e.body,o=new Jr({$metadata:Jn(e),...r});return Y(o,e.body)},hw=async(e,t)=>{let r=V({}),n=e.body,o=new Xr({$metadata:Jn(e),...r});return Y(o,e.body)};var pw=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>T(r)),yw=(e,t)=>{let r={};return e.Prefix!==void 0&&(r.Prefix=T(e.Prefix)),r},gw=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>yw(r,t));var xw=(e,t)=>{let r={};return e.Key!==void 0&&(r.Key=T(e.Key)),e.LastModified!==void 0&&(r.LastModified=ve(Vn(e.LastModified))),e.ETag!==void 0&&(r.ETag=T(e.ETag)),e.ChecksumAlgorithm===""?r.ChecksumAlgorithm=[]:e.ChecksumAlgorithm!==void 0&&(r.ChecksumAlgorithm=pw(Wo(e.ChecksumAlgorithm),t)),e.Size!==void 0&&(r.Size=Oi(e.Size)),e.StorageClass!==void 0&&(r.StorageClass=T(e.StorageClass)),e.Owner!==void 0&&(r.Owner=ww(e.Owner,t)),r},Cw=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>xw(r,t));var ww=(e,t)=>{let r={};return e.DisplayName!==void 0&&(r.DisplayName=T(e.DisplayName)),e.ID!==void 0&&(r.ID=T(e.ID)),r};var Jn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ew=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),bw=(e,t)=>Ew(e,t).then(r=>t.utf8Encoder(r)),Qo=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),zl=(e,t)=>bw(e,t).then(r=>{if(r.length){let n=new Ol.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),Wn(a)}return{}}),Ul=async(e,t)=>{let r=await zl(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},$l=(e,t)=>{if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};var jl=e=>({...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1});var ta=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function Sw(){return e=>async t=>{let{input:{Bucket:r}}=t;if(typeof r=="string"&&!ta(r)&&r.indexOf("/")>=0){let n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}var kw={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},ql=e=>({applyToStack:t=>{t.add(Sw(),kw)}});function Aw(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let s of o){let i=n[s.target];if(i){let a=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):typeof i=="string"?e.utf8Decoder(i):new Uint8Array(i),c=e.base64Encoder(a),d=new e.md5;d.update(a),n={...n,[s.target]:c,[s.hash]:e.base64Encoder(await d.digest())}}}return t({...r,input:n})}}var _w={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Kl=e=>({applyToStack:t=>{t.add(Aw(e),_w)}});var ce;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(ce||(ce={}));var Gl;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Gl||(Gl={}));var Zn=[ce.CRC32,ce.CRC32C,ce.SHA1,ce.SHA256],Hl=[ce.CRC32,ce.CRC32C,ce.SHA1,ce.SHA256];var Vl=(e,{requestChecksumRequired:t,requestAlgorithmMember:r})=>{if(!r||!e[r])return t?ce.MD5:void 0;let n=e[r];if(!Zn.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${Zn}.`);return n};var Xo=e=>e===ce.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var Wl=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var Zr=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var Jo=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Zr(e);var xf=kr(ro()),Cf=kr(ha());var ss=(e,t)=>({[ce.MD5]:t.md5,[ce.CRC32]:xf.AwsCrc32,[ce.CRC32C]:Cf.AwsCrc32c,[ce.SHA1]:t.sha1,[ce.SHA256]:t.sha256})[e];import{Buffer as pa}from"buffer";var At=(e,t=0,r=e.byteLength-t)=>{if(!Zr(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return pa.from(e,t,r)},en=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?pa.from(e,t):pa.from(e)};var dt=e=>{let t=en(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Be=e=>typeof e=="string"?dt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Vt=e=>At(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var is=(e,t)=>{let r=new e;return r.update(Be(t||"")),r.digest()};var wf=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{let o=Jo(e)?t(r,e):is(r,e);return n(await o)};var Ef=(e=[])=>{let t=[];for(let r of Hl)!e.includes(r)||!Zn.includes(r)||t.push(r);return t};var bf=async(e,{config:t,responseAlgorithms:r})=>{let n=Ef(r),{body:o,headers:s}=e;for(let i of n){let a=Xo(i),c=s[a];if(c){let d=ss(i,t),{streamHasher:f,base64Encoder:h}=t,p=await wf(o,{streamHasher:f,checksumAlgorithmFn:d,base64Encoder:h});if(p===c)break;throw new Error(`Checksum mismatch: expected "${p}" but received "${c}" in response header "${a}".`)}}};var Sf=(e,t)=>r=>async n=>{if(!q.isInstance(n.request))return r(n);let{request:o}=n,{body:s,headers:i}=o,{base64Encoder:a,streamHasher:c}=e,{input:d,requestChecksumRequired:f,requestAlgorithmMember:h}=t,p=Vl(d,{requestChecksumRequired:f,requestAlgorithmMember:h}),E=s,b=i;if(p){let br=Xo(p),Ne=ss(p,e);if(Jo(s)){let{getAwsChunkedEncodingStream:Sr,bodyLengthChecker:Un}=e;E=Sr(s,{base64Encoder:a,bodyLengthChecker:Un,checksumLocationName:br,checksumAlgorithmFn:Ne,streamHasher:c}),b={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":br},delete b["content-length"]}else if(!Wl(br,i)){let Sr=await is(Ne,s);b={...i,[br]:a(Sr)}}}let N=await r({...n,request:{...o,headers:b,body:E}}),{requestValidationModeMember:v,responseAlgorithms:$e}=t;return v&&d[v]==="ENABLED"&&bf(N.response,{config:e,responseAlgorithms:$e}),N};var FE={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},kf=(e,t)=>({applyToStack:r=>{r.add(Sf(e,t),FE)}});var tn=class extends Ie{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(He(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ve(r,tn.getEndpointParameterInstructions())),this.middlewareStack.use(Kl(r)),this.middlewareStack.use(kf(r,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:vl,outputFilterSensitiveLog:Il},{requestHandler:d}=r;return o.resolve(f=>d.handle(f.request,n||{}),c)}serialize(t,r){return Dl(t,r)}deserialize(t,r){return Ml(t,r)}};var rn=class extends Ie{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(He(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ve(r,rn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f},{requestHandler:d}=r;return o.resolve(f=>d.handle(f.request,n||{}),c)}serialize(t,r){return Bl(t,r)}deserialize(t,r){return Fl(t,r)}};var We;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(We||(We={}));var lt=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var LE="AWS_USE_DUALSTACK_ENDPOINT",zE="use_dualstack_endpoint";var Wt={environmentVariableSelector:e=>lt(e,LE,We.ENV),configFileSelector:e=>lt(e,zE,We.CONFIG),default:!1};var UE="AWS_USE_FIPS_ENDPOINT",$E="use_fips_endpoint";var Yt={environmentVariableSelector:e=>lt(e,UE,We.ENV),configFileSelector:e=>lt(e,$E,We.CONFIG),default:!1};var jE="AWS_REGION",qE="region",ft={environmentVariableSelector:e=>e[jE],configFileSelector:e=>e[qE],default:()=>{throw new Error("Region is missing")}},Qt={preferredFile:"credentials"};var as=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var ya=e=>as(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Xt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return ya(t);let n=await t();return ya(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return as(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var Af=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var _f="content-length";function KE(e){return t=>async r=>{let n=r.request;if(q.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(_f)===-1)try{let i=e(o);n.headers={...n.headers,[_f]:String(i)}}catch{}}return t({...r,request:n})}}var GE={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Jt=e=>({applyToStack:t=>{t.add(KE(e.bodyLengthChecker),GE)}});function HE(e){return t=>async r=>{let{request:n}=r;return q.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var VE={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Rf=e=>({applyToStack:t=>{t.add(HE(e),VE)}});var WE=e=>t=>async r=>{if(!q.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},YE={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Zt=e=>({applyToStack:t=>{t.add(WE(e),YE)}});var QE=()=>(e,t)=>async r=>{var n,o;try{let s=await e(r),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:h}=d,p=f??t.inputFilterSensitiveLog,E=h??t.outputFilterSensitiveLog,{$metadata:b,...N}=s.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:i,commandName:a,input:p(r.input),output:E(N),metadata:b}),s}catch(s){let{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:f}=d,h=f??t.inputFilterSensitiveLog;throw(o=c==null?void 0:c.error)==null||o.call(c,{clientName:i,commandName:a,input:h(r.input),error:s,metadata:s.$metadata}),s}},XE={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},er=e=>({applyToStack:t=>{t.add(QE(),XE)}});var Nf="X-Amzn-Trace-Id",JE="AWS_LAMBDA_FUNCTION_NAME",ZE="_X_AMZN_TRACE_ID",eb=e=>t=>async r=>{let{request:n}=r;if(!q.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Nf))return t(r);let o=process.env[JE],s=process.env[ZE],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[Nf]=s),t({...r,request:n})},tb={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},tr=e=>({applyToStack:t=>{t.add(eb(e),tb)}});var mt;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(mt||(mt={}));var Nr=3,ut="STANDARD";var Tf=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Pf=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],If=[500,502,503,504],vf=["ECONNRESET","EPIPE","ETIMEDOUT"];var nn=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Tf.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},cs=e=>{var t;return Pf.includes(e.name)||vf.includes((e==null?void 0:e.code)||"")||If.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Of=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!cs(e)}return!1};var oo=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),nn(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var ds="amz-sdk-invocation-id",ls="amz-sdk-request";var Df=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var zf=(e,t,r,n)=>{let o=e,s=(n==null?void 0:n.retryCost)??5,i=(n==null?void 0:n.timeoutRetryCost)??10,a=(n==null?void 0:n.retryBackoffStrategy)??Df(),c=e,d=Math.min(2e4,t),f,h=r??0,p=Ne=>Ne==="TRANSIENT"?i:s,E=()=>h,b=()=>d,N=()=>f,v=Ne=>p(Ne)<=c;return{getRetryCount:E,getRetryDelay:b,getLastRetryCost:N,hasRetryTokens:v,getRetryTokenCount:Ne=>{let Sr=Ne.errorType;if(!v(Sr))throw new Error("No retry token available");let Un=p(Sr),Wy=Sr==="THROTTLING"?500:100;a.setDelayBase(Wy);let Lc=a.computeNextBackoffDelay(h);if(Ne.retryAfterHint){let Yy=Ne.retryAfterHint.getTime()-Date.now();d=Math.max(Yy||0,Lc)}else d=Lc;return h++,f=Un,c-=Un,Un},releaseRetryTokens:Ne=>{c+=Ne??1,c=Math.min(c,o)}}};var sn=class{constructor(t){this.maxAttemptsProvider=t,this.mode=mt.STANDARD,this.retryToken=zf(500,100),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n))return t.getRetryTokenCount(r),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Nr}`),Nr}}shouldRetry(t,r,n){return t.getRetryCount()<n&&t.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var ms=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=mt.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new oo,this.standardRetryStrategy=new sn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var ga=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var $f="AWS_MAX_ATTEMPTS",jf="max_attempts",rr={environmentVariableSelector:e=>{let t=e[$f];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${$f} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[jf];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${jf} mast be a number, got "${t}"`);return r},default:Nr},nr=e=>{let{retryStrategy:t}=e,r=Ce(e.maxAttempts??Nr);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await Ce(e.retryMode)()===mt.ADAPTIVE?new ms(r):new sn(r))}},rb="AWS_RETRY_MODE",nb="retry_mode",or={environmentVariableSelector:e=>e[rb],configFileSelector:e=>e[nb],default:ut};pi();var ob=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(sb(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:f}=n;for(q.isInstance(f)&&(f.headers[ds]=Fo());;)try{q.isInstance(f)&&(f.headers[ls]=`attempt=${c+1}; max=${s}`);let{response:h,output:p}=await t(n);return o.recordSuccess(i),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=d,{response:h,output:p}}catch(h){let p=ib(h);a=ga(h);try{i=await o.refreshRetryTokenForRetry(i,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let E=i.getRetryDelay();d+=E,await new Promise(b=>setTimeout(b,E))}}else return o=o,o!=null&&o.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},sb=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",ib=e=>{let t={errorType:ab(e)},r=db(e.$response);return r&&(t.retryAfterHint=r),t},ab=e=>nn(e)?"THROTTLING":cs(e)?"TRANSIENT":Of(e)?"SERVER_ERROR":"CLIENT_ERROR",cb={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},sr=e=>({applyToStack:t=>{t.add(ob(e),cb)}}),db=e=>{if(!tt.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Me=class extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,Me.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var D=class extends Me{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,D.prototype)}};var Fe=class extends Me{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,Fe.prototype)}};function us(...e){return()=>{let t=Promise.reject(new Me("No providers in chain"));for(let r of e)t=t.catch(n=>{if(n!=null&&n.tryNextLink)return r();throw n});return t}}var qf=e=>()=>Promise.resolve(e);var ir=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var Kf={},xa={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Kf[e]=t,xa[t]=e}function Gf(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in xa)t[r/2]=xa[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function we(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Kf[e[r]];return t}var Hf="X-Amz-Algorithm",Vf="X-Amz-Credential",Ca="X-Amz-Date",Wf="X-Amz-SignedHeaders",Yf="X-Amz-Expires",wa="X-Amz-Signature",Ea="X-Amz-Security-Token";var ba="authorization",Sa=Ca.toLowerCase(),lb="date",Qf=[ba,Sa,lb],Xf=wa.toLowerCase(),so="x-amz-content-sha256",Jf=Ea.toLowerCase();var Zf={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},em=/^proxy-/,tm=/^sec-/;var hs="AWS4-HMAC-SHA256";var rm="AWS4-HMAC-SHA256-PAYLOAD",nm="UNSIGNED-PAYLOAD",om=50,ka="aws4_request",sm=60*60*24*7;var ps={},Aa=[],ys=(e,t,r)=>`${e}/${t}/${r}/${ka}`,am=async(e,t,r,n,o)=>{let s=await im(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${we(s)}:${t.sessionToken}`;if(i in ps)return ps[i];for(Aa.push(i);Aa.length>om;)delete ps[Aa.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,ka])a=await im(e,a,c);return ps[i]=a};var im=(e,t,r)=>{let n=new e(t);return n.update(Be(r)),n.digest()};var gs=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Zf||t!=null&&t.has(s)||em.test(s)||tm.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var ht=e=>encodeURIComponent(e).replace(/[!'()*]/g,fb),fb=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var _a=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===Xf)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${ht(n)}=${ht(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).sort().reduce((s,i)=>s.concat([`${ht(n)}=${ht(i)}`]),[]).join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var io=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===so)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Zr(t)){let n=new r;return n.update(Be(t)),we(await n.digest())}return nm};var cm=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var xs=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?mb(t):void 0}),mb=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var Ra=(e,t={})=>{var o;let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():xs(e);for(let s of Object.keys(r)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!((o=t.unhoistableHeaders)!=null&&o.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}};var Cs=e=>{e=typeof e.clone=="function"?e.clone():xs(e);for(let t of Object.keys(e.headers))Qf.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var dm=e=>ub(e).toISOString().replace(/\.\d{3}Z$/,"Z"),ub=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var Tr=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Ce(n),this.credentialProvider=Ce(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,f=await this.credentialProvider();this.validateResolvedCredentials(f);let h=c??await this.regionProvider(),{longDate:p,shortDate:E}=ws(n);if(o>sm)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let b=ys(E,h,d??this.service),N=Ra(Cs(t),{unhoistableHeaders:i});f.sessionToken&&(N.query[Ea]=f.sessionToken),N.query[Hf]=hs,N.query[Vf]=`${f.accessKeyId}/${b}`,N.query[Ca]=p,N.query[Yf]=o.toString(10);let v=gs(N,s,a);return N.query[Wf]=lm(v),N.query[wa]=await this.getSignature(p,b,this.getSigningKey(f,h,E,d),this.createCanonicalRequest(N,v,await io(t,this.sha256))),N}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=ws(n),f=ys(c,a,i??this.service),h=await io({headers:{},body:r},this.sha256),p=new this.sha256;p.update(t);let E=we(await p.digest()),b=[rm,d,f,o,E,h].join(`
`);return this.signString(b,{signingDate:n,signingRegion:a,signingService:i})}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=ws(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(Be(t)),we(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=Cs(t),{longDate:f,shortDate:h}=ws(r),p=ys(h,c,i??this.service);d.headers[Sa]=f,a.sessionToken&&(d.headers[Jf]=a.sessionToken);let E=await io(d,this.sha256);!cm(so,d.headers)&&this.applyChecksum&&(d.headers[so]=E);let b=gs(d,o,n),N=await this.getSignature(f,p,this.getSigningKey(a,c,h,i),this.createCanonicalRequest(d,b,E));return d.headers[ba]=`${hs} Credential=${a.accessKeyId}/${p}, SignedHeaders=${lm(b)}, Signature=${N}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${_a(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(Be(n));let s=await o.digest();return`${hs}
${t}
${r}
${we(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(Be(s)),we(await i.digest())}getSigningKey(t,r,n,o){return am(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},ws=e=>{let t=dm(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},lm=e=>Object.keys(e).sort().join(";");var hb=3e5,Es=e=>{let t=e.credentials?pb(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=Ce(e.signer):e.regionInfoProvider?s=()=>Ce(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let f={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},h=e.signerConstructor||Tr;return new h(f)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ce(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},f=e.signerConstructor||Tr;return new f(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var pb=e=>typeof e=="function"?ir(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<hb,t=>t.expiration!==void 0):Ce(e);var bs=e=>new Date(Date.now()+e);var fm=(e,t)=>Math.abs(bs(t).getTime()-e)>=3e5;var Na=(e,t)=>{let r=Date.parse(e);return fm(r,t)?r-Date.now():t};var yb=e=>(t,r)=>async function(n){var d,f,h,p;if(!q.isInstance(n.request))return t(n);let o=(h=(f=(d=r.endpointV2)==null?void 0:d.properties)==null?void 0:f.authSchemes)==null?void 0:h[0],s=(o==null?void 0:o.name)==="sigv4a"?(p=o==null?void 0:o.signingRegionSet)==null?void 0:p.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:bs(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(E=>{let b=E.ServerTime??mm(E.$response);throw b&&(e.systemClockOffset=Na(b,e.systemClockOffset)),E}),c=mm(a.response);return c&&(e.systemClockOffset=Na(c,e.systemClockOffset)),a},mm=e=>{var t,r;return tt.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},gb={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Ss=e=>({applyToStack:t=>{t.addRelativeTo(yb(e),gb)}});function ar(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var Ta={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var um=Ta,hm="",Cb=e=>{let{partitions:t}=um;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},pm=(e,t="")=>{um=e,hm=t},wb=()=>{pm(Ta,"")},Pa=()=>hm;var _t="endpoints";function Ye(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Ye(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Ye).join(", ")})`:JSON.stringify(e,null,2)}var re=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Da={};zr(Da,{aws:()=>Ia,booleanEquals:()=>kb,getAttr:()=>va,isSet:()=>Ab,isValidHostLabel:()=>As,not:()=>_b,parseURL:()=>Rb,stringEquals:()=>Nb,substring:()=>Tb,uriEncode:()=>Pb});var Ia={};zr(Ia,{getUserAgentPrefix:()=>Pa,isVirtualHostableS3Bucket:()=>ym,parseArn:()=>Sb,partition:()=>Cb,setPartitionInfo:()=>pm,useDefaultPartitionInfo:()=>wb});var Eb=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ks=e=>Eb.test(e)||e.startsWith("[")&&e.endsWith("]");var bb=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),As=(e,t=!1)=>{if(!t)return bb.test(e);let r=e.split(".");for(let n of r)if(!As(n))return!1;return!0};var ym=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!ym(r))return!1;return!0}return!(!As(e)||e.length<3||e.length>63||e!==e.toLowerCase()||ks(e))};var Sb=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var kb=(e,t)=>e===t;var gm=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new re(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new re(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var va=(e,t)=>gm(t).reduce((r,n)=>{if(typeof r!="object")throw new re(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var Ab=e=>e!=null;var _b=e=>!e;var xm;(function(e){e.HEADER="header",e.QUERY="query"})(xm||(xm={}));var Cm;(function(e){e.AAAA="AAAA",e.A="A"})(Cm||(Cm={}));var an;(function(e){e.HTTP="http",e.HTTPS="https"})(an||(an={}));var wm;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(wm||(wm={}));var Oa={[an.HTTP]:80,[an.HTTPS]:443},Rb=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:p,port:E,protocol:b="",path:N="",query:v={}}=e,$e=new URL(`${b}//${p}${E?`:${E}`:""}${N}`);return $e.search=Object.entries(v).map(([br,Ne])=>`${br}=${Ne}`).join("&"),$e}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(an).includes(c))return null;let d=ks(o),f=r.includes(`${n}:${Oa[c]}`)||typeof e=="string"&&e.includes(`${n}:${Oa[c]}`),h=`${n}${f?`:${Oa[c]}`:""}`;return{scheme:c,authority:h,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var Nb=(e,t)=>e===t;var Tb=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var Pb=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var _s=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(va(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var Em=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var cr=(e,t,r)=>{if(typeof e=="string")return _s(e,r);if(e.fn)return Rs(e,r);if(e.ref)return Em(e,r);throw new re(`'${t}': ${String(e)} is not a string, function or reference.`)};var Rs=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:cr(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],Da)(...n)};var bm=({assign:e,...t},r)=>{var o,s;if(e&&e in r.referenceRecord)throw new re(`'${e}' is already defined in Reference Record.`);let n=Rs(t,r);return(s=(o=r.logger)==null?void 0:o.debug)==null||s.call(o,_t,`evaluateCondition: ${Ye(t)} = ${Ye(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var cn=(e=[],t)=>{var n,o;let r={};for(let s of e){let{result:i,toAssign:a}=bm(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(o=(n=t.logger)==null?void 0:n.debug)==null||o.call(n,_t,`assign: ${a.name} := ${Ye(a.value)}`))}return{result:!0,referenceRecord:r}};var Sm=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=cr(s,"Header value entry",t);if(typeof i!="string")throw new re(`Header '${n}' value '${i}' is not a string`);return i})}),{});var Ba=(e,t)=>{if(Array.isArray(e))return e.map(r=>Ba(r,t));switch(typeof e){case"string":return _s(e,t);case"object":if(e===null)throw new re(`Unexpected endpoint property: ${e}`);return Ns(e,t);case"boolean":return e;default:throw new re(`Unexpected endpoint property type: ${typeof e}`)}};var Ns=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:Ba(o,t)}),{});var km=(e,t)=>{let r=cr(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new re(`Endpoint URL must be a string, got ${typeof r}`)};var Am=(e,t)=>{var f,h;let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=cn(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return(h=(f=t.logger)==null?void 0:f.debug)==null||h.call(f,_t,`Resolving endpoint from template: ${Ye(n)}`),{...d!=null&&{headers:Sm(d,i)},...c!=null&&{properties:Ns(c,i)},url:km(a,i)}};var _m=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=cn(r,t);if(o)throw new re(cr(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var Rm=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=cn(r,t);if(o)return Ts(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var Ts=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=Am(r,t);if(n)return n}else if(r.type==="error")_m(r,t);else if(r.type==="tree"){let n=Rm(r,t);if(n)return n}else throw new re(`Unknown endpoint rule: ${r}`);throw new re("Rules evaluation failed")};var dr=(e,t)=>{var d,f,h,p,E;let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;(f=(d=t.logger)==null?void 0:d.debug)==null||f.call(d,_t,`Initial EndpointParams: ${Ye(r)}`);let i=Object.entries(o).filter(([,b])=>b.default!=null).map(([b,N])=>[b,N.default]);if(i.length>0)for(let[b,N]of i)r[b]=r[b]??N;let a=Object.entries(o).filter(([,b])=>b.required).map(([b])=>b);for(let b of a)if(r[b]==null)throw new re(`Missing required parameter: '${b}'`);let c=Ts(s,{endpointParams:r,logger:n,referenceRecord:{}});if((h=t.endpointParams)!=null&&h.Endpoint)try{let b=new URL(t.endpointParams.Endpoint),{protocol:N,port:v}=b;c.url.protocol=N,c.url.port=v}catch{}return(E=(p=t.logger)==null?void 0:p.debug)==null||E.call(p,_t,`Resolved endpoint: ${Ye(c)}`),c};var Ma="user-agent",Ps="x-amz-user-agent",Fa=" ",Nm=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var Ib=e=>(t,r)=>async n=>{var p,E;let{request:o}=n;if(!q.isInstance(o))return t(n);let{headers:s}=o,i=((p=r==null?void 0:r.userAgent)==null?void 0:p.map(La))||[],a=(await e.defaultUserAgentProvider()).map(La),c=((E=e==null?void 0:e.customUserAgent)==null?void 0:E.map(La))||[],d=Pa(),f=(d?[d]:[]).concat([...a,...i,...c]).join(Fa),h=[...a.filter(b=>b.startsWith("aws-sdk-")),...c].join(Fa);return e.runtime!=="browser"?(h&&(s[Ps]=s[Ps]?`${s[Ma]} ${h}`:h),s[Ma]=f):s[Ps]=f,t({...n,request:o})},La=([e,t])=>{let r=e.indexOf("/"),n=e.substring(0,r),o=e.substring(r+1);return n==="api"&&(o=o.toLowerCase()),[n,o,t].filter(s=>s&&s.length>0).map(s=>s==null?void 0:s.replace(Nm,"_")).join("/")},vb={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},lr=e=>({applyToStack:t=>{t.add(Ib(e),vb)}});var Tm=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"});var Pm={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.321.1","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.321.1","@aws-sdk/eventstream-serde-browser":"3.310.0","@aws-sdk/eventstream-serde-config-resolver":"3.310.0","@aws-sdk/eventstream-serde-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-blob-browser":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/hash-stream-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/md5-js":"3.310.0","@aws-sdk/middleware-bucket-endpoint":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-expect-continue":"3.310.0","@aws-sdk/middleware-flexible-checksums":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-location-constraint":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-s3":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-ssec":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/signature-v4-multi-region":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-stream-browser":"3.310.0","@aws-sdk/util-stream-node":"3.321.1","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0","@aws-sdk/xml-builder":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var Im=kr(Qi());var Le=class extends Ge{constructor(t){super(t),Object.setPrototypeOf(this,Le.prototype)}};var dn=class extends Le{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,dn.prototype)}},ln=class extends Le{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,ln.prototype)}},fn=class extends Le{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,fn.prototype)}},mn=class extends Le{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,mn.prototype)}},un=class extends Le{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,un.prototype)}},hn=class extends Le{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,hn.prototype)}},pn=class extends Le{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,pn.prototype)}};var vm=async(e,t)=>{let r=Gm,n;return n=Vm({...zb(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Km(t,r,"/",void 0,n)};var Om=async(e,t)=>{let r=Gm,n;return n=Vm({...Ub(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Km(t,r,"/",void 0,n)};var Dm=async(e,t)=>{if(e.statusCode>=300)return Db(e,t);let r=await za(e.body,t),n={};return n=Gb(r.AssumeRoleResult,t),{$metadata:Rt(e),...n}},Db=async(e,t)=>{let r={...e,body:await Hm(e.body,t)},n=Wm(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Mm(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Fm(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Lm(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await zm(r,t);default:let o=r.body;return qm({output:e,parsedBody:o.Error,errorCode:n})}};var Bm=async(e,t)=>{if(e.statusCode>=300)return Bb(e,t);let r=await za(e.body,t),n={};return n=Hb(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Rt(e),...n}},Bb=async(e,t)=>{let r={...e,body:await Hm(e.body,t)},n=Wm(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Mm(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Mb(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Fb(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Lb(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Fm(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Lm(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await zm(r,t);default:let o=r.body;return qm({output:e,parsedBody:o.Error,errorCode:n})}};var Mm=async(e,t)=>{let r=e.body,n=Vb(r.Error,t),o=new dn({$metadata:Rt(e),...n});return Y(o,r)},Mb=async(e,t)=>{let r=e.body,n=Wb(r.Error,t),o=new pn({$metadata:Rt(e),...n});return Y(o,r)},Fb=async(e,t)=>{let r=e.body,n=Yb(r.Error,t),o=new un({$metadata:Rt(e),...n});return Y(o,r)};var Lb=async(e,t)=>{let r=e.body,n=Qb(r.Error,t),o=new hn({$metadata:Rt(e),...n});return Y(o,r)},Fm=async(e,t)=>{let r=e.body,n=Xb(r.Error,t),o=new ln({$metadata:Rt(e),...n});return Y(o,r)},Lm=async(e,t)=>{let r=e.body,n=Jb(r.Error,t),o=new fn({$metadata:Rt(e),...n});return Y(o,r)},zm=async(e,t)=>{let r=e.body,n=Zb(r.Error,t),o=new mn({$metadata:Rt(e),...n});return Y(o,r)},zb=(e,t)=>{var n,o,s;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let i=Um(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([a,c])=>{let d=`PolicyArns.${a}`;r[d]=c})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let i=Kb(e.Tags,t);((o=e.Tags)==null?void 0:o.length)===0&&(r.Tags=[]),Object.entries(i).forEach(([a,c])=>{let d=`Tags.${a}`;r[d]=c})}if(e.TransitiveTagKeys!=null){let i=qb(e.TransitiveTagKeys,t);((s=e.TransitiveTagKeys)==null?void 0:s.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([a,c])=>{let d=`TransitiveTagKeys.${a}`;r[d]=c})}return e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),r};var Ub=(e,t)=>{var n;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let o=Um(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(o).forEach(([s,i])=>{let a=`PolicyArns.${s}`;r[a]=i})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var Um=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=$b(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},$b=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},jb=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},qb=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},Kb=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=jb(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},$m=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=T(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=T(e.Arn)),r},Gb=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=jm(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=$m(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=St(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=T(e.SourceIdentity)),r};var Hb=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=jm(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=T(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=$m(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=St(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=T(e.Provider)),e.Audience!==void 0&&(r.Audience=T(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=T(e.SourceIdentity)),r},jm=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=T(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=T(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=T(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=ve(Vn(e.Expiration))),r};var Vb=(e,t)=>{let r={};return e.message!==void 0&&(r.message=T(e.message)),r};var Wb=(e,t)=>{let r={};return e.message!==void 0&&(r.message=T(e.message)),r},Yb=(e,t)=>{let r={};return e.message!==void 0&&(r.message=T(e.message)),r};var Qb=(e,t)=>{let r={};return e.message!==void 0&&(r.message=T(e.message)),r},Xb=(e,t)=>{let r={};return e.message!==void 0&&(r.message=T(e.message)),r},Jb=(e,t)=>{let r={};return e.message!==void 0&&(r.message=T(e.message)),r},Zb=(e,t)=>{let r={};return e.message!==void 0&&(r.message=T(e.message)),r},Rt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),eS=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),tS=(e,t)=>eS(e,t).then(r=>t.utf8Encoder(r)),qm=Ut(Le),Km=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new q(d)},Gm={"content-type":"application/x-www-form-urlencoded"},za=(e,t)=>tS(e,t).then(r=>{if(r.length){let n=new Im.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),Wn(a)}return{}}),Hm=async(e,t)=>{let r=await za(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Vm=e=>Object.entries(e).map(([t,r])=>Yr(t)+"="+Yr(r)).join("&"),Wm=(e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var yn=class extends Ie{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(He(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ve(r,yn.getEndpointParameterInstructions())),this.middlewareStack.use(Ss(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f},{requestHandler:d}=r;return o.resolve(f=>d.handle(f.request,n||{}),c)}serialize(t,r){return vm(t,r)}deserialize(t,r){return Dm(t,r)}};var gn=class extends Ie{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(He(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ve(r,gn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f},{requestHandler:d}=r;return o.resolve(f=>d.handle(f.request,n||{}),c)}serialize(t,r){return Om(t,r)}deserialize(t,r){return Bm(t,r)}};var Ym=(e,{stsClientCtor:t})=>Es({...e,stsClientCtor:t});var Qm=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Xm={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.321.1","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Jm="us-east-1",Zm=e=>typeof e!="function"?e===void 0?Jm:e:async()=>{try{return await e()}catch{return Jm}},Ua=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:Zm(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new yn(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},$a=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:Zm(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new gn(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},eu=e=>t=>e({roleAssumer:Ua(t,t.stsClientCtor),roleAssumerWithWebIdentity:$a(t,t.stsClientCtor),...t});var nS="AWS_ACCESS_KEY_ID",oS="AWS_SECRET_ACCESS_KEY",sS="AWS_SESSION_TOKEN",iS="AWS_CREDENTIAL_EXPIRATION",Is=()=>async()=>{let e=process.env[nS],t=process.env[oS],r=process.env[sS],n=process.env[iS];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new D("Unable to find environment variable credentials.")};import{homedir as aS}from"os";import{sep as cS}from"path";var xn=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${cS}`}=process.env;return e||t||(r?`${n}${r}`:aS())};var ja="AWS_PROFILE",dS="default",Qe=e=>e.profile||process.env[ja]||dS;import{createHash as lS}from"crypto";import{join as fS}from"path";var vs=e=>{let r=lS("sha1").update(e).digest("hex");return fS(xn(),".aws","sso","cache",`${r}.json`)};import{promises as mS}from"fs";var{readFile:uS}=mS,Os=async e=>{let t=vs(e),r=await uS(t,"utf8");return JSON.parse(r)};import{join as hS}from"path";var pS="AWS_CONFIG_FILE",Ds=()=>process.env[pS]||hS(xn(),".aws","config");import{join as yS}from"path";var gS="AWS_SHARED_CREDENTIALS_FILE",tu=()=>process.env[gS]||yS(xn(),".aws","credentials");var ru=/^profile\s(["'])?([^\1]+)\1$/,nu=e=>Object.entries(e).filter(([t])=>ru.test(t)).reduce((t,[r,n])=>({...t,[ru.exec(r)[2]]:n}),{...e.default&&{default:e.default}});var xS=["__proto__","profile __proto__"],ao=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),xS.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),i=0,a=n.length-1;if(s!==-1&&s!==i&&s!==a){let[d,f]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][d]=f}}return t};import{promises as CS}from"fs";var{readFile:wS}=CS,qa={},co=(e,t)=>((!qa[e]||t!=null&&t.ignoreCache)&&(qa[e]=wS(e,"utf8")),qa[e]);var ou=()=>({}),Bs=async(e={})=>{let{filepath:t=tu(),configFilepath:r=Ds()}=e,n=await Promise.all([co(r,{ignoreCache:e.ignoreCache}).then(ao).then(nu).catch(ou),co(t,{ignoreCache:e.ignoreCache}).then(ao).catch(ou)]);return{configFile:n[0],credentialsFile:n[1]}};var su=/^sso-session\s(["'])?([^\1]+)\1$/,iu=e=>Object.entries(e).filter(([t])=>su.test(t)).reduce((t,[r,n])=>({...t,[su.exec(r)[2]]:n}),{});var ES=()=>({}),Ms=async(e={})=>co(e.configFilepath??Ds()).then(ao).then(iu).catch(ES);var au=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var fr=async e=>{let t=await Bs(e);return au(t.configFile,t.credentialsFile)};import{parse as kS}from"url";import{Buffer as bS}from"buffer";import{request as SS}from"http";function Nt(e){return new Promise((t,r)=>{var o;let n=SS({method:"GET",...e,hostname:(o=e.hostname)==null?void 0:o.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new Me("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new Me("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new Me("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(bS.concat(a)),n.destroy()})}),n.end()})}var Fs=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Ls=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var zs=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var lo=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var fo="AWS_CONTAINER_CREDENTIALS_FULL_URI",mo="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",cu="AWS_CONTAINER_AUTHORIZATION_TOKEN",Us=(e={})=>{let{timeout:t,maxRetries:r}=zs(e);return()=>lo(async()=>{let n=await TS(),o=JSON.parse(await AS(t,n));if(!Fs(o))throw new D("Invalid response received from instance metadata service.");return Ls(o)},r)},AS=async(e,t)=>(process.env[cu]&&(t.headers={...t.headers,Authorization:process.env[cu]}),(await Nt({...t,timeout:e})).toString()),_S="169.254.170.2",RS={localhost:!0,"127.0.0.1":!0},NS={"http:":!0,"https:":!0},TS=async()=>{if(process.env[mo])return{hostname:_S,path:process.env[mo]};if(process.env[fo]){let e=kS(process.env[fo]);if(!e.hostname||!(e.hostname in RS))throw new D(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in NS))throw new D(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new D(`The container metadata credential provider cannot be used unless the ${mo} or ${fo} environment variable is set`,!1)};var du=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new D(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var lu=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=Qe(r),{configFile:o,credentialsFile:s}=await Bs(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new D(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var PS=e=>typeof e=="function",fu=e=>PS(e)?async()=>await e():qf(e);var H=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>ir(us(du(e),lu(t,n),fu(r)));var uo;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(uo||(uo={}));var IS="AWS_EC2_METADATA_SERVICE_ENDPOINT",vS="ec2_metadata_service_endpoint",mu={environmentVariableSelector:e=>e[IS],configFileSelector:e=>e[vS],default:void 0};var mr;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(mr||(mr={}));var OS="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",DS="ec2_metadata_service_endpoint_mode",uu={environmentVariableSelector:e=>e[OS],configFileSelector:e=>e[DS],default:mr.IPv4};var ho=async()=>Oe(await BS()||await MS()),BS=async()=>H(mu)(),MS=async()=>{let e=await H(uu)();switch(e){case mr.IPv4:return uo.IPv4;case mr.IPv6:return uo.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(mr)}`)}};var FS="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Ka=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+FS);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var hu=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=Ka(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=Ka(n,r);else throw s}return n=o,o}};var pu="/latest/meta-data/iam/security-credentials/",LS="/latest/api/token",$s=(e={})=>hu(zS(e),{logger:e.logger}),zS=e=>{let t=!1,{timeout:r,maxRetries:n}=zs(e),o=async(s,i)=>{let a=(await lo(async()=>{let c;try{c=await $S(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return lo(async()=>{let c;try{c=await jS(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await ho();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await US({...s,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},US=async e=>Nt({...e,path:LS,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),$S=async e=>(await Nt({...e,path:pu})).toString(),jS=async(e,t)=>{let r=JSON.parse((await Nt({...t,path:pu+e})).toString());if(!Fs(r))throw new D("Invalid response received from instance metadata service.");return Ls(r)};var yu=(e,t)=>{let r={EcsContainer:Us,Ec2InstanceMetadata:$s,Environment:Is};if(e in r)return r[e]();throw new D(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var gu=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(qS(e)||KS(e)),qS=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",KS=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",xu=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new D(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new D(`Detected a cycle attempting to resolve credentials for profile ${Qe(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?js(s,t,r,{...n,[s]:!0}):yu(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new D(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};import{exec as GS}from"child_process";import{promisify as HS}from"util";var Cu=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var wu=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=HS(GS);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Cu(e,i)}catch(s){throw new D(s.message)}}else throw new D(`Profile ${e} did not contain credential_process.`)}else throw new D(`Profile ${e} could not be found in shared credentials file.`)};var qs=(e={})=>async()=>{let t=await fr(e);return wu(Qe(e),t)};var Eu=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",bu=async(e,t)=>qs({...e,profile:t})();var po=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var rt=class extends Ge{constructor(t){super(t),Object.setPrototypeOf(this,rt.prototype)}};var Cn=class extends rt{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Cn.prototype)}},wn=class extends rt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,wn.prototype)}},En=class extends rt{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,En.prototype)}},bn=class extends rt{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,bn.prototype)}},Su=e=>({...e,...e.accessToken&&{accessToken:_r}}),VS=e=>({...e,...e.secretAccessKey&&{secretAccessKey:_r},...e.sessionToken&&{sessionToken:_r}}),ku=e=>({...e,...e.roleCredentials&&{roleCredentials:VS(e.roleCredentials)}});var Au=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=V({},r0,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=V({role_name:[,ve(e.roleName,"roleName")],account_id:[,ve(e.accountId,"accountId")]}),d;return new q({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var _u=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return WS(e,t);let r=V({$metadata:yo(e)}),n=ve(Wr(await Ru(e.body,t)),"body"),o=le(n,{roleCredentials:Yn});return Object.assign(r,o),r},WS=async(e,t)=>{let r={...e,body:await n0(e.body,t)},n=o0(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await QS(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await XS(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await JS(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await ZS(r,t);default:let o=r.body;return YS({output:e,parsedBody:o,errorCode:n})}};var YS=Ut(rt),QS=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{message:T});Object.assign(r,o);let s=new Cn({$metadata:yo(e),...r});return Y(s,e.body)},XS=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{message:T});Object.assign(r,o);let s=new wn({$metadata:yo(e),...r});return Y(s,e.body)},JS=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{message:T});Object.assign(r,o);let s=new En({$metadata:yo(e),...r});return Y(s,e.body)},ZS=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{message:T});Object.assign(r,o);let s=new bn({$metadata:yo(e),...r});return Y(s,e.body)},yo=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),e0=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),t0=(e,t)=>e0(e,t).then(r=>t.utf8Encoder(r)),r0=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Ru=(e,t)=>t0(e,t).then(r=>r.length?JSON.parse(r):{}),n0=async(e,t)=>{let r=await Ru(e,t);return r.message=r.message??r.Message,r},o0=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Sn=class extends Ie{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(He(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ve(r,Sn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Su,outputFilterSensitiveLog:ku},{requestHandler:d}=r;return o.resolve(f=>d.handle(f.request,n||{}),c)}serialize(t,r){return Au(t,r)}deserialize(t,r){return _u(t,r)}};var Nu=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var Tu={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};import{Buffer as i0}from"buffer";import{createHash as a0,createHmac as c0}from"crypto";var Xe=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(Be(Pu(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?c0(this.algorithmIdentifier,Pu(this.secret)):a0(this.algorithmIdentifier)}};function Pu(e,t){return i0.isBuffer(e)?e:typeof e=="string"?en(e,t):ArrayBuffer.isView(e)?At(e.buffer,e.byteOffset,e.byteLength):At(e)}function Ga(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=ht(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${ht(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${ht(n)}`),t.push(o)}}return t.join("&")}import{Agent as l0,request as f0}from"http";import{Agent as m0,request as u0}from"https";var Iu=["ECONNRESET","EPIPE","ETIMEDOUT"];var Ha=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var vu=(e,t,r=0)=>{r&&e.on("socket",n=>{if(n.connecting){let o=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);n.on("connect",()=>{clearTimeout(o)})}})};var Ou=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};import{Readable as d0}from"stream";function Va(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{Du(e,t.body)}):Du(e,t.body)}function Du(e,t){t instanceof d0?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var pt=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:s||new l0({keepAlive:a,maxSockets:c}),httpsAgent:i||new m0({keepAlive:a,maxSockets:c})}}destroy(){var t,r,n,o;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(o=(n=this.config)==null?void 0:n.httpsAgent)==null||o.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let f=new Error("Request aborted");f.name="AbortError",o(f);return}let s=t.protocol==="https:",i=Ga(t.query||{}),a={headers:t.headers,host:t.hostname,method:t.method,path:i?`${t.path}?${i}`:t.path,port:t.port,agent:s?this.config.httpsAgent:this.config.httpAgent},d=(s?u0:f0)(a,f=>{let h=new tt({statusCode:f.statusCode||-1,headers:Ha(f.headers),body:f});n({response:h})});d.on("error",f=>{Iu.includes(f.code)?o(Object.assign(f,{name:"TimeoutError"})):o(f)}),vu(d,o,this.config.connectionTimeout),Ou(d,o,this.config.requestTimeout),r&&(r.onabort=()=>{d.abort();let f=new Error("Request aborted");f.name="AbortError",o(f)}),Va(d,t)})}};var Wa=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};import{Writable as h0}from"stream";var Ks=class extends h0{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var yt=e=>new Promise((t,r)=>{let n=new Ks;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});import{fstatSync as p0,lstatSync as y0}from"fs";var ur=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return y0(e.path).size;if(typeof e.fd=="number")return p0(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};import{platform as g0,release as x0}from"os";import{env as Mu,versions as C0}from"process";var Bu=()=>{try{return typeof ie=="function"&&typeof module<"u"&&ie("aws-crt")?["md/crt-avail"]:null}catch{return null}};var w0="AWS_SDK_UA_APP_ID",E0="sdk-ua-app-id",hr=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],[`os/${g0()}`,x0()],["lang/js"],["md/nodejs",`${C0.node}`]],n=Bu();n&&r.push(n),e&&r.push([`api/${e}`,t]),Mu.AWS_EXECUTION_ENV&&r.push([`exec-env/${Mu.AWS_EXECUTION_ENV}`]);let o=H({environmentVariableSelector:i=>i[w0],configFileSelector:i=>i[E0],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var b0=/^[A-Za-z0-9+/]*={0,2}$/,pr=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!b0.exec(e))throw new TypeError("Invalid base64 string.");let t=en(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var yr=e=>At(e.buffer,e.byteOffset,e.byteLength).toString("base64");var Ku="required",Tt="fn",Pt="argv",kn="ref",Ya="PartitionResult",gt="tree",go="error",xo="endpoint",Fu={[Ku]:!1,type:"String"},Lu={[Ku]:!0,default:!1,type:"Boolean"},Gu={[kn]:"Endpoint"},Hu={[Tt]:"booleanEquals",[Pt]:[{[kn]:"UseFIPS"},!0]},Vu={[Tt]:"booleanEquals",[Pt]:[{[kn]:"UseDualStack"},!0]},xt={},zu={[Tt]:"booleanEquals",[Pt]:[!0,{[Tt]:"getAttr",[Pt]:[{[kn]:Ya},"supportsFIPS"]}]},Uu={[Tt]:"booleanEquals",[Pt]:[!0,{[Tt]:"getAttr",[Pt]:[{[kn]:Ya},"supportsDualStack"]}]},$u=[Gu],ju=[Hu],qu=[Vu],S0={version:"1.0",parameters:{Region:Fu,UseDualStack:Lu,UseFIPS:Lu,Endpoint:Fu},rules:[{conditions:[{[Tt]:"aws.partition",[Pt]:[{[kn]:"Region"}],assign:Ya}],type:gt,rules:[{conditions:[{[Tt]:"isSet",[Pt]:$u},{[Tt]:"parseURL",[Pt]:$u,assign:"url"}],type:gt,rules:[{conditions:ju,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:go},{type:gt,rules:[{conditions:qu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:go},{endpoint:{url:Gu,properties:xt,headers:xt},type:xo}]}]},{conditions:[Hu,Vu],type:gt,rules:[{conditions:[zu,Uu],type:gt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:xt,headers:xt},type:xo}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:go}]},{conditions:ju,type:gt,rules:[{conditions:[zu],type:gt,rules:[{type:gt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:xt,headers:xt},type:xo}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:go}]},{conditions:qu,type:gt,rules:[{conditions:[Uu],type:gt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:xt,headers:xt},type:xo}]},{error:"DualStack is enabled but this partition does not support DualStack",type:go}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:xt,headers:xt},type:xo}]}]},Wu=S0;var Yu=(e,t={})=>dr(Wu,{endpointParams:e,logger:t.logger});var Qu=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??pr,base64Encoder:(e==null?void 0:e.base64Encoder)??yr,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Yu,logger:(e==null?void 0:e.logger)??new st,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??Oe,utf8Decoder:(e==null?void 0:e.utf8Decoder)??dt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Vt});var Xu="AWS_EXECUTION_ENV",Qa="AWS_REGION",Xa="AWS_DEFAULT_REGION",Ju="AWS_EC2_METADATA_DISABLED",Zu=["in-region","cross-region","mobile","standard","legacy"],eh="/latest/meta-data/placement/region";var k0="AWS_DEFAULTS_MODE",A0="defaults_mode",th={environmentVariableSelector:e=>e[k0],configFileSelector:e=>e[A0],default:"legacy"};var gr=({region:e=H(ft),defaultsMode:t=H(th)}={})=>ir(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return _0(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Zu.join(", ")}, got ${r}`)}}),_0=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await R0();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},R0=async()=>{if(process.env[Xu]&&(process.env[Qa]||process.env[Xa]))return process.env[Qa]??process.env[Xa];if(!process.env[Ju])try{let e=await ho();return(await Nt({...e,path:eh})).toString()}catch{}};var rh=e=>{jt(process.version);let t=gr(e),r=()=>t().then($t),n=Qu(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ur,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??hr({serviceId:n.serviceId,clientVersion:Tu.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??H(rr),region:(e==null?void 0:e.region)??H(ft,Qt),requestHandler:(e==null?void 0:e.requestHandler)??new pt(r),retryMode:(e==null?void 0:e.retryMode)??H({...or,default:async()=>(await r()).retryMode||ut}),sha256:(e==null?void 0:e.sha256)??Xe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??yt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??H(Wt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??H(Yt)}};var Gs=class extends it{constructor(t){let r=rh(t),n=Nu(r),o=Xt(n),s=qt(o),i=nr(s),a=i,c=ar(a);super(c),this.config=c,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Zt(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(tr(this.config)),this.middlewareStack.use(lr(this.config))}destroy(){super.destroy()}};var An="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var ye=class extends Ge{constructor(t){super(t),Object.setPrototypeOf(this,ye.prototype)}};var _n=class extends ye{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,_n.prototype),this.error=t.error,this.error_description=t.error_description}},Rn=class extends ye{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Rn.prototype),this.error=t.error,this.error_description=t.error_description}},Nn=class extends ye{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Nn.prototype),this.error=t.error,this.error_description=t.error_description}},Tn=class extends ye{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Tn.prototype),this.error=t.error,this.error_description=t.error_description}},Pn=class extends ye{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Pn.prototype),this.error=t.error,this.error_description=t.error_description}},In=class extends ye{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,In.prototype),this.error=t.error,this.error_description=t.error_description}},vn=class extends ye{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,vn.prototype),this.error=t.error,this.error_description=t.error_description}},On=class extends ye{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,On.prototype),this.error=t.error,this.error_description=t.error_description}},Dn=class extends ye{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Dn.prototype),this.error=t.error,this.error_description=t.error_description}},Bn=class extends ye{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Bn.prototype),this.error=t.error,this.error_description=t.error_description}},Mn=class extends ye{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Mn.prototype),this.error=t.error,this.error_description=t.error_description}};var nh=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(le(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>Yn(d)})),new q({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})};var oh=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return N0(e,t);let r=V({$metadata:Je(e)}),n=ve(Wr(await sh(e.body,t)),"body"),o=le(n,{accessToken:T,expiresIn:Ko,idToken:T,refreshToken:T,tokenType:T});return Object.assign(r,o),r},N0=async(e,t)=>{let r={...e,body:await q0(e.body,t)},n=K0(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await P0(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await I0(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await v0(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await O0(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await D0(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await B0(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await M0(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await F0(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await L0(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await z0(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await U0(r,t);default:let o=r.body;return T0({output:e,parsedBody:o,errorCode:n})}};var T0=Ut(ye),P0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new _n({$metadata:Je(e),...r});return Y(s,e.body)},I0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new Rn({$metadata:Je(e),...r});return Y(s,e.body)},v0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new Nn({$metadata:Je(e),...r});return Y(s,e.body)},O0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new Tn({$metadata:Je(e),...r});return Y(s,e.body)},D0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new Pn({$metadata:Je(e),...r});return Y(s,e.body)};var B0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new In({$metadata:Je(e),...r});return Y(s,e.body)},M0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new vn({$metadata:Je(e),...r});return Y(s,e.body)},F0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new On({$metadata:Je(e),...r});return Y(s,e.body)},L0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new Dn({$metadata:Je(e),...r});return Y(s,e.body)},z0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new Bn({$metadata:Je(e),...r});return Y(s,e.body)},U0=async(e,t)=>{let r=V({}),n=e.body,o=le(n,{error:T,error_description:T});Object.assign(r,o);let s=new Mn({$metadata:Je(e),...r});return Y(s,e.body)},Je=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),$0=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),j0=(e,t)=>$0(e,t).then(r=>t.utf8Encoder(r));var sh=(e,t)=>j0(e,t).then(r=>r.length?JSON.parse(r):{}),q0=async(e,t)=>{let r=await sh(e,t);return r.message=r.message??r.Message,r},K0=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Fn=class extends Ie{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(He(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ve(r,Fn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f},{requestHandler:d}=r;return o.resolve(f=>d.handle(f.request,n||{}),c)}serialize(t,r){return nh(t,r)}deserialize(t,r){return oh(t,r)}};var ih=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var ah={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.321.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.319.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.321.1","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.319.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var ph="required",It="fn",vt="argv",Ln="ref",Za="PartitionResult",Ct="tree",Co="error",wo="endpoint",ch={[ph]:!1,type:"String"},dh={[ph]:!0,default:!1,type:"Boolean"},yh={[Ln]:"Endpoint"},gh={[It]:"booleanEquals",[vt]:[{[Ln]:"UseFIPS"},!0]},xh={[It]:"booleanEquals",[vt]:[{[Ln]:"UseDualStack"},!0]},wt={},lh={[It]:"booleanEquals",[vt]:[!0,{[It]:"getAttr",[vt]:[{[Ln]:Za},"supportsFIPS"]}]},fh={[It]:"booleanEquals",[vt]:[!0,{[It]:"getAttr",[vt]:[{[Ln]:Za},"supportsDualStack"]}]},mh=[yh],uh=[gh],hh=[xh],H0={version:"1.0",parameters:{Region:ch,UseDualStack:dh,UseFIPS:dh,Endpoint:ch},rules:[{conditions:[{[It]:"aws.partition",[vt]:[{[Ln]:"Region"}],assign:Za}],type:Ct,rules:[{conditions:[{[It]:"isSet",[vt]:mh},{[It]:"parseURL",[vt]:mh,assign:"url"}],type:Ct,rules:[{conditions:uh,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Co},{type:Ct,rules:[{conditions:hh,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Co},{endpoint:{url:yh,properties:wt,headers:wt},type:wo}]}]},{conditions:[gh,xh],type:Ct,rules:[{conditions:[lh,fh],type:Ct,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wt,headers:wt},type:wo}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Co}]},{conditions:uh,type:Ct,rules:[{conditions:[lh],type:Ct,rules:[{type:Ct,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:wt,headers:wt},type:wo}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Co}]},{conditions:hh,type:Ct,rules:[{conditions:[fh],type:Ct,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wt,headers:wt},type:wo}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Co}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:wt,headers:wt},type:wo}]}]},Ch=H0;var wh=(e,t={})=>dr(Ch,{endpointParams:e,logger:t.logger});var Eh=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??pr,base64Encoder:(e==null?void 0:e.base64Encoder)??yr,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??wh,logger:(e==null?void 0:e.logger)??new st,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??Oe,utf8Decoder:(e==null?void 0:e.utf8Decoder)??dt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Vt});var bh=e=>{jt(process.version);let t=gr(e),r=()=>t().then($t),n=Eh(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ur,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??hr({serviceId:n.serviceId,clientVersion:ah.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??H(rr),region:(e==null?void 0:e.region)??H(ft,Qt),requestHandler:(e==null?void 0:e.requestHandler)??new pt(r),retryMode:(e==null?void 0:e.retryMode)??H({...or,default:async()=>(await r()).retryMode||ut}),sha256:(e==null?void 0:e.sha256)??Xe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??yt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??H(Wt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??H(Yt)}};var Hs=class extends it{constructor(t){let r=bh(t),n=ih(r),o=Xt(n),s=qt(o),i=nr(s),a=i,c=ar(a);super(c),this.config=c,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Zt(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(tr(this.config)),this.middlewareStack.use(lr(this.config))}destroy(){super.destroy()}};var ec={},Sh=e=>{if(ec[e])return ec[e];let t=new Hs({region:e});return ec[e]=t,t};var kh=(e,t)=>Sh(t).send(new Fn({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var tc=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Fe(`Token is expired. ${An}`,!1)};var xr=(e,t,r=!1)=>{if(typeof t>"u")throw new Fe(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${An}`,!1)};import{promises as V0}from"fs";var{writeFile:W0}=V0,Ah=(e,t)=>{let r=vs(e),n=JSON.stringify(t,null,2);return W0(r,n)};var _h=new Date(0),Rh=(e={})=>async()=>{let t=await fr(e),r=Qe(e),n=t[r];if(n){if(!n.sso_session)throw new Fe(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Fe(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await Ms(e))[o];if(!i)throw new Fe(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let E of["sso_start_url","sso_region"])if(!i[E])throw new Fe(`Sso session '${o}' is missing required property '${E}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await Os(o)}catch{throw new Fe(`The SSO session token associated with profile=${r} was not found or is invalid. ${An}`,!1)}xr("accessToken",d.accessToken),xr("expiresAt",d.expiresAt);let{accessToken:f,expiresAt:h}=d,p={token:f,expiration:new Date(h)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-_h.getTime()<30*1e3)return tc(p),p;xr("clientId",d.clientId,!0),xr("clientSecret",d.clientSecret,!0),xr("refreshToken",d.refreshToken,!0);try{_h.setTime(Date.now());let E=await kh(d,c);xr("accessToken",E.accessToken),xr("expiresIn",E.expiresIn);let b=new Date(Date.now()+E.expiresIn*1e3);try{await Ah(o,{...d,accessToken:E.accessToken,expiresAt:b.toISOString(),refreshToken:E.refreshToken})}catch{}return{token:E.accessToken,expiration:b}}catch{return tc(p),p}};var Q0=15*60*1e3,Eo=!1,rc=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let v=await Rh({profile:i})();a={accessToken:v.token,expiresAt:new Date(v.expiration).toISOString()}}catch(v){throw new D(v.message,Eo)}else try{a=await Os(e)}catch{throw new D(`The SSO session associated with this profile is invalid. ${c}`,Eo)}if(new Date(a.expiresAt).getTime()-Date.now()<=Q0)throw new D(`The SSO session associated with this profile has expired. ${c}`,Eo);let{accessToken:d}=a,f=s||new Gs({region:n}),h;try{h=await f.send(new Sn({accountId:r,roleName:o,accessToken:d}))}catch(v){throw D.from(v,Eo)}let{roleCredentials:{accessKeyId:p,secretAccessKey:E,sessionToken:b,expiration:N}={}}=h;if(!p||!E||!b||!N)throw new D("SSO returns an invalid temporary credential.",Eo);return{accessKeyId:p,secretAccessKey:E,sessionToken:b,expiration:new Date(N)}};var Vs=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new D(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Ws=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=Qe(e);if(!t&&!r&&!n&&!o&&!i){let d=(await fr(e))[a];if(!d)throw new D(`Profile ${a} was not found.`);if(!po(d))throw new D(`Profile ${a} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let v=(await Ms(e))[d.sso_session],$e=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==v.sso_region)throw new D("Conflicting SSO region"+$e,!1);if(t&&t!==v.sso_start_url)throw new D("Conflicting SSO start_url"+$e,!1);d.sso_region=v.sso_region,d.sso_start_url=v.sso_start_url}let{sso_start_url:f,sso_account_id:h,sso_region:p,sso_role_name:E,sso_session:b}=Vs(d);return rc({ssoStartUrl:f,ssoSession:b,ssoAccountId:h,ssoRegion:p,ssoRoleName:E,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new D('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return rc({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var Nh=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=Vs(e);return Ws({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var nc=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,oc=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});import{readFileSync as X0}from"fs";var Th=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new D(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var J0="AWS_WEB_IDENTITY_TOKEN_FILE",Z0="AWS_ROLE_ARN",ek="AWS_ROLE_SESSION_NAME",Ys=(e={})=>async()=>tk(e),tk=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[J0],r=(e==null?void 0:e.roleArn)??process.env[Z0],n=(e==null?void 0:e.roleSessionName)??process.env[ek];if(!t||!r)throw new D("Web identity configuration not specified");return Th({...e,webIdentityToken:X0(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var Ph=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,Ih=async(e,t)=>Ys({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var js=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&nc(o))return oc(o);if(gu(o))return xu(e,t,r,n);if(nc(o))return oc(o);if(Ph(o))return Ih(o,r);if(Eu(o))return bu(r,e);if(po(o))return Nh(o);throw new D(`Profile ${e} could not be found or parsed in shared credentials file.`)};var vh=(e={})=>async()=>{let t=await fr(e);return js(Qe(e),t,e)};var rk="AWS_EC2_METADATA_DISABLED",Oh=e=>process.env[mo]||process.env[fo]?Us(e):process.env[rk]?async()=>{throw new D("EC2 Instance Metadata Service access disabled")}:$s(e);var Qs=(e={})=>ir(us(...e.profile||process.env[ja]?[]:[Is()],Ws(e),vh(e),qs(e),Ys(e),Oh(e),async()=>{throw new D("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var jh="required",$="type",Q="fn",X="argv",Cr="ref",Pr="properties",Ir="headers";var ic="PartitionResult",Ze="tree",vr="booleanEquals",Ee="stringEquals",qh="sigv4",Kh="us-east-1",Gh="sts",oe="endpoint",Hh="https://sts.{Region}.{PartitionResult#dnsSuffix}",bo="error",ac="getAttr",Dh={[jh]:!1,[$]:"String"},sc={[jh]:!0,default:!1,[$]:"Boolean"},be={[Cr]:"Region"},Vh={[Cr]:"UseFIPS"},Wh={[Cr]:"UseDualStack"},Bh={[Q]:"isSet",[X]:[{[Cr]:"Endpoint"}]},Yh={[Cr]:"Endpoint"},Se={url:"https://sts.amazonaws.com",[Pr]:{authSchemes:[{name:qh,signingRegion:Kh,signingName:Gh}]},[Ir]:{}},Ot={},Mh={conditions:[{[Q]:Ee,[X]:[be,"aws-global"]}],[oe]:Se,[$]:oe},Qh={[Q]:vr,[X]:[Vh,!0]},Xh={[Q]:vr,[X]:[Wh,!0]},Fh={[Q]:vr,[X]:[!0,{[Q]:ac,[X]:[{[Cr]:ic},"supportsFIPS"]}]},Jh={[Cr]:ic},Lh={[Q]:vr,[X]:[!0,{[Q]:ac,[X]:[Jh,"supportsDualStack"]}]},zh={url:Hh,[Pr]:{},[Ir]:{}},nk=[Yh],Uh=[Qh],$h=[Xh],ok={version:"1.0",parameters:{Region:Dh,UseDualStack:sc,UseFIPS:sc,Endpoint:Dh,UseGlobalEndpoint:sc},rules:[{conditions:[{[Q]:"aws.partition",[X]:[be],assign:ic}],[$]:Ze,rules:[{conditions:[{[Q]:vr,[X]:[{[Cr]:"UseGlobalEndpoint"},!0]},{[Q]:vr,[X]:[Vh,!1]},{[Q]:vr,[X]:[Wh,!1]},{[Q]:"not",[X]:[Bh]}],[$]:Ze,rules:[{conditions:[{[Q]:Ee,[X]:[be,"ap-northeast-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"ap-south-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"ap-southeast-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"ap-southeast-2"]}],endpoint:Se,[$]:oe},Mh,{conditions:[{[Q]:Ee,[X]:[be,"ca-central-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"eu-central-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"eu-north-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"eu-west-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"eu-west-2"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"eu-west-3"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"sa-east-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,Kh]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"us-east-2"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"us-west-1"]}],endpoint:Se,[$]:oe},{conditions:[{[Q]:Ee,[X]:[be,"us-west-2"]}],endpoint:Se,[$]:oe},{endpoint:{url:Hh,[Pr]:{authSchemes:[{name:qh,signingRegion:"{Region}",signingName:Gh}]},[Ir]:Ot},[$]:oe}]},{conditions:[Bh,{[Q]:"parseURL",[X]:nk,assign:"url"}],[$]:Ze,rules:[{conditions:Uh,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[$]:bo},{[$]:Ze,rules:[{conditions:$h,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[$]:bo},{endpoint:{url:Yh,[Pr]:Ot,[Ir]:Ot},[$]:oe}]}]},{conditions:[Qh,Xh],[$]:Ze,rules:[{conditions:[Fh,Lh],[$]:Ze,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Pr]:Ot,[Ir]:Ot},[$]:oe}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[$]:bo}]},{conditions:Uh,[$]:Ze,rules:[{conditions:[Fh],[$]:Ze,rules:[{[$]:Ze,rules:[{conditions:[{[Q]:Ee,[X]:["aws-us-gov",{[Q]:ac,[X]:[Jh,"name"]}]}],endpoint:zh,[$]:oe},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Pr]:Ot,[Ir]:Ot},[$]:oe}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[$]:bo}]},{conditions:$h,[$]:Ze,rules:[{conditions:[Lh],[$]:Ze,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Pr]:Ot,[Ir]:Ot},[$]:oe}]},{error:"DualStack is enabled but this partition does not support DualStack",[$]:bo}]},{[$]:Ze,rules:[Mh,{endpoint:zh,[$]:oe}]}]}]},Zh=ok;var ep=(e,t={})=>dr(Zh,{endpointParams:e,logger:t.logger});var tp=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??pr,base64Encoder:(e==null?void 0:e.base64Encoder)??yr,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??ep,logger:(e==null?void 0:e.logger)??new st,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??Oe,utf8Decoder:(e==null?void 0:e.utf8Decoder)??dt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Vt});var rp=e=>{jt(process.version);let t=gr(e),r=()=>t().then($t),n=tp(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ur,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??eu(Qs),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??hr({serviceId:n.serviceId,clientVersion:Xm.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??H(rr),region:(e==null?void 0:e.region)??H(ft,Qt),requestHandler:(e==null?void 0:e.requestHandler)??new pt(r),retryMode:(e==null?void 0:e.retryMode)??H({...or,default:async()=>(await r()).retryMode||ut}),sha256:(e==null?void 0:e.sha256)??Xe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??yt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??H(Wt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??H(Yt)}};var Or=class extends it{constructor(t){let r=rp(t),n=Qm(r),o=Xt(n),s=qt(o),i=nr(s),a=i,c=Ym(a,{stsClientCtor:Or}),d=ar(c);super(d),this.config=d,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Zt(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(tr(this.config)),this.middlewareStack.use(lr(this.config))}destroy(){super.destroy()}};var np=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,sk=(e={},t)=>Ua(e,np(Or,t)),ik=(e={},t)=>$a(e,np(Or,t)),op=e=>t=>e({roleAssumer:sk(t),roleAssumerWithWebIdentity:ik(t),...t});var fp=kr(ro());var wr=class{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&sp(r),new wr(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&sp(t),parseInt(we(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function sp(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Xs=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let f=new Uint8Array(9);return f[0]=8,f.set(wr.fromNumber(t.value.valueOf()).bytes,1),f;case"uuid":if(!pk.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let h=new Uint8Array(17);return h[0]=9,h.set(Gf(t.value.replace(/\-/g,"")),1),h}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:ap,value:!0};break;case 1:r[s]={type:ap,value:!1};break;case 2:r[s]={type:ak,value:t.getInt8(n++)};break;case 3:r[s]={type:ck,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:dk,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:lk,value:new wr(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:fk,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:mk,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:uk,value:new Date(new wr(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:hk,value:`${we(c.subarray(0,4))}-${we(c.subarray(4,6))}-${we(c.subarray(6,8))}-${we(c.subarray(8,10))}-${we(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},ip;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(ip||(ip={}));var ap="boolean",ak="byte",ck="short",dk="integer",lk="long",fk="binary",mk="string",uk="timestamp",hk="uuid",pk=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var cp=kr(ro()),dp=4,Er=dp*2,Dr=4,yk=Er+Dr*2;function lp({byteLength:e,byteOffset:t,buffer:r}){if(e<yk)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(dp,!1),i=n.getUint32(Er,!1),a=n.getUint32(e-Dr,!1),c=new cp.Crc32().update(new Uint8Array(r,t,Er));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Er,e-(Er+Dr))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Er+Dr,s),body:new Uint8Array(r,t+Er+Dr+s,o-s-(Er+Dr+Dr))}}var Js=class{constructor(t,r){this.headerMarshaller=new Xs(t,r)}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new fp.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=lp(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};function mp(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:d}=await a.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let f=c.length,h=0;for(;h<f;){if(!n){let E=f-h;o||(o=new Uint8Array(4));let b=Math.min(4-r,E);if(o.set(c.slice(h,h+b),r),r+=b,h+=b,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let p=Math.min(t-r,f-h);n.set(c.slice(h,h+p),r),r+=p,h+=p,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function up(e,t){return{[Symbol.asyncIterator]:async function*(){for await(let r of e){let n=t.eventStreamCodec.decode(r),{value:o}=n.headers[":message-type"];if(o==="error"){let s=new Error(n.headers[":error-message"].value||"UnknownError");throw s.name=n.headers[":error-code"].value,s}else if(o==="exception"){let s=n.headers[":exception-type"].value,i={[s]:n},a=await t.deserializer(i);if(a.$unknown){let c=new Error(t.toUtf8(n.body));throw c.name=s,c}throw a[s]}else if(o==="event"){let s={[n.headers[":event-type"].value]:n},i=await t.deserializer(s);if(i.$unknown)continue;yield i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}}}var So=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new Js(t,r),this.utfEncoder=t}deserialize(t,r){let n=mp(t);return up(n,{eventStreamCodec:this.eventStreamCodec,deserializer:r,toUtf8:this.utfEncoder})}serialize(t,r){let n=this,o=async function*(){for await(let s of t)yield n.eventStreamCodec.encode(r(s));yield new Uint8Array(0)};return{[Symbol.asyncIterator]:o}}};import{Readable as gk}from"stream";async function*hp(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var Zs=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new So({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:hp(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return gk.from(this.universalMarshaller.serialize(t,r))}};var pp=e=>new Zs(e);import{Writable as xk}from"stream";var ko=class extends xk{constructor(t,r){super(r),this.hash=t}_write(t,r,n){try{this.hash.update(Be(t))}catch(o){return n(o)}n()}};var yp=(e,t)=>{if(t.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new e,n=new ko(r);return t.pipe(n),new Promise((o,s)=>{t.on("error",i=>{n.end(),s(i)}),n.on("error",s),n.on("finish",()=>{r.digest().then(o).catch(s)})})};var Ck="AWS_S3_USE_ARN_REGION",wk="s3_use_arn_region",gp={environmentVariableSelector:e=>lt(e,Ck,We.ENV),configFileSelector:e=>lt(e,wk,We.CONFIG),default:!1};import{Readable as Pk}from"stream";var xp=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,c=a?i(o,e):void 0,d=new Pk({read:()=>{}});return e.on("data",f=>{d.push(`${(n(f)||0).toString(16)}\r
${f.toString()}\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let f=r(await c);d.push(`${s}:${f}\r
`),d.push(`\r
`)}d.push(null)}),d};import{Readable as cc}from"stream";import{TextDecoder as Ik}from"util";var Cp="The stream has already been transformed.",wp=e=>{var n,o;if(!(e instanceof cc)){let s=((o=(n=e==null?void 0:e.__proto__)==null?void 0:n.constructor)==null?void 0:o.name)||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(Cp);return t=!0,await yt(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let i=await r();return s===void 0||Buffer.isEncoding(s)?At(i.buffer,i.byteOffset,i.byteLength).toString(s):new Ik(s).decode(i)},transformToWebStream:()=>{if(t)throw new Error(Cp);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof cc.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,cc.toWeb(e)}})};var ei=class{constructor(t){this.sigv4Signer=new Tr(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let t;try{if(t=typeof ie=="function"&&ie("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var Pc="required",l="type",g="rules",y="conditions",m="fn",u="argv",C="ref",ge="assign",k="url",A="properties",B="authSchemes",M="disableDoubleEncoding",F="signingName",L="signingRegion",_="headers";var x="tree",Ue="isSet",Ao="substring",Ry="hardwareType",Ny="regionPrefix",Ep="abbaSuffix",Nc="outpostId",Po="aws.partition",P="stringEquals",Fr="isValidHostLabel",ae="not",R="error",Ty="parseURL",Ic="s3-outposts",w="endpoint",S="booleanEquals",Py="aws.parseArn",z="s3",bp="aws.isVirtualHostableS3Bucket",se="getAttr",O="name",dc="Host override cannot be combined with Dualstack, FIPS, or S3 Accelerate",Iy="https://{Bucket}.s3.{partitionResult#dnsSuffix}",vy="bucketArn",Oy="arnType",ii="",vc="s3-object-lambda",Dy="accesspoint",Oc="accessPointName",Sp="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",kp="mrapPartition",Ap="outpostType",_p="arnPrefix",Lr="{url#scheme}://{url#authority}{url#path}",By="https://s3.{partitionResult#dnsSuffix}",lc={[Pc]:!1,[l]:"String"},_o={[Pc]:!0,default:!1,[l]:"Boolean"},ti={[Pc]:!1,[l]:"Boolean"},My={[m]:Ue,[u]:[{[C]:"Bucket"}]},Et={[C]:"Bucket"},Rp={[C]:Ry},Np={[y]:[{[m]:ae,[u]:[{[m]:Ue,[u]:[{[C]:"Endpoint"}]}]}],[R]:"Expected a endpoint to be specified but no endpoint was found",[l]:R},U={[m]:ae,[u]:[{[m]:Ue,[u]:[{[C]:"Endpoint"}]}]},j={[m]:Ue,[u]:[{[C]:"Endpoint"}]},ee={[m]:Ty,[u]:[{[C]:"Endpoint"}],[ge]:"url"},ri={[B]:[{[M]:!0,[O]:"sigv4",[F]:Ic,[L]:"{Region}"}]},me={},Tp={[C]:"ForcePathStyle"},Pp={[y]:[{[m]:"uriEncode",[u]:[Et],[ge]:"uri_encoded_bucket"}],[l]:x,[g]:[{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},j],[R]:"Cannot set dual-stack in combination with a custom endpoint.",[l]:R},{[l]:x,[g]:[{[y]:[{[m]:Po,[u]:[{[C]:"Region"}],[ge]:"partitionResult"}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:S,[u]:[{[C]:"Accelerate"},!1]}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!0]}],[l]:x,[g]:[{[w]:{[k]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w}]},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[k]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!0]}],[l]:x,[g]:[{[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w}]},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!0]}],[l]:x,[g]:[{[w]:{[k]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w}]},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!0]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[k]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!0]}],[l]:x,[g]:[{[w]:{[k]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w}]},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!0]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[k]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!0]}],[l]:x,[g]:[{[y]:[{[m]:P,[u]:[{[C]:"Region"},"us-east-1"]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w},{[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w}]},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},j,ee,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!0]}],[l]:x,[g]:[{[y]:[{[m]:P,[u]:[{[C]:"Region"},"us-east-1"]}],[w]:{[k]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w},{[w]:{[k]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w}]},{[y]:[{[m]:S,[u]:[{[C]:"UseDualStack"},!1]},U,{[m]:S,[u]:[{[C]:"UseFIPS"},!1]},{[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},{[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[k]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},[_]:{}},[l]:w}]}]},{[R]:"Path-style addressing cannot be used with S3 Accelerate",[l]:R}]}]},{[R]:"A valid partition could not be determined",[l]:R}]}]},te={[m]:S,[u]:[{[C]:"UseDualStack"},!0]},he={[m]:S,[u]:[{[C]:"Accelerate"},!1]},ne={[m]:S,[u]:[{[C]:"UseFIPS"},!0]},W={[m]:ae,[u]:[{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}]},ke={[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!0]},_e={[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{Region}"}]},Ae={[m]:S,[u]:[{[C]:"UseGlobalEndpoint"},!1]},J={[m]:S,[u]:[{[C]:"UseDualStack"},!1]},K={[m]:S,[u]:[{[C]:"UseFIPS"},!1]},Br={[R]:"A valid partition could not be determined",[l]:R},fc={[y]:[ne,{[m]:P,[u]:[{[m]:se,[u]:[{[C]:"partitionResult"},O]},"aws-cn"]}],[R]:"Partition does not support FIPS",[l]:R},vk={[m]:P,[u]:[{[m]:se,[u]:[{[C]:"partitionResult"},O]},"aws-cn"]},nt={[m]:S,[u]:[{[C]:"Accelerate"},!0]},Ip={[y]:[te,ne,he,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},vp={[k]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},Op={[y]:[J,ne,he,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},Dp={[k]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},Bp={[y]:[te,K,nt,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},Mp={[k]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},Fp={[y]:[te,K,he,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},Lp={[k]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},zp={[y]:[J,K,he,j,ee,{[m]:S,[u]:[{[m]:se,[u]:[{[C]:"url"},"isIp"]},!0]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},Up={[m]:S,[u]:[{[m]:se,[u]:[{[C]:"url"},"isIp"]},!0]},Dc={[C]:"url"},$p={[y]:[J,K,he,j,ee,{[m]:S,[u]:[{[m]:se,[u]:[Dc,"isIp"]},!1]},{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},jp={[m]:S,[u]:[{[m]:se,[u]:[Dc,"isIp"]},!1]},mc={[k]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[A]:_e,[_]:{}},Tc={[k]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[A]:_e,[_]:{}},qp={[w]:Tc,[l]:w},Kp={[y]:[J,K,nt,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},uc={[k]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},Gp={[y]:[J,K,he,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:Iy,[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},Hp={[k]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},ni={[R]:"Invalid region: region was not a valid DNS name.",[l]:R},ze={[C]:vy},Fy={[C]:Oy},hc={[m]:se,[u]:[ze,"service"]},Bc={[C]:Oc},Vp={[y]:[te],[R]:"S3 Object Lambda does not support Dual-stack",[l]:R},Wp={[y]:[nt],[R]:"S3 Object Lambda does not support S3 Accelerate",[l]:R},Yp={[y]:[{[m]:Ue,[u]:[{[C]:"DisableAccessPoints"}]},{[m]:S,[u]:[{[C]:"DisableAccessPoints"},!0]}],[R]:"Access points are not supported for this operation",[l]:R},pc={[y]:[{[m]:Ue,[u]:[{[C]:"UseArnRegion"}]},{[m]:S,[u]:[{[C]:"UseArnRegion"},!1]},{[m]:ae,[u]:[{[m]:P,[u]:[{[m]:se,[u]:[ze,"region"]},"{Region}"]}]}],[R]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[l]:R},Mc={[m]:se,[u]:[{[C]:"bucketPartition"},O]},Ly={[m]:se,[u]:[ze,"accountId"]},Qp={[y]:[ne,{[m]:P,[u]:[Mc,"aws-cn"]}],[R]:"Partition does not support FIPS",[l]:R},yc={[B]:[{[M]:!0,[O]:"sigv4",[F]:vc,[L]:"{bucketArn#region}"}]},Xp={[R]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[l]:R},gc={[R]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[l]:R},xc={[R]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[l]:R},Cc={[R]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[l]:R},Jp={[R]:"Could not load partition for ARN region `{bucketArn#region}`",[l]:R},Zp={[R]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[l]:R},ey={[R]:"Invalid ARN: bucket ARN is missing a region",[l]:R},ty={[R]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[l]:R},Ro={[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"{bucketArn#region}"}]},ry={[B]:[{[M]:!0,[O]:"sigv4",[F]:Ic,[L]:"{bucketArn#region}"}]},ny={[C]:"UseObjectLambdaEndpoint"},wc={[B]:[{[M]:!0,[O]:"sigv4",[F]:vc,[L]:"{Region}"}]},oy={[y]:[ne,te,j,ee,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:Lr,[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},zy={[w]:{[k]:Lr,[A]:_e,[_]:{}},[l]:w},No={[k]:Lr,[A]:_e,[_]:{}},sy={[y]:[ne,te,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},iy={[k]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},ay={[y]:[ne,J,j,ee,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:Lr,[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},cy={[y]:[ne,J,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},dy={[k]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},ly={[y]:[K,te,j,ee,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:Lr,[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},fy={[y]:[K,te,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},my={[k]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},uy={[y]:[K,J,j,ee,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:Lr,[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},hy={[y]:[K,J,U,{[m]:P,[u]:[{[C]:"Region"},"aws-global"]}],[w]:{[k]:By,[A]:{[B]:[{[M]:!0,[O]:"sigv4",[F]:z,[L]:"us-east-1"}]},[_]:{}},[l]:w},py={[k]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[_]:{}},si=[{[C]:"Region"}],Ok=[Et],yy=[{[m]:Fr,[u]:[{[C]:Nc},!1]}],gy=[{[m]:P,[u]:[{[C]:Ny},"beta"]}],Dk=[{[C]:"Endpoint"}],To=[j,ee],xy=[My],Cy=[{[m]:Py,[u]:[Et]}],Bk=[te,j],Mr=[{[m]:Po,[u]:si,[ge]:"partitionResult"}],zn=[{[m]:P,[u]:[{[C]:"Region"},"us-east-1"]}],wy=[{[m]:Fr,[u]:[{[C]:"Region"},!1]}],Ec=[{[m]:P,[u]:[Fy,Dy]}],Ey=[{[m]:se,[u]:[ze,"resourceId[1]"],[ge]:Oc},{[m]:ae,[u]:[{[m]:P,[u]:[Bc,ii]}]}],Mk=[ze,"resourceId[1]"],by=[te],bc=[nt],Sc=[{[m]:ae,[u]:[{[m]:P,[u]:[{[m]:se,[u]:[ze,"region"]},ii]}]}],Sy=[{[m]:ae,[u]:[{[m]:Ue,[u]:[{[m]:se,[u]:[ze,"resourceId[2]"]}]}]}],Fk=[ze,"resourceId[2]"],kc=[{[m]:Po,[u]:[{[m]:se,[u]:[ze,"region"]}],[ge]:"bucketPartition"}],ky=[{[m]:P,[u]:[Mc,{[m]:se,[u]:[{[C]:"partitionResult"},O]}]}],Ac=[{[m]:Fr,[u]:[{[m]:se,[u]:[ze,"region"]},!0]}],_c=[{[m]:Fr,[u]:[Ly,!1]}],Ay=[{[m]:Fr,[u]:[Bc,!1]}],oi=[ne],_y=[{[m]:Fr,[u]:[{[C]:"Region"},!0]}],Rc=[zy],Lk={version:"1.0",parameters:{Bucket:lc,Region:lc,UseFIPS:_o,UseDualStack:_o,Endpoint:lc,ForcePathStyle:ti,Accelerate:_o,UseGlobalEndpoint:_o,UseObjectLambdaEndpoint:ti,DisableAccessPoints:ti,DisableMultiRegionAccessPoints:_o,UseArnRegion:ti},[g]:[{[l]:x,[g]:[{[y]:[{[m]:Ue,[u]:si}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:[My,{[m]:Ao,[u]:[Et,49,50,!0],[ge]:Ry},{[m]:Ao,[u]:[Et,8,12,!0],[ge]:Ny},{[m]:Ao,[u]:[Et,0,7,!0],[ge]:Ep},{[m]:Ao,[u]:[Et,32,49,!0],[ge]:Nc},{[m]:Po,[u]:si,[ge]:"regionPartition"},{[m]:P,[u]:[{[C]:Ep},"--op-s3"]}],[l]:x,[g]:[{[y]:yy,[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:P,[u]:[Rp,"e"]}],[l]:x,[g]:[{[y]:gy,[l]:x,[g]:[Np,{[y]:To,endpoint:{[k]:"https://{Bucket}.ec2.{url#authority}",[A]:ri,[_]:me},[l]:w}]},{endpoint:{[k]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[A]:ri,[_]:me},[l]:w}]},{[y]:[{[m]:P,[u]:[Rp,"o"]}],[l]:x,[g]:[{[y]:gy,[l]:x,[g]:[Np,{[y]:To,endpoint:{[k]:"https://{Bucket}.op-{outpostId}.{url#authority}",[A]:ri,[_]:me},[l]:w}]},{endpoint:{[k]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[A]:ri,[_]:me},[l]:w}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[l]:R}]}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[l]:R}]},{[y]:xy,[l]:x,[g]:[{[y]:[j,{[m]:ae,[u]:[{[m]:Ue,[u]:[{[m]:Ty,[u]:Dk}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[l]:R},{[l]:x,[g]:[{[y]:[{[m]:Ue,[u]:[Tp]},{[m]:S,[u]:[Tp,!0]}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:Cy,error:"Path-style addressing cannot be used with ARN buckets",[l]:R},Pp]}]},{[y]:[{[m]:bp,[u]:[Et,!1]}],[l]:x,[g]:[{[y]:Mr,[l]:x,[g]:[{[l]:x,[g]:[{[y]:wy,[l]:x,[g]:[{[l]:x,[g]:[fc,{[l]:x,[g]:[{[y]:[nt,ne],error:"Accelerate cannot be used with FIPS",[l]:R},{[l]:x,[g]:[{[y]:[nt,vk],error:"S3 Accelerate cannot be used in this region",[l]:R},{[l]:x,[g]:[{[y]:[j,te],error:dc,[l]:R},{[l]:x,[g]:[{[y]:[j,ne],error:dc,[l]:R},{[l]:x,[g]:[{[y]:[j,nt],error:dc,[l]:R},{[l]:x,[g]:[Ip,Ip,{[y]:[te,ne,he,U,W,ke],[l]:x,[g]:[{endpoint:vp,[l]:w}]},{[y]:[te,ne,he,U,W,Ae],endpoint:vp,[l]:w},Op,Op,{[y]:[J,ne,he,U,W,ke],[l]:x,[g]:[{endpoint:Dp,[l]:w}]},{[y]:[J,ne,he,U,W,Ae],endpoint:Dp,[l]:w},Bp,Bp,{[y]:[te,K,nt,U,W,ke],[l]:x,[g]:[{endpoint:Mp,[l]:w}]},{[y]:[te,K,nt,U,W,Ae],endpoint:Mp,[l]:w},Fp,Fp,{[y]:[te,K,he,U,W,ke],[l]:x,[g]:[{endpoint:Lp,[l]:w}]},{[y]:[te,K,he,U,W,Ae],endpoint:Lp,[l]:w},zp,$p,zp,$p,{[y]:[J,K,he,j,ee,Up,W,ke],[l]:x,[g]:[{[y]:zn,endpoint:mc,[l]:w},{endpoint:mc,[l]:w}]},{[y]:[J,K,he,j,ee,jp,W,ke],[l]:x,[g]:[{[y]:zn,endpoint:Tc,[l]:w},qp]},{[y]:[J,K,he,j,ee,Up,W,Ae],endpoint:mc,[l]:w},{[y]:[J,K,he,j,ee,jp,W,Ae],endpoint:Tc,[l]:w},Kp,Kp,{[y]:[J,K,nt,U,W,ke],[l]:x,[g]:[{[y]:zn,endpoint:uc,[l]:w},{endpoint:uc,[l]:w}]},{[y]:[J,K,nt,U,W,Ae],endpoint:uc,[l]:w},Gp,Gp,{[y]:[J,K,he,U,W,ke],[l]:x,[g]:[{[y]:zn,endpoint:{[k]:Iy,[A]:_e,[_]:me},[l]:w},{endpoint:Hp,[l]:w}]},{[y]:[J,K,he,U,W,Ae],endpoint:Hp,[l]:w}]}]}]}]}]}]}]}]},ni]}]},Br]},{[y]:[j,ee,{[m]:P,[u]:[{[m]:se,[u]:[Dc,"scheme"]},"http"]},{[m]:bp,[u]:[Et,!0]},K,J,he],[l]:x,[g]:[{[y]:Mr,[l]:x,[g]:[{[l]:x,[g]:[{[y]:wy,[l]:x,[g]:[qp]},ni]}]},Br]},{[y]:[{[m]:Py,[u]:Ok,[ge]:vy}],[l]:x,[g]:[{[y]:[{[m]:se,[u]:[ze,"resourceId[0]"],[ge]:Oy},{[m]:ae,[u]:[{[m]:P,[u]:[Fy,ii]}]}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:P,[u]:[hc,vc]}],[l]:x,[g]:[{[y]:Ec,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Ey,[l]:x,[g]:[{[l]:x,[g]:[Vp,{[l]:x,[g]:[Wp,{[l]:x,[g]:[{[y]:Sc,[l]:x,[g]:[{[l]:x,[g]:[Yp,{[l]:x,[g]:[{[y]:Sy,[l]:x,[g]:[{[l]:x,[g]:[pc,{[l]:x,[g]:[{[y]:kc,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Mr,[l]:x,[g]:[{[l]:x,[g]:[{[y]:ky,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Ac,[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:P,[u]:[Ly,ii]}],error:"Invalid ARN: Missing account id",[l]:R},{[l]:x,[g]:[{[y]:_c,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Ay,[l]:x,[g]:[{[l]:x,[g]:[Qp,{[l]:x,[g]:[{[y]:To,endpoint:{[k]:Sp,[A]:yc,[_]:me},[l]:w},{[y]:oi,endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:yc,[_]:me},[l]:w},{endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:yc,[_]:me},[l]:w}]}]}]},Xp]}]},gc]}]}]},xc]}]},Cc]}]},Br]}]},Jp]}]}]},Zp]}]}]},ey]}]}]}]},ty]}]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[l]:R}]},{[y]:Ec,[l]:x,[g]:[{[y]:Ey,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Sc,[l]:x,[g]:[{[y]:Ec,[l]:x,[g]:[{[y]:Sc,[l]:x,[g]:[{[l]:x,[g]:[Yp,{[l]:x,[g]:[{[y]:Sy,[l]:x,[g]:[{[l]:x,[g]:[pc,{[l]:x,[g]:[{[y]:kc,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Mr,[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:P,[u]:[Mc,"{partitionResult#name}"]}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:Ac,[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:P,[u]:[hc,z]}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:_c,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Ay,[l]:x,[g]:[{[l]:x,[g]:[{[y]:bc,error:"Access Points do not support S3 Accelerate",[l]:R},{[l]:x,[g]:[Qp,{[l]:x,[g]:[{[y]:Bk,error:"DualStack cannot be combined with a Host override (PrivateLink)",[l]:R},{[l]:x,[g]:[{[y]:[ne,te],endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Ro,[_]:me},[l]:w},{[y]:[ne,J],endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Ro,[_]:me},[l]:w},{[y]:[K,te],endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Ro,[_]:me},[l]:w},{[y]:[K,J,j,ee],endpoint:{[k]:Sp,[A]:Ro,[_]:me},[l]:w},{[y]:[K,J],endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Ro,[_]:me},[l]:w}]}]}]}]}]},Xp]}]},gc]}]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[l]:R}]}]},xc]}]},Cc]}]},Br]}]},Jp]}]}]},Zp]}]}]},ey]}]},{[l]:x,[g]:[{[y]:[{[m]:Fr,[u]:[Bc,!0]}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:by,error:"S3 MRAP does not support dual-stack",[l]:R},{[l]:x,[g]:[{[y]:oi,error:"S3 MRAP does not support FIPS",[l]:R},{[l]:x,[g]:[{[y]:bc,error:"S3 MRAP does not support S3 Accelerate",[l]:R},{[l]:x,[g]:[{[y]:[{[m]:S,[u]:[{[C]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[l]:R},{[l]:x,[g]:[{[y]:[{[m]:Po,[u]:si,[ge]:kp}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:P,[u]:[{[m]:se,[u]:[{[C]:kp},O]},{[m]:se,[u]:[ze,"partition"]}]}],[l]:x,[g]:[{endpoint:{[k]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[A]:{[B]:[{[M]:!0,name:"sigv4a",[F]:z,signingRegionSet:["*"]}]},[_]:me},[l]:w}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[l]:R}]}]},{error:"{Region} was not a valid region",[l]:R}]}]}]}]}]}]},{error:"Invalid Access Point Name",[l]:R}]}]}]},ty]},{[y]:[{[m]:P,[u]:[hc,Ic]}],[l]:x,[g]:[{[y]:by,error:"S3 Outposts does not support Dual-stack",[l]:R},{[l]:x,[g]:[{[y]:oi,error:"S3 Outposts does not support FIPS",[l]:R},{[l]:x,[g]:[{[y]:bc,error:"S3 Outposts does not support S3 Accelerate",[l]:R},{[l]:x,[g]:[{[y]:[{[m]:Ue,[u]:[{[m]:se,[u]:[ze,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[l]:R},{[l]:x,[g]:[{[y]:[{[m]:se,[u]:Mk,[ge]:Nc}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:yy,[l]:x,[g]:[{[l]:x,[g]:[pc,{[l]:x,[g]:[{[y]:kc,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Mr,[l]:x,[g]:[{[l]:x,[g]:[{[y]:ky,[l]:x,[g]:[{[l]:x,[g]:[{[y]:Ac,[l]:x,[g]:[{[l]:x,[g]:[{[y]:_c,[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:se,[u]:Fk,[ge]:Ap}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:se,[u]:[ze,"resourceId[3]"],[ge]:Oc}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:[{[m]:P,[u]:[{[C]:Ap},Dy]}],[l]:x,[g]:[{[l]:x,[g]:[{[y]:To,endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[A]:ry,[_]:me},[l]:w},{endpoint:{[k]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:ry,[_]:me},[l]:w}]}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[l]:R}]}]},{error:"Invalid ARN: expected an access point name",[l]:R}]}]},{error:"Invalid ARN: Expected a 4-component resource",[l]:R}]}]},gc]}]},xc]}]},Cc]}]},Br]}]},{error:"Could not load partition for ARN region {bucketArn#region}",[l]:R}]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[l]:R}]}]},{error:"Invalid ARN: The Outpost Id was not set",[l]:R}]}]}]}]}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[l]:R}]}]},{error:"Invalid ARN: No ARN type specified",[l]:R}]},{[y]:[{[m]:Ao,[u]:[Et,0,4,!1],[ge]:_p},{[m]:P,[u]:[{[C]:_p},"arn:"]},{[m]:ae,[u]:[{[m]:Ue,[u]:Cy}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[l]:R},Pp]}]},{[y]:[{[m]:Ue,[u]:[ny]},{[m]:S,[u]:[ny,!0]}],[l]:x,[g]:[{[y]:Mr,[l]:x,[g]:[{[l]:x,[g]:[{[y]:_y,[l]:x,[g]:[{[l]:x,[g]:[Vp,{[l]:x,[g]:[Wp,{[l]:x,[g]:[fc,{[l]:x,[g]:[{[y]:To,endpoint:{[k]:Lr,[A]:wc,[_]:me},[l]:w},{[y]:oi,endpoint:{[k]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[A]:wc,[_]:me},[l]:w},{endpoint:{[k]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[A]:wc,[_]:me},[l]:w}]}]}]}]}]},ni]}]},Br]},{[y]:[{[m]:ae,[u]:xy}],[l]:x,[g]:[{[y]:Mr,[l]:x,[g]:[{[l]:x,[g]:[{[y]:_y,[l]:x,[g]:[{[l]:x,[g]:[fc,{[l]:x,[g]:[oy,oy,{[y]:[ne,te,j,ee,W,ke],[l]:x,[g]:Rc},{[y]:[ne,te,j,ee,W,Ae],endpoint:No,[l]:w},sy,sy,{[y]:[ne,te,U,W,ke],[l]:x,[g]:[{endpoint:iy,[l]:w}]},{[y]:[ne,te,U,W,Ae],endpoint:iy,[l]:w},ay,ay,{[y]:[ne,J,j,ee,W,ke],[l]:x,[g]:Rc},{[y]:[ne,J,j,ee,W,Ae],endpoint:No,[l]:w},cy,cy,{[y]:[ne,J,U,W,ke],[l]:x,[g]:[{endpoint:dy,[l]:w}]},{[y]:[ne,J,U,W,Ae],endpoint:dy,[l]:w},ly,ly,{[y]:[K,te,j,ee,W,ke],[l]:x,[g]:Rc},{[y]:[K,te,j,ee,W,Ae],endpoint:No,[l]:w},fy,fy,{[y]:[K,te,U,W,ke],[l]:x,[g]:[{endpoint:my,[l]:w}]},{[y]:[K,te,U,W,Ae],endpoint:my,[l]:w},uy,uy,{[y]:[K,J,j,ee,W,ke],[l]:x,[g]:[{[y]:zn,endpoint:No,[l]:w},zy]},{[y]:[K,J,j,ee,W,Ae],endpoint:No,[l]:w},hy,hy,{[y]:[K,J,U,W,ke],[l]:x,[g]:[{[y]:zn,endpoint:{[k]:By,[A]:_e,[_]:me},[l]:w},{endpoint:py,[l]:w}]},{[y]:[K,J,U,W,Ae],endpoint:py,[l]:w}]}]}]},ni]}]},Br]}]}]},{error:"A region must be set when sending requests to S3.",[l]:R}]}]},Uy=Lk;var $y=(e,t={})=>dr(Uy,{endpointParams:e,logger:t.logger});var jy=e=>({apiVersion:"2006-03-01",base64Decoder:(e==null?void 0:e.base64Decoder)??pr,base64Encoder:(e==null?void 0:e.base64Encoder)??yr,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??$y,logger:(e==null?void 0:e.logger)??new st,serviceId:(e==null?void 0:e.serviceId)??"S3",signerConstructor:(e==null?void 0:e.signerConstructor)??ei,signingEscapePath:(e==null?void 0:e.signingEscapePath)??!1,urlParser:(e==null?void 0:e.urlParser)??Oe,useArnRegion:(e==null?void 0:e.useArnRegion)??!1,utf8Decoder:(e==null?void 0:e.utf8Decoder)??dt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Vt});var qy=e=>{jt(process.version);let t=gr(e),r=()=>t().then($t),n=jy(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ur,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??op(Qs),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??hr({serviceId:n.serviceId,clientVersion:Pm.version}),eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??pp,getAwsChunkedEncodingStream:(e==null?void 0:e.getAwsChunkedEncodingStream)??xp,maxAttempts:(e==null?void 0:e.maxAttempts)??H(rr),md5:(e==null?void 0:e.md5)??Xe.bind(null,"md5"),region:(e==null?void 0:e.region)??H(ft,Qt),requestHandler:(e==null?void 0:e.requestHandler)??new pt(r),retryMode:(e==null?void 0:e.retryMode)??H({...or,default:async()=>(await r()).retryMode||ut}),sdkStreamMixin:(e==null?void 0:e.sdkStreamMixin)??wp,sha1:(e==null?void 0:e.sha1)??Xe.bind(null,"sha1"),sha256:(e==null?void 0:e.sha256)??Xe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??yt,streamHasher:(e==null?void 0:e.streamHasher)??yp,useArnRegion:(e==null?void 0:e.useArnRegion)??H(gp),useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??H(Wt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??H(Yt)}};var ai=class extends it{constructor(t){let r=qy(t),n=Tm(r),o=Xt(n),s=qt(o),i=nr(s),a=i,c=Es(a),d=jl(c),f=ar(d),h=Af(f);super(h),this.config=h,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Zt(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(tr(this.config)),this.middlewareStack.use(Ss(this.config)),this.middlewareStack.use(ql(this.config)),this.middlewareStack.use(Rf(this.config)),this.middlewareStack.use(lr(this.config))}destroy(){super.destroy()}};function Ky(e){return e.filter((t,r,n)=>t.at(-1)!=="/"||!n.some((o,s)=>r!==s&&o.startsWith(t)&&o.length>t.length))}var Hy=new ai({});try{let e=(0,pe.getInput)("bucket",{required:!0}),t=(0,pe.getMultilineInput)("path",{required:!0}),r=(0,pe.getInput)("prefix"),n=(await Promise.all(t.map(async a=>Vy(e,jk.join(r,a))))).flat(),o=Ky(Array.from(new Set(n)));(0,pe.isDebug)()&&(0,pe.debug)(`Matched S3 object keys: ${Fc(o)}`);let i=(await Promise.all(o.map(async a=>{let c=$k(process.cwd(),a.slice(r.length));if(a.at(-1)==="/")return await Gy(c,{recursive:!0}),(0,pe.info)(`Downloaded: ${c}`),200;let d=await Hy.send(new tn({Bucket:e,Key:a}));if((0,pe.isDebug)()&&(0,pe.debug)(`getObjectResponse: ${Fc(d)}`),d.Body!==void 0){await Gy(qk(c),{recursive:!0});let f=zk(c);await Uk(d.Body,f),(0,pe.info)(`Downloaded: ${c}`)}return d.$metadata.httpStatusCode??-1}))).filter(a=>a===200).length;(0,pe.info)(`### Total files downloaded: ${Intl.NumberFormat("en").format(i)} ###`)}catch(e){e instanceof Error&&(0,pe.setFailed)(e)}async function Vy(e,t,r){let n=await Hy.send(new rn({Bucket:e,Prefix:t,ContinuationToken:r}));(0,pe.isDebug)()&&(0,pe.debug)(`listObjectsV2Response: ${Fc(n)}`);let o=(n.Contents??[]).map(s=>s.Key??"").filter(Boolean);return n.IsTruncated?o.concat(await Vy(e,t,n.NextContinuationToken)):o}
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
